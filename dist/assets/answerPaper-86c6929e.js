import {
    h as Ja,
    b8 as $a,
    r as o,
    p as Ga,
    a0 as Ya,
    e as k,
    w as Ha,
    o as L,
    c as S,
    k as m,
    l as A,
    t as a,
    B as p,
    a as n,
    v,
    F as Ca,
    y as Na,
    A as w,
    x as Ka,
    G as q,
    m as R,
    n as Wa,
    J as Xa,
    _ as Za,
    R as at,
    S as tt,
    __tla as et
} from "./index-6c08ea4c.js";

import {
    E as rt,
    __tla as st
} from "./el-drawer-fca4d971.js";

import {
    _ as lt,
    __tla as it
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import {
    D as ot,
    __tla as nt
} from "./dict-c5825220.js";

import {
    Q as ut,
    __tla as pt
} from "./questionItem-783db515.js";

import ct, {
    __tla as _t
} from "./largeQuestionPreview-1a10d1df.js";

import {
    s as dt,
    m as ft,
    a as vt,
    __tla as mt
} from "./assignmentAndAssessment-58199f67.js";

import {
    f as yt,
    __tla as ht
} from "./formatTime-de6f1520.js";

import {
    _ as Qt
} from "./_plugin-vue_export-helper-1b428a4d.js";

import "./color-a8b4eb58.js";

import {
    __tla as bt
} from "./type1-dcece559.js";

import {
    __tla as gt
} from "./type2-a6a0182d.js";

import {
    __tla as It
} from "./type3-5f949f9d.js";

import {
    __tla as xt
} from "./type5-0bd437b5.js";

import {
    __tla as Pt
} from "./editEditor-a03e6696.js";

import {
    __tla as kt
} from "./Editor-ef737d2a.js";

import {
    __tla as Lt
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as St
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import {
    __tla as At
} from "./file-e038b35d.js";

import "./editEditor.vue_vue_type_style_index_0_scoped_bf777343_lang-f0d79ba2.js";

import {
    __tla as Ct
} from "./type4-7ca4a753.js";

import {
    __tla as Nt
} from "./type6-9e74ce48.js";

import {
    __tla as wt
} from "./type7-37922e10.js";

import {
    __tla as qt
} from "./video-1d0dc730.js";

import {
    __tla as Ft
} from "./type20-9799eb41.js";

import {
    __tla as Et
} from "./myQuestionBank-a9dcc9db.js";

import {
    __tla as Mt
} from "./type30-2996afb1.js";

import {
    __tla as Tt
} from "./sqlDetail-47f64ae5.js";

let wa, Ut = Promise.all([ (() => {
    try {
        return et;
    } catch {}
})(), (() => {
    try {
        return st;
    } catch {}
})(), (() => {
    try {
        return it;
    } catch {}
})(), (() => {
    try {
        return nt;
    } catch {}
})(), (() => {
    try {
        return pt;
    } catch {}
})(), (() => {
    try {
        return _t;
    } catch {}
})(), (() => {
    try {
        return mt;
    } catch {}
})(), (() => {
    try {
        return ht;
    } catch {}
})(), (() => {
    try {
        return bt;
    } catch {}
})(), (() => {
    try {
        return gt;
    } catch {}
})(), (() => {
    try {
        return It;
    } catch {}
})(), (() => {
    try {
        return xt;
    } catch {}
})(), (() => {
    try {
        return Pt;
    } catch {}
})(), (() => {
    try {
        return kt;
    } catch {}
})(), (() => {
    try {
        return Lt;
    } catch {}
})(), (() => {
    try {
        return St;
    } catch {}
})(), (() => {
    try {
        return At;
    } catch {}
})(), (() => {
    try {
        return Ct;
    } catch {}
})(), (() => {
    try {
        return Nt;
    } catch {}
})(), (() => {
    try {
        return wt;
    } catch {}
})(), (() => {
    try {
        return qt;
    } catch {}
})(), (() => {
    try {
        return Ft;
    } catch {}
})(), (() => {
    try {
        return Et;
    } catch {}
})(), (() => {
    try {
        return Mt;
    } catch {}
})(), (() => {
    try {
        return Tt;
    } catch {}
})() ]).then(async () => {
    let y, z, V, j, B, D, O, J, $, G, Y, H, K, W, X, Z, aa, ta, ea, ra, sa, la, ia, oa, na, ua, pa, ca, _a, da, fa, va, ma, ya, ha, Qa, ba, ga, Ia, xa;
    y = I => (at("data-v-9bbfbaae"), I = I(), tt(), I), z = {
        class: "respondPaperContainer"
    }, V = {
        class: "exam-body"
    }, j = {
        class: "paperInfoTitle"
    }, B = {
        class: "exam-title"
    }, D = {
        class: "exam-info"
    }, O = {
        class: "infoCell"
    }, J = {
        class: "info-item"
    }, $ = y(() => a("div", {
        class: "info-label"
    }, "题量：", -1)), G = {
        class: "info-value"
    }, Y = {
        class: "info-item"
    }, H = y(() => a("div", {
        class: "info-label"
    }, "满分：", -1)), K = {
        class: "info-value"
    }, W = {
        class: "info-item"
    }, X = y(() => a("div", {
        class: "info-label"
    }, "截止时间：", -1)), Z = {
        class: "info-value"
    }, aa = {
        class: "infoCell multilayer"
    }, ta = {
        class: "infoCellLeft"
    }, ea = {
        class: "info-item"
    }, ra = y(() => a("div", {
        class: "info-label"
    }, "考生姓名：", -1)), sa = {
        class: "info-value"
    }, la = {
        class: "info-item"
    }, ia = y(() => a("div", {
        class: "info-label"
    }, "学号：", -1)), oa = {
        class: "info-value"
    }, na = {
        class: "infoCellRight"
    }, ua = y(() => a("div", {
        class: "dividingLine"
    }, null, -1)), pa = {
        class: "library-body"
    }, ca = {
        class: "library-info"
    }, _a = {
        class: "left-box"
    }, da = {
        class: "left-shadow"
    }, fa = {
        class: "show-title px-5"
    }, va = {
        class: "title-desc"
    }, ma = [ "id" ], ya = {
        class: "item-num"
    }, ha = {
        class: "num-box"
    }, Qa = {
        class: "question-type"
    }, ba = [ "onClick" ], ga = {
        class: "left-bottom"
    }, Ia = {
        class: "right-box"
    }, xa = y(() => a("div", {
        class: "info-title"
    }, [ a("div", null, "答题卡"), a("div", {
        class: "info-title-message"
    }, [ a("div", {
        class: "info-title-point orange"
    }), v(" 标记 "), a("div", {
        class: "info-title-point none"
    }), v(" 未答 "), a("div", {
        class: "info-title-point blue"
    }), v(" 已答 ") ]) ], -1)), wa = Qt({
        __name: "answerPaper",
        props: {
            form: {
                type: Object,
                default: () => ({})
            }
        },
        emits: [ "update:modelValue", "refresh" ],
        setup(I, {
            expose: qa,
            emit: Fa
        }) {
            Ja(), JSON.parse('{"source":"NEUNSE","bucketName":"neunsebucket","indexName":"neunseindex"}'), 
            $a();
            const C = o(null), F = o(null), Ea = Ga(), Pa = Fa, Q = o(!1);
            o(null), o(!1), o("");
            const E = I, {
                form: d
            } = Ya(E), l = k({
                get: () => E.form.paper || {},
                set: s => {
                    Pa("update:form", {
                        ...E.form.paper,
                        paperParts: s.paperParts || [ {
                            partName: "第一大题",
                            partDesc: "",
                            paperQuestionList: []
                        } ]
                    });
                }
            });
            o({}), o(!0), o({});
            const Ma = o(0), M = k(() => Math.floor(Ma.value / 1e3));
            k(() => String(Math.floor(M.value / 3600)).padStart(2, "0")), k(() => String(Math.floor(M.value % 3600 / 60)).padStart(2, "0")), 
            k(() => String(M.value % 60).padStart(2, "0"));
            const c = o(""), b = o(""), T = o({
                index: 0,
                questionType: ""
            });
            Ha(() => b.value, () => {
                b.value && ka(b.value);
            });
            const Ta = o({}), Ua = async () => {
                await vt(d.value.historyId), Ea.success("提交成功"), Q.value = !1;
            }, Ra = () => {
                Pa("refresh");
            };
            function ka(s) {
                c.value = s, U();
            }
            function U() {
                document.querySelectorAll("video, audio").forEach(function(s) {
                    s.classList.contains("camera") || s.pause();
                });
            }
            function za(s) {
                let t = 0;
                return (s.paperQuestionList || []).forEach(i => {
                    t += i.paperQuestion.questionScore || 0;
                }), Math.round(10 * t) / 10;
            }
            const N = o(null);
            function Va(s) {
                N.value && N.value !== s && N.value.pause(), N.value = s;
            }
            function ja(s) {
                if (l.value && Array.isArray(l.value.paperParts)) {
                    const t = l.value.paperParts.flatMap(x => x.paperQuestionList), i = t.findIndex(x => x.id === s);
                    return i !== -1 && i < t.length - 1;
                }
            }
            function Ba(s) {
                const t = l.value.paperParts.flatMap(i => i.paperQuestionList).findIndex(i => i.id === s);
                return t !== -1 && t > 0;
            }
            return qa({
                handleStartTheExam: () => {
                    Q.value = !0, Wa(() => {
                        var s, t, i;
                        c.value = (i = (t = (s = l.value) == null ? void 0 : s.paperParts[0]) == null ? void 0 : t.paperQuestionList[0]) == null ? void 0 : i.id, 
                        F.value && F.value.scrollIntoView(), C.value.initAction();
                    });
                }
            }), (s, t) => {
                const i = Xa, x = lt, Da = Za, Oa = rt;
                return L(), S("div", z, [ m(Oa, {
                    modelValue: n(Q),
                    "onUpdate:modelValue": t[6] || (t[6] = r => R(Q) ? Q.value = r : null),
                    "with-header": !1,
                    size: "100%",
                    direction: "rtl",
                    onClose: Ra
                }, {
                    default: A(() => [ a("div", V, [ a("div", j, [ a("div", B, p(n(d).testName), 1), a("div", D, [ a("div", O, [ a("div", J, [ $, a("div", G, p(n(d).paper.paperQuestionQty) + "题", 1) ]), a("div", Y, [ H, a("div", K, p(n(d).paper.paperScore) + "分", 1) ]), a("div", W, [ X, a("div", Z, p(n(yt)(n(d).endTime)), 1) ]) ]), a("div", aa, [ a("div", ta, [ a("div", ea, [ ra, a("div", sa, p(n(d).studentName), 1) ]), a("div", la, [ ia, a("div", oa, p(n(d).studentNumber), 1) ]) ]), a("div", na, [ m(i, {
                        size: "large",
                        onClick: t[0] || (t[0] = r => Q.value = !1)
                    }, {
                        default: A(() => [ v("返回") ]),
                        _: 1
                    }), m(i, {
                        type: "primary",
                        size: "large",
                        onClick: Ua
                    }, {
                        default: A(() => [ v("提交") ]),
                        _: 1
                    }) ]) ]) ]) ]), ua, a("div", pa, [ a("div", ca, [ a("div", _a, [ a("div", da, [ (L(!0), 
                    S(Ca, null, Na(l.value.paperParts || [], (r, h) => {
                        return w((L(), S("div", {
                            class: "info-cont",
                            key: r == null ? void 0 : r.index
                        }, [ a("div", fa, [ v(p(r.partName) + " （共 " + p((r.paperQuestionList || []).length) + " 题，共 " + p(za(r)) + " 分 ） ", 1), a("div", va, p(r.partDesc), 1) ]), (L(!0), 
                        S(Ca, null, Na(r.paperQuestionList || [], (e, u) => {
                            var Sa;
                            return w((L(), S("div", {
                                class: "item-box mb-4 pt-9",
                                key: e.id,
                                id: `question-${e.id}`
                            }, [ a("div", ya, [ a("div", ha, p(u + 1) + ".", 1), a("div", Qa, [ m(x, {
                                type: n(ot).QUESTION_TYPE,
                                value: e.paperQuestion.questionType
                            }, null, 8, [ "type", "value" ]), v(" （ " + p(((Sa = e.paperQuestion) == null ? void 0 : Sa.questionScore) || 0) + " 分 ） ", 1) ]), a("div", {
                                style: {
                                    display: "flex",
                                    "align-items": "center",
                                    "justify-content": "end",
                                    "font-size": "14px",
                                    color: "#666666",
                                    cursor: "pointer"
                                },
                                onClick: g => function(f) {
                                    let P = {
                                        paperId: f.paperId,
                                        questionNo: f.paperQuestion.questionNo,
                                        markFlag: !f.paperQuestion.markFlag
                                    };
                                    ft(P).then(Aa => {
                                        f.paperQuestion.markFlag = !f.paperQuestion.markFlag;
                                    });
                                }(e)
                            }, [ m(Da, {
                                icon: "svg-icon:star",
                                size: "20px",
                                class: "mr-2",
                                style: Ka({
                                    color: e.paperQuestion.markFlag ? "#FFB800" : "#fff"
                                })
                            }, null, 8, [ "style" ]), v(" " + p(e.paperQuestion.markFlag ? "取消标记" : "标记本题"), 1) ], 8, ba) ]), m(ut, {
                                form: l.value.paperParts[h].paperQuestionList[u].paperQuestion,
                                "onUpdate:form": g => l.value.paperParts[h].paperQuestionList[u].paperQuestion = g,
                                info: e,
                                ref_for: !0,
                                ref: g => ((f, P) => {
                                    f && (Ta.value[`questionRef-${P.id}`] = f);
                                })(g, e),
                                inLibrary: !0,
                                num: u + 1,
                                onAnswerChange: g => function(f, P) {
                                    let Aa = {
                                        candidateId: d.value.candidateId,
                                        testId: d.value.testId,
                                        historyId: d.value.historyId,
                                        answers: [ {
                                            paperId: P,
                                            ...f
                                        } ]
                                    };
                                    dt(Aa).then(() => {});
                                }(g, l.value.paperParts[h].paperQuestionList[u].paperId),
                                onStartPlay: Va
                            }, null, 8, [ "form", "onUpdate:form", "info", "num", "onAnswerChange" ]) ], 8, ma)), [ [ q, (La = e.id, 
                            La === c.value) ] ]);
                            var La;
                        }), 128)) ])), [ [ q, (_ = r, !!Array.isArray(_ == null ? void 0 : _.paperQuestionList) && _.paperQuestionList.some(e => e.hasOwnProperty("id") && e.id === c.value)) ] ]);
                        var _;
                    }), 128)), a("div", ga, [ w(m(i, {
                        onClick: t[1] || (t[1] = r => function(h) {
                            if (l.value && Array.isArray(l.value.paperParts)) {
                                const _ = l.value.paperParts.flatMap(u => u.paperQuestionList), e = _.findIndex(u => u.id === h);
                                e !== -1 && e > 0 && (c.value = _[e - 1].id, C.value.initAction(c.value));
                            }
                            U();
                        }(n(c)))
                    }, {
                        default: A(() => [ v("上一题") ]),
                        _: 1
                    }, 512), [ [ q, Ba(n(c)) ] ]), w(m(i, {
                        onClick: t[2] || (t[2] = r => function(h) {
                            if (l.value && Array.isArray(l.value.paperParts)) {
                                const _ = l.value.paperParts.flatMap(u => u.paperQuestionList), e = _.findIndex(u => u.id === h);
                                e !== -1 && e < _.length - 1 && (c.value = _[e + 1].id, 
                                C.value.initAction(c.value));
                            }
                            U();
                        }(n(c)))
                    }, {
                        default: A(() => [ v("下一题") ]),
                        _: 1
                    }, 512), [ [ q, ja(n(c)) ] ]) ]) ]) ]), a("div", Ia, [ xa, a("div", {
                        class: "info-cont",
                        ref_key: "rightBoxRef",
                        ref: F
                    }, [ m(ct, {
                        ref_key: "largeQuestionPreviewRef",
                        ref: C,
                        form: l.value,
                        "onUpdate:form": t[3] || (t[3] = r => l.value = r),
                        activeInfo: n(T),
                        "onUpdate:activeInfo": t[4] || (t[4] = r => R(T) ? T.value = r : null),
                        activeId: n(b),
                        "onUpdate:activeId": t[5] || (t[5] = r => R(b) ? b.value = r : null),
                        onChooseQuestionIdNow: ka,
                        isRandom: !0
                    }, null, 8, [ "form", "activeInfo", "activeId" ]) ], 512) ]) ]) ]) ]) ]),
                    _: 1
                }, 8, [ "modelValue" ]) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-9bbfbaae" ] ]);
});

export {
    Ut as __tla,
    wa as default
};