import {
    _ as Ge,
    __tla as He
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    u as We,
    T as Ye,
    r as o,
    e as M,
    f as Ze,
    j as Oe,
    o as n,
    c as g,
    t as i,
    a as s,
    k as r,
    A as h,
    C as _,
    l,
    v as c,
    D,
    m as N,
    B as T,
    F as xe,
    y as we,
    G as Qe,
    z as Xe,
    E as ea,
    bo as Ce,
    _ as aa,
    J as ta,
    ak as la,
    ad as ra,
    K as sa,
    ae as oa,
    a8 as na,
    bp as ca,
    bq as ua,
    aU as ia,
    R as ma,
    S as _a,
    __tla as da
} from "./index-6c08ea4c.js";

import {
    _ as pa,
    __tla as ha
} from "./index-1024512a.js";

import {
    _ as fa
} from "./appraise-c016687f.js";

import {
    _ as ya
} from "./manageIcon-aa116bb2.js";

import {
    _ as ga
} from "./deleteIcon-ec5a6b2b.js";

import {
    g as va
} from "./file.data-f713c362.js";

import ka, {
    __tla as ba
} from "./addResourceDialog-fa013ed3.js";

import xa, {
    __tla as wa
} from "./editorResourceNameDialog-7b1fcbbd.js";

import Ca, {
    __tla as Ia
} from "./resourceSetting-cb64e7a4.js";

import Ra, {
    __tla as Va
} from "./resourceStatistics-7a84ff26.js";

import {
    h as Ea,
    __tla as Da
} from "./file-e038b35d.js";

import {
    x as Ta,
    f as Aa,
    __tla as Sa
} from "./pkgManage-4e23f8a8.js";

import {
    _ as Na
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    a as Ua,
    b as za,
    E as Ba,
    __tla as La
} from "./index-5adb716b.js";

import {
    __tla as Pa
} from "./index.es-14d10e28.js";

import {
    __tla as ja
} from "./project-file-a2b4fd07.js";

import "./tree-05ea8e09.js";

import {
    __tla as Ma
} from "./DeptTag-1be092ce.js";

import {
    __tla as qa
} from "./index-ef4d146e.js";

import "./teachingResourceIcon7-1c1a8557.js";

import {
    __tla as Fa
} from "./index-c4ca0ced.js";

import {
    __tla as Ja
} from "./index-993301ca.js";

import {
    __tla as Ka
} from "./index-8b41572c.js";

import "./step1Banner-550d8194.js";

import "./file_HTML-65451e1b.js";

import "./file.data-794ea5d0.js";

import "./file_题-23882218.js";

import {
    __tla as $a
} from "./formatTime-de6f1520.js";

import {
    __tla as Ga
} from "./library-c2ecc5ca.js";

import {
    __tla as Ha
} from "./index-9567cbf6.js";

import "./step2Banner-4d214de6.js";

import "./download-20922b56.js";

import {
    __tla as Wa
} from "./statisticsEchart-c3bae619.js";

import "./index-eb0ca811.js";

import "./install-67fb146c.js";

import "./install-0c30d2d2.js";

import {
    __tla as Ya
} from "./statisticsList-f09f8ede.js";

let Ie, Za = Promise.all([ (() => {
    try {
        return He;
    } catch {}
})(), (() => {
    try {
        return da;
    } catch {}
})(), (() => {
    try {
        return ha;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return wa;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Da;
    } catch {}
})(), (() => {
    try {
        return Sa;
    } catch {}
})(), (() => {
    try {
        return La;
    } catch {}
})(), (() => {
    try {
        return Pa;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return Ma;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Ka;
    } catch {}
})(), (() => {
    try {
        return $a;
    } catch {}
})(), (() => {
    try {
        return Ga;
    } catch {}
})(), (() => {
    try {
        return Ha;
    } catch {}
})(), (() => {
    try {
        return Wa;
    } catch {}
})(), (() => {
    try {
        return Ya;
    } catch {}
})() ]).then(async () => {
    let p, q, F, J, K, $, G, H, W, Y, Z, O, Q, X, ee, ae, te, le, re, se, oe, ne;
    p = A => (ma("data-v-a71274f8"), A = A(), _a(), A), q = {
        style: {
            padding: "0 30px"
        },
        class: "height_box"
    }, F = {
        key: 0,
        class: "neu-no-data",
        style: {
            height: "500px"
        }
    }, J = p(() => i("p", {
        class: ""
    }, "暂无数据", -1)), K = {
        key: 1,
        class: "contentArea"
    }, $ = p(() => i("div", {
        style: {
            clear: "both"
        }
    }, null, -1)), G = {
        style: {
            color: "#333",
            "font-size": "12px",
            "line-height": "30px"
        }
    }, H = p(() => i("span", {
        style: {
            display: "inline-block"
        }
    }, "仅查看计入考核资料", -1)), W = [ "src" ], Y = {
        class: "file-name"
    }, Z = [ "onClick" ], O = p(() => i("img", {
        src: fa,
        alt: "",
        style: {
            cursor: "pointer"
        }
    }, null, -1)), Q = {
        key: 1,
        class: "file-tag",
        style: {
            "margin-left": "7px"
        }
    }, X = [ p(() => i("span", null, "NEU", -1)) ], ee = {
        class: "bottomClass"
    }, ae = p(() => i("img", {
        src: ya,
        alt: ""
    }, null, -1)), te = p(() => i("img", {
        src: ga,
        alt: ""
    }, null, -1)), le = {
        style: {
            "text-align": "center",
            "line-height": "26px"
        }
    }, re = p(() => i("br", null, null, -1)), se = p(() => i("br", null, null, -1)), 
    oe = {
        style: {
            color: "#245FE6"
        }
    }, ne = {
        style: {
            "text-align": "center",
            margin: "20px"
        }
    }, Ie = Na({
        __name: "xxzl",
        setup(A) {
            We();
            const v = Ye(), Re = o(), ce = o(), ue = o(), ie = o(), U = o(), Ve = o(), C = o();
            o([ "未发布", "未开始", "进行中", "已截止" ]);
            const f = o([]), me = o(!1), x = M(() => v.name.includes("Manage")), Ee = o([ {
                label: "视频",
                value: 1,
                num: 0
            }, {
                label: "音频",
                value: 2,
                num: 0
            }, {
                label: "文档",
                value: 3,
                num: 0
            }, {
                label: "图片",
                value: 4,
                num: 0
            }, {
                label: "压缩包",
                value: 5,
                num: 0
            }, {
                label: "链接",
                value: 6,
                num: 0
            }, {
                label: "MD",
                value: 7,
                num: 0
            } ]), De = M(() => [ {
                label: "资料类型",
                key: "resType",
                type: "list",
                options: Ee.value
            } ]);
            M(() => {
                var e = k.value.length, a = [ 0, 0, 0, 0 ];
                return k.value.forEach(m => {
                    a[m.state]++;
                }), a[0] == e ? 1 : a[0] ? 2 : 3;
            });
            const I = o(!1);
            o(0);
            const z = o(""), S = o(!1), _e = o(!1), k = o([]), w = o({}), de = () => {
                ce.value.openStep1(1);
            }, Te = e => {
                I.value = e, b(w.value);
            };
            o([]);
            const Ae = e => {
                w.value = e, b(e);
            }, b = (e, a) => {
                me.value = a, f.value.length && ye(), Ta({
                    type: 1,
                    query: e ? e.resName : null,
                    resType: e ? e.resType : null,
                    resPkgId: v.params.id,
                    isAssess: I.value ? 1 : ""
                }).then(m => {
                    f.value = m || [], f.value.forEach(u => {
                        u.resName = u.name, u.eid = u.dataId;
                    });
                });
            }, pe = e => {
                e.resType == 6 ? window.open(e.resLink, "_blank") : ue.value.operation(e);
            }, B = e => {
                z.value = "set", U.value.open(e);
            }, Se = e => {
                f.value.forEach(a => {
                    a.id == e.oldData.id && (a.name = e.name + (e.oldData.resExt ? e.oldData.resExt : ""));
                });
            }, he = e => {
                ea.confirm(`\u786E\u5B9A\u8981\u5220\u9664${e.length == 1 ? "该" : "这些"}\u8D44\u6E90\u5417\uFF1F`, "提示", {
                    confirmButtonText: "确认",
                    cancelButtonText: "取消"
                }).then(() => {
                    var a = [];
                    e.forEach(m => {
                        a.push(m.id);
                    }), Aa({
                        resPkgId: v.params.id,
                        idArray: a
                    }).then(m => {
                        b(w.value), Ce({
                            type: "success",
                            message: "删除成功"
                        });
                    });
                }).catch(() => {});
            }, R = o(!1), V = o(0), L = o([]), fe = o([]), Ne = () => {
                var e = [];
                fe.value.forEach(a => {
                    e.push(a.id);
                }), revokeRes({
                    teachCourseId: v.params.teachCourseId,
                    currentTeachClassId: v.params.classId,
                    resIds: e,
                    range: V.value
                }).then(a => {
                    P(), b(w.value), Ce({
                        type: "success",
                        message: "撤销成功"
                    });
                });
            }, P = () => {
                V.value = 0, R.value = !1;
            }, Ue = (e, a) => {
                switch (a) {
                  case "editor":
                    ie.value.open(e);
                    break;

                  case "download":
                    Ea(e.dataId, e.name);
                    break;

                  case "publish":
                    ((m, u) => {
                        z.value = "publish", U.value.open(m, u);
                    })([ e ], 1);
                    break;

                  case "delete":
                    he([ e ]);
                    break;

                  case "set":
                    B([ e ]);
                    break;

                  case "revoke":
                    (m => {
                        fe.value = m, R.value = !0, getResCtl({
                            currenClassId: v.params.classId,
                            teachCourseId: v.params.teachCourseId,
                            resId: m[0].id
                        }).then(u => {
                            L.value = u.teachClassList || [];
                        });
                    })([ e ]);
                }
            }, ye = () => {
                C.value && C.value.clearSelection();
            }, ze = e => {
                C.value && C.value.toggleAllSelection();
            }, Be = e => {
                k.value = e;
                let a = e.length;
                S.value = a === f.value.length, _e.value = a > 0 && a < f.value.length;
            };
            return Ze(() => {
                b({}, !0);
            }), (e, a) => {
                const m = aa, u = ta, Le = pa, Pe = la, E = ra, j = sa, ge = Ua, je = za, Me = Ba, qe = oa, Fe = na, ve = ca, Je = ua, Ke = ia, $e = Ge, y = Oe("hasPermi-none");
                return n(), g("div", {
                    id: "jxwd",
                    style: {
                        padding: "20px 0 0"
                    },
                    class: Xe("isManage" + s(x))
                }, [ i("div", q, [ !s(f).length && s(me) ? (n(), g("div", F, [ r(m, {
                    icon: "svg-icon:bg-no-data",
                    size: 200,
                    class: "",
                    style: {
                        height: "160px"
                    }
                }), J, s(x) ? h((n(), _(u, {
                    key: 0,
                    type: "primary",
                    style: {
                        "margin-top": "10px"
                    },
                    onClick: de
                }, {
                    default: l(() => [ r(m, {
                        icon: "ep:plus",
                        class: "mr-4px"
                    }), c("添加") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:create" ] ] ]) : D("", !0) ])) : (n(), 
                g("div", K, [ r(Le, {
                    borderBox: !0,
                    ref_key: "comSearchRef",
                    ref: Re,
                    searchList: s(De),
                    keywordsInfo: {
                        label: "资料名称/标签",
                        key: "resName"
                    },
                    onHandleSearch: Ae,
                    class: "left"
                }, null, 8, [ "searchList" ]), s(x) ? h((n(), _(u, {
                    key: 0,
                    type: "primary",
                    class: "btn-group",
                    onClick: de
                }, {
                    default: l(() => [ r(m, {
                        icon: "ep:plus",
                        class: "mr-4px"
                    }), c(" 添加 ") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:create" ] ] ]) : D("", !0), $, i("div", G, [ H, c(), r(Pe, {
                    modelValue: s(I),
                    "onUpdate:modelValue": a[0] || (a[0] = t => N(I) ? I.value = t : null),
                    class: "ml-2",
                    style: {
                        "--el-switch-on-color": "#63D90A"
                    },
                    onChange: Te
                }, null, 8, [ "modelValue" ]) ]), r(qe, {
                    ref_key: "tableListRef",
                    ref: C,
                    data: s(f),
                    "header-row-class-name": "system-header",
                    onSelectionChange: Be,
                    "row-key": "id",
                    "show-header": !1,
                    height: s(x) ? "calc( 100% - 40px)" : "calc( 100% - 20px)",
                    "default-expand-all": !0
                }, {
                    default: l(() => [ s(x) ? (n(), _(E, {
                        key: 0,
                        type: "selection",
                        width: "30"
                    })) : D("", !0), r(E, {
                        width: "30"
                    }, {
                        default: l(t => [ i("img", {
                            src: s(va)(t.row.resType),
                            alt: "",
                            style: {
                                "margin-right": "10px",
                                "margin-top": "5px"
                            }
                        }, null, 8, W) ]),
                        _: 1
                    }), r(E, {
                        label: "文件名"
                    }, {
                        default: l(t => [ i("div", Y, [ r(j, {
                            effect: "dark",
                            content: t.row.name,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: l(() => [ i("span", {
                                class: "file-name__span",
                                onClick: d => pe(t.row)
                            }, T(t.row.name), 9, Z) ]),
                            _: 2
                        }, 1032, [ "content" ]), (n(!0), g(xe, null, we(t.row.tags, d => (n(), 
                        g("div", {
                            class: "resourceLabel",
                            key: d.id
                        }, T(d.tagName), 1))), 128)), t.row.isAssess ? (n(), _(j, {
                            key: 0,
                            effect: "dark",
                            content: "计入考核点",
                            placement: "top",
                            enterable: !1
                        }, {
                            default: l(() => [ O ]),
                            _: 1
                        })) : D("", !0), t.row.resIsNeu ? (n(), g("div", Q, X)) : D("", !0) ]) ]),
                        _: 1
                    }), s(x) ? (n(), _(E, {
                        key: 1,
                        width: "200"
                    }, {
                        default: l(t => [ h((n(), _(u, {
                            type: "primary",
                            text: "",
                            onClick: d => B([ t.row ])
                        }, {
                            default: l(() => [ c("资源设置") ]),
                            _: 2
                        }, 1032, [ "onClick" ])), [ [ y, [ "teachmanager:teach-course-res-class-ctl:update" ] ] ]), r(Me, {
                            style: {
                                "font-size": "12px"
                            },
                            onCommand: d => Ue(t.row, d),
                            onVisibleChange: d => {
                                return ke = t.row, be = d, void (ke.moreIcon = be);
                                var ke, be;
                            }
                        }, {
                            dropdown: l(() => [ h((n(), _(je, null, {
                                default: l(() => [ h((n(), _(ge, {
                                    command: "editor"
                                }, {
                                    default: l(() => [ c("编辑") ]),
                                    _: 1
                                })), [ [ y, [ "teachmanager:teach-course-res:update" ] ] ]), h((n(), 
                                _(ge, {
                                    command: "delete",
                                    style: {
                                        color: "#E14635"
                                    }
                                }, {
                                    default: l(() => [ c("删除") ]),
                                    _: 1
                                })), [ [ y, [ "teachmanager:teach-course-res:delete" ] ] ]) ]),
                                _: 1
                            })), [ [ y, [ "teachmanager:teach-course-res:update", "teachmanager:teach-course-res:delete", "teachmanager:teach-course-res-class-ctl:update" ] ] ]) ]),
                            default: l(() => [ r(u, {
                                type: "primary",
                                text: "",
                                style: {
                                    "margin-left": "3px"
                                }
                            }, {
                                default: l(() => [ c("更多"), r(m, {
                                    icon: t.row.moreIcon ? "ep:arrow-up" : "ep:arrow-down"
                                }, null, 8, [ "icon" ]) ]),
                                _: 2
                            }, 1024) ]),
                            _: 2
                        }, 1032, [ "onCommand", "onVisibleChange" ]) ]),
                        _: 1
                    })) : (n(), _(E, {
                        key: 2,
                        width: "100"
                    }, {
                        default: l(t => [ r(u, {
                            type: "primary",
                            text: "",
                            onClick: d => pe(t.row)
                        }, {
                            default: l(() => [ c("预览") ]),
                            _: 2
                        }, 1032, [ "onClick" ]) ]),
                        _: 1
                    })) ]),
                    _: 1
                }, 8, [ "data", "height" ]), h(i("div", ee, [ r(Fe, {
                    style: {
                        "margin-left": "40px"
                    },
                    indeterminate: s(_e),
                    modelValue: s(S),
                    "onUpdate:modelValue": a[1] || (a[1] = t => N(S) ? S.value = t : null),
                    onChange: ze
                }, {
                    default: l(() => [ c("全选，当前已选中" + T(s(k).length) + "个文件", 1) ]),
                    _: 1
                }, 8, [ "indeterminate", "modelValue" ]), i("div", null, [ h((n(), 
                _(u, {
                    type: "primary",
                    onClick: a[2] || (a[2] = t => B(s(k)))
                }, {
                    default: l(() => [ ae, c("资源设置") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:update" ] ] ]), h((n(), 
                _(u, {
                    type: "danger",
                    onClick: a[3] || (a[3] = t => he(s(k)))
                }, {
                    default: l(() => [ te, c("删除") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:delete" ] ] ]) ]), r(u, {
                    style: {
                        "margin-right": "40px"
                    },
                    onClick: ye
                }, {
                    default: l(() => [ c("取消") ]),
                    _: 1
                }) ], 512), [ [ Qe, !!s(k).length ] ]) ])) ]), r(Ke, {
                    modelValue: s(R),
                    "onUpdate:modelValue": a[5] || (a[5] = t => N(R) ? R.value = t : null),
                    title: "撤销发布",
                    width: "500px",
                    "close-on-click-modal": !1,
                    "close-on-press-escape": !1,
                    draggable: !1,
                    onClose: P
                }, {
                    default: l(() => [ i("div", le, [ c(" 学习资料撤销发布后学生端将不可见，"), re, c(" 且所有学习记录均将被清空（无法撤销恢复），确定撤销发布？"), se, c(" 撤销发布范围： "), r(Je, {
                        modelValue: s(V),
                        "onUpdate:modelValue": a[4] || (a[4] = t => N(V) ? V.value = t : null),
                        style: {
                            position: "relative",
                            top: "2px"
                        }
                    }, {
                        default: l(() => [ r(ve, {
                            value: 0
                        }, {
                            default: l(() => [ c("当前班级") ]),
                            _: 1
                        }), r(ve, {
                            value: 1
                        }, {
                            default: l(() => [ c("全部班级（ "), r(j, {
                                class: "box-item",
                                effect: "light",
                                placement: "right"
                            }, {
                                content: l(() => [ (n(!0), g(xe, null, we(s(L), (t, d) => (n(), 
                                g("div", {
                                    key: d
                                }, T(t.name), 1))), 128)) ]),
                                default: l(() => [ i("span", oe, T(s(L).length), 1) ]),
                                _: 1
                            }), c(" ）") ]),
                            _: 1
                        }) ]),
                        _: 1
                    }, 8, [ "modelValue" ]) ]), i("div", ne, [ r(u, {
                        style: {
                            "margin-right": "20px"
                        },
                        onClick: P
                    }, {
                        default: l(() => [ c("取消") ]),
                        _: 1
                    }), r(u, {
                        type: "primary",
                        onClick: Ne
                    }, {
                        default: l(() => [ c("确定") ]),
                        _: 1
                    }) ]) ]),
                    _: 1
                }, 8, [ "modelValue" ]), r(ka, {
                    ref_key: "addResourceDialogRef",
                    ref: ce,
                    onTableRefresh: a[6] || (a[6] = t => b(s(w)))
                }, null, 512), r($e, {
                    ref_key: "ResourcePreviewRef",
                    ref: ue
                }, null, 512), r(xa, {
                    ref_key: "editorResourceNameDialogRef",
                    ref: ie,
                    onEditorNameDone: Se
                }, null, 512), r(Ca, {
                    ref_key: "resourceSettingDialogRef",
                    ref: U,
                    onDone: a[7] || (a[7] = t => b(s(w))),
                    scene: s(z),
                    isfromTeaching: 1
                }, null, 8, [ "scene" ]), r(Ra, {
                    ref_key: "resourceStatisticsRef",
                    ref: Ve
                }, null, 512) ], 2);
            };
        }
    }, [ [ "__scopeId", "data-v-a71274f8" ] ]);
});

export {
    Za as __tla,
    Ie as default
};