import {
    p as re,
    r as c,
    e as S,
    A as ie,
    a as t,
    o,
    C as f,
    l as n,
    k as r,
    c as g,
    F as h,
    y as b,
    D as y,
    m as k,
    v as oe,
    ah as ne,
    t as p,
    B as M,
    n as _e,
    P as me,
    O as fe,
    ab as pe,
    ac as ue,
    bp as ce,
    bq as de,
    cK as ge,
    _ as ye,
    J as ve,
    Q as he,
    a9 as be,
    __tla as ke
} from "./index-6c08ea4c.js";

import {
    _ as Te,
    __tla as xe
} from "./Editor-ef737d2a.js";

import {
    _ as Pe,
    a as De,
    b as Oe,
    c as Le,
    d as Ve,
    e as Ie,
    f as qe,
    g as je,
    h as we,
    i as Ae,
    j as Ce,
    k as Ee,
    l as Re,
    m as Ue,
    n as Se,
    o as Me,
    p as ze,
    q as Ne,
    r as Xe,
    s as Fe,
    t as Ge,
    u as He,
    v as Je,
    w as Be,
    x as Ke,
    y as Ye,
    z as Qe
} from "./file_题-23882218.js";

import {
    b as O,
    D as L,
    __tla as Ze
} from "./dict-c5825220.js";

import {
    l as $e,
    __tla as We
} from "./file-e038b35d.js";

import ea, {
    __tla as aa
} from "./addResource-cf3ece02.js";

import {
    f as la,
    __tla as ta
} from "./project-51c056b9.js";

import sa, {
    __tla as ra
} from "./ChooseKt-d4c6a4b8.js";

import {
    T as ia,
    __tla as oa
} from "./TaskProcess-16c765c3.js";

import na, {
    __tla as _a
} from "./TaskDemand-6539e5b4.js";

import ma, {
    __tla as fa
} from "./TaskDevelop-553c5c72.js";

import pa, {
    __tla as ua
} from "./TaskTesting-c5f296e2.js";

import {
    _ as ca
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as da
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as ga
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import {
    __tla as ya
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    __tla as va
} from "./index.es-14d10e28.js";

import {
    __tla as ha
} from "./project-file-a2b4fd07.js";

import {
    __tla as ba
} from "./index-c4ca0ced.js";

import {
    __tla as ka
} from "./index-993301ca.js";

import {
    __tla as Ta
} from "./index-1024512a.js";

import "./tree-05ea8e09.js";

import {
    __tla as xa
} from "./DeptTag-1be092ce.js";

import {
    __tla as Pa
} from "./index-ef4d146e.js";

import {
    __tla as Da
} from "./index-a34a73bc.js";

import "./file_HTML-65451e1b.js";

import {
    __tla as Oa
} from "./library-c2ecc5ca.js";

import "./file.data-794ea5d0.js";

import {
    __tla as La
} from "./formatTime-de6f1520.js";

import {
    __tla as Va
} from "./codeRepository-027fddde.js";

import {
    __tla as Ia
} from "./index-3a269d1c.js";

import {
    __tla as qa
} from "./UploadMdBtns-d6f91a58.js";

import {
    __tla as ja
} from "./index-5adb716b.js";

import {
    __tla as wa
} from "./ModulesChoose-34e6a0e7.js";

let z, Aa = Promise.all([ (() => {
    try {
        return ke;
    } catch {}
})(), (() => {
    try {
        return xe;
    } catch {}
})(), (() => {
    try {
        return Ze;
    } catch {}
})(), (() => {
    try {
        return We;
    } catch {}
})(), (() => {
    try {
        return aa;
    } catch {}
})(), (() => {
    try {
        return ta;
    } catch {}
})(), (() => {
    try {
        return ra;
    } catch {}
})(), (() => {
    try {
        return oa;
    } catch {}
})(), (() => {
    try {
        return _a;
    } catch {}
})(), (() => {
    try {
        return fa;
    } catch {}
})(), (() => {
    try {
        return ua;
    } catch {}
})(), (() => {
    try {
        return da;
    } catch {}
})(), (() => {
    try {
        return ga;
    } catch {}
})(), (() => {
    try {
        return ya;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return ha;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return ka;
    } catch {}
})(), (() => {
    try {
        return Ta;
    } catch {}
})(), (() => {
    try {
        return xa;
    } catch {}
})(), (() => {
    try {
        return Pa;
    } catch {}
})(), (() => {
    try {
        return Da;
    } catch {}
})(), (() => {
    try {
        return Oa;
    } catch {}
})(), (() => {
    try {
        return La;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return wa;
    } catch {}
})() ]).then(async () => {
    let V, I, q, j, w, A, C, E;
    V = {
        class: "flex items-center justify-left",
        style: {
            width: "55%"
        }
    }, I = {
        class: "file-list-item__icon"
    }, q = [ "src" ], j = {
        class: "file-list-item__name"
    }, w = [ "title" ], A = {
        class: "file-size"
    }, C = {
        class: "flex items-center"
    }, E = {
        style: {
            display: "flex",
            width: "20px"
        }
    }, z = ca({
        __name: "ComTask",
        props: {
            projectId: {
                type: String,
                default: ""
            },
            environment: {
                type: Number,
                default: 0
            }
        },
        setup(N, {
            expose: X
        }) {
            const m = N;
            re();
            const T = c(), F = S(() => {
                let s = O(L.EXP_TASK_TYPE);
                return m.environment !== 15 ? s.filter(l => [ 1, 2 ].indexOf(l.value) >= 0) : s.filter(l => [ 3, 4, 5, 6 ].indexOf(l.value) >= 0);
            }), x = c(!1), G = c(""), e = c({
                id: "",
                name: "",
                type: null,
                description: "",
                skillPointList: [],
                isAchievement: 0,
                sort: null,
                fileList: []
            }), H = S(() => ({
                name: [ {
                    required: !0,
                    trigger: "blur",
                    message: "请输入任务名称"
                }, {
                    min: 1,
                    max: 50,
                    message: "长度必须介于 1 和 50 之间",
                    trigger: "blur"
                } ],
                precondition: [ {
                    required: !1,
                    trigger: "blur",
                    message: "请输入前置条件"
                }, {
                    min: 0,
                    max: 100,
                    message: "长度必须介于 0 和 100 之间",
                    trigger: "blur"
                } ],
                type: [ {
                    required: !0,
                    message: "请选择任务类型",
                    trigger: [ "blur", "change" ]
                } ],
                developType: [ {
                    required: !1,
                    message: "请选择开发任务类型",
                    trigger: [ "blur", "change" ]
                } ],
                description: [ {
                    required: m.environment !== 15,
                    trigger: [ "blur", "change" ],
                    message: "请输入任务描述"
                } ],
                sort: [ {
                    required: !0,
                    message: "请输入任务顺序",
                    trigger: "blur"
                } ],
                isAchievement: [ {
                    required: !0,
                    message: "请选择是否提交成果物",
                    trigger: [ "blur", "change" ]
                } ],
                priority: [ {
                    required: m.environment !== 15,
                    message: "请选择优先级",
                    trigger: [ "blur", "change" ]
                } ],
                taskModuleId: [ {
                    required: !1,
                    message: "请选择模块",
                    trigger: [ "blur", "change" ]
                } ],
                importance: [ {
                    required: m.environment !== 15,
                    message: "请选择重要程度",
                    trigger: [ "blur", "change" ]
                } ],
                workHours: [ {
                    required: m.environment !== 15,
                    message: "请输入预计工时",
                    trigger: "blur"
                } ]
            })), P = c(), d = c(), J = s => {
                [ 3, 4, 5, 6 ].indexOf(s) >= 0 && (e.value.workHours = e.value.workHours || 2), 
                s === 2 && (e.value.isAchievement = 1), s === 6 && (e.value.testStepList = e.value.id ? e.value.testStepList : [ {
                    description: "",
                    result: ""
                } ]);
            }, B = () => {
                var s;
                (s = T.value) == null || s.openDialog({
                    title: "添加任务资料"
                });
            }, K = s => {
                let l = s.selectList || [], u = e.value.fileList || [], _ = u.map(i => i.fileEid || i.link), v = l.filter(i => _.indexOf(i.eid || i.resLink) < 0).map(i => ({
                    fileEid: i.eid || "",
                    fileName: i.resName,
                    fileType: i.resType + "",
                    fileSize: i.resSize,
                    link: i.resLink || ""
                }));
                e.value.fileList = u.concat(v), T.value.closeDialog();
            }, Y = s => {
                let l = "";
                return l = s.fileType !== "6" && s.fileName.lastIndexOf(".") > -1 ? s.fileName.slice(s.fileName.lastIndexOf(".") + 1).toUpperCase() : "PROJECT", 
                new URL(Object.assign({
                    "../../../../../../assets/imgs/file/file_ACT.png": Pe,
                    "../../../../../../assets/imgs/file/file_BMP.png": De,
                    "../../../../../../assets/imgs/file/file_DOC.png": Oe,
                    "../../../../../../assets/imgs/file/file_DOCX.png": Le,
                    "../../../../../../assets/imgs/file/file_GDS.png": Ve,
                    "../../../../../../assets/imgs/file/file_GIF.png": Ie,
                    "../../../../../../assets/imgs/file/file_HTML.png": qe,
                    "../../../../../../assets/imgs/file/file_JPEG.png": je,
                    "../../../../../../assets/imgs/file/file_JPG.png": we,
                    "../../../../../../assets/imgs/file/file_MD.png": Ae,
                    "../../../../../../assets/imgs/file/file_MP3.png": Ce,
                    "../../../../../../assets/imgs/file/file_MP4.png": Ee,
                    "../../../../../../assets/imgs/file/file_OGG.png": Re,
                    "../../../../../../assets/imgs/file/file_OTHERS.png": Ue,
                    "../../../../../../assets/imgs/file/file_PDF.png": Se,
                    "../../../../../../assets/imgs/file/file_PNG.png": Me,
                    "../../../../../../assets/imgs/file/file_PPT.png": ze,
                    "../../../../../../assets/imgs/file/file_PPTX.png": Ne,
                    "../../../../../../assets/imgs/file/file_PROJECT.png": Xe,
                    "../../../../../../assets/imgs/file/file_RAR.png": Fe,
                    "../../../../../../assets/imgs/file/file_TXT.png": Ge,
                    "../../../../../../assets/imgs/file/file_XLS.png": He,
                    "../../../../../../assets/imgs/file/file_XLSX.png": Je,
                    "../../../../../../assets/imgs/file/file_ZIP.png": Be,
                    "../../../../../../assets/imgs/file/file_other.png": Ke,
                    "../../../../../../assets/imgs/file/file_卷.png": Ye,
                    "../../../../../../assets/imgs/file/file_题.png": Qe
                })[`../../../../../../assets/imgs/file/file_${l}.png`], self.location);
            }, R = () => {
                var s;
                e.value = {
                    id: "",
                    name: "",
                    type: null,
                    description: "",
                    skillPointList: [],
                    isAchievement: 0,
                    sort: null,
                    fileList: []
                }, (s = P.value) == null || s.resetFields();
            };
            return X({
                initForm: async (s, l) => {
                    if (G.value = s, R(), l) {
                        x.value = !0;
                        try {
                            e.value = await la(l), _e(async () => {
                                var u;
                                d.value && await ((u = d.value) == null ? void 0 : u.initForm(e.value));
                            });
                        } finally {
                            x.value = !1;
                        }
                    }
                },
                resetForm: R,
                validate: async () => {
                    var s, l;
                    return d.value && await ((s = d.value) == null ? void 0 : s.getMdIdObj()), 
                    await ((l = P.value) == null ? void 0 : l.validate());
                },
                formData: e
            }), (s, l) => {
                const u = me, _ = fe, v = pe, i = ue, Q = Te, Z = ce, $ = de, W = ge, U = ye, ee = ve, ae = he, le = be;
                return ie((o(), f(ae, {
                    ref_key: "formRef",
                    ref: P,
                    "label-position": "top",
                    model: t(e),
                    size: "large",
                    rules: t(H),
                    "label-width": "80px"
                }, {
                    default: n(() => [ r(_, {
                        label: "任务名称",
                        prop: "name"
                    }, {
                        default: n(() => [ r(u, {
                            modelValue: t(e).name,
                            "onUpdate:modelValue": l[0] || (l[0] = a => t(e).name = a),
                            placeholder: "请输入任务名称"
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), r(_, {
                        label: "任务类型",
                        prop: "type"
                    }, {
                        default: n(() => [ r(i, {
                            modelValue: t(e).type,
                            "onUpdate:modelValue": l[1] || (l[1] = a => t(e).type = a),
                            clearable: "",
                            placeholder: "请选择任务类型",
                            onChange: J
                        }, {
                            default: n(() => [ (o(!0), g(h, null, b(t(F), a => (o(), 
                            f(v, {
                                key: a.value,
                                label: a.label,
                                value: a.value
                            }, null, 8, [ "label", "value" ]))), 128)) ]),
                            _: 1
                        }, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), t(e).type === 5 ? (o(), f(_, {
                        key: 0,
                        label: "开发任务类型",
                        prop: "developType"
                    }, {
                        default: n(() => [ r(i, {
                            modelValue: t(e).developType,
                            "onUpdate:modelValue": l[2] || (l[2] = a => t(e).developType = a),
                            clearable: "",
                            placeholder: "请选择开发任务类型"
                        }, {
                            default: n(() => [ (o(!0), g(h, null, b(t(O)(t(L).EXP_TASK_DEVELOP_TYPE), a => (o(), 
                            f(v, {
                                key: a.value,
                                label: a.label,
                                value: a.value
                            }, null, 8, [ "label", "value" ]))), 128)) ]),
                            _: 1
                        }, 8, [ "modelValue" ]) ]),
                        _: 1
                    })) : y("", !0), r(_, {
                        label: "任务描述",
                        prop: "description"
                    }, {
                        default: n(() => [ r(Q, {
                            modelValue: t(e).description,
                            "onUpdate:modelValue": l[3] || (l[3] = a => t(e).description = a),
                            height: "100px"
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), t(e).type === 1 ? (o(), f(ia, {
                        key: 1,
                        ref_key: "TaskProcessRef",
                        ref: d,
                        formData: t(e),
                        "onUpdate:formData": l[4] || (l[4] = a => k(e) ? e.value = a : null),
                        "is-required": m.environment !== 0
                    }, null, 8, [ "formData", "is-required" ])) : y("", !0), [ 3, 4 ].indexOf(t(e).type) >= 0 ? (o(), 
                    f(na, {
                        key: 2,
                        ref: "TaskDemandRef",
                        formData: t(e),
                        "onUpdate:formData": l[5] || (l[5] = a => k(e) ? e.value = a : null),
                        projectId: m.projectId
                    }, null, 8, [ "formData", "projectId" ])) : y("", !0), [ 5 ].indexOf(t(e).type) >= 0 ? (o(), 
                    f(ma, {
                        key: 3,
                        ref: "TaskDevelopRef",
                        formData: t(e),
                        "onUpdate:formData": l[6] || (l[6] = a => k(e) ? e.value = a : null),
                        projectId: m.projectId
                    }, null, 8, [ "formData", "projectId" ])) : y("", !0), [ 6 ].indexOf(t(e).type) >= 0 ? (o(), 
                    f(pa, {
                        key: 4,
                        ref: "TaskTestingRef",
                        formData: t(e),
                        "onUpdate:formData": l[7] || (l[7] = a => k(e) ? e.value = a : null),
                        projectId: m.projectId
                    }, null, 8, [ "formData", "projectId" ])) : y("", !0), r(_, {
                        label: "知识技能点",
                        prop: "skillPointList"
                    }, {
                        default: n(() => [ r(sa, {
                            modelValue: t(e).skillPointList,
                            "onUpdate:modelValue": l[8] || (l[8] = a => t(e).skillPointList = a)
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), r(_, {
                        label: "是否提交成果物",
                        prop: "isAchievement"
                    }, {
                        default: n(() => [ r($, {
                            modelValue: t(e).isAchievement,
                            "onUpdate:modelValue": l[9] || (l[9] = a => t(e).isAchievement = a),
                            disabled: t(e).type === 2
                        }, {
                            default: n(() => [ (o(!0), g(h, null, b(t(O)(t(L).COMMON_BOOL), a => (o(), 
                            f(Z, {
                                key: a.value,
                                label: a.label,
                                value: a.value
                            }, null, 8, [ "label", "value" ]))), 128)) ]),
                            _: 1
                        }, 8, [ "modelValue", "disabled" ]) ]),
                        _: 1
                    }), r(_, {
                        label: "任务顺序",
                        prop: "sort"
                    }, {
                        default: n(() => [ r(W, {
                            modelValue: t(e).sort,
                            "onUpdate:modelValue": l[10] || (l[10] = a => t(e).sort = a),
                            placeholder: "请输入任务顺序",
                            min: 0,
                            step: 1,
                            "step-strictly": "",
                            max: 1e5,
                            "controls-position": "right",
                            class: "align-left"
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), r(_, {
                        label: "任务资料",
                        prop: "fileList"
                    }, {
                        default: n(() => [ r(ee, {
                            type: "primary",
                            size: "default",
                            plain: "",
                            class: "mb-8px !px-10px",
                            onClick: B
                        }, {
                            default: n(() => [ r(U, {
                                icon: "ep:plus",
                                class: "mr-5px"
                            }), oe(" 添加资料 ") ]),
                            _: 1
                        }), r(ne, {
                            name: "el-fade-in-linear",
                            tag: "div",
                            class: "w-100%"
                        }, {
                            default: n(() => [ (o(!0), g(h, null, b(t(e).fileList, (a, te) => {
                                return o(), g("div", {
                                    key: a.fileEid,
                                    class: "file-list-item"
                                }, [ p("div", V, [ p("div", I, [ p("img", {
                                    src: Y(a),
                                    alt: "",
                                    style: {
                                        width: "32px"
                                    }
                                }, null, 8, q) ]), p("div", j, [ p("span", {
                                    title: a.name,
                                    class: "file-name"
                                }, M(a.fileName), 9, w), p("span", A, M((D = a, 
                                [ "0", "6" ].indexOf(D.fileType) >= 0 ? "--" : $e(D.fileSize || 0))), 1) ]) ]), p("div", C, [ p("div", E, [ r(U, {
                                    size: 20,
                                    icon: "svg-icon:file_close",
                                    style: {
                                        cursor: "pointer"
                                    },
                                    onClick: Ca => (se => {
                                        e.value.fileList.splice(se, 1);
                                    })(te)
                                }, null, 8, [ "onClick" ]) ]) ]) ]);
                                var D;
                            }), 128)) ]),
                            _: 1
                        }), r(ea, {
                            ref_key: "AddResourceRef",
                            ref: T,
                            "form-type": "projectTask",
                            onSubmit: K
                        }, null, 512) ]),
                        _: 1
                    }) ]),
                    _: 1
                }, 8, [ "model", "rules" ])), [ [ le, t(x) ] ]);
            };
        }
    }, [ [ "__scopeId", "data-v-cfd6d7c9" ] ]);
});

export {
    Aa as __tla,
    z as default
};