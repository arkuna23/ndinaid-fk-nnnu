import {
    r as A,
    p as Es,
    h as Ss,
    e as As,
    T as Rs,
    U as vs,
    o as i,
    c as p,
    k as o,
    l as _,
    t as s,
    a as c,
    m as hs,
    v as h,
    x as B,
    F as X,
    y as K,
    C as y,
    D as L,
    B as d,
    z as ys,
    A as Q,
    H as fs,
    G as W,
    n as ks,
    M as Hs,
    s as Bs,
    J as Ms,
    ak as qs,
    _ as Js,
    P as Ps,
    R as js,
    S as Gs,
    __tla as Xs
} from "./index-6c08ea4c.js";

import {
    E as Ks,
    __tla as Qs
} from "./el-drawer-fca4d971.js";

import {
    _ as Ws,
    __tla as Ys
} from "./index-c834085f.js";

import {
    _ as Zs,
    __tla as $s
} from "./index-c4ca0ced.js";

import {
    E as ea,
    __tla as sa
} from "./el-avatar-76960a98.js";

import {
    _ as aa,
    __tla as la
} from "./index-1024512a.js";

import {
    _ as ta,
    g as Y,
    a as Z,
    c as _s,
    d as ia,
    b as ca,
    l as oa,
    __tla as na
} from "./addDiscussionDialog-c2904e6c.js";

import {
    a as J,
    __tla as ra
} from "./file-e038b35d.js";

import {
    _ as da
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    a as ua,
    b as ma,
    E as pa,
    __tla as va
} from "./index-5adb716b.js";

import {
    __tla as ha
} from "./index-993301ca.js";

import "./tree-05ea8e09.js";

import {
    __tla as ya
} from "./DeptTag-1be092ce.js";

import {
    __tla as fa
} from "./index-ef4d146e.js";

import {
    __tla as ka
} from "./Editor-ef737d2a.js";

import {
    __tla as _a
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Ca
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

let Cs, xa = Promise.all([ (() => {
    try {
        return Xs;
    } catch {}
})(), (() => {
    try {
        return Qs;
    } catch {}
})(), (() => {
    try {
        return Ys;
    } catch {}
})(), (() => {
    try {
        return $s;
    } catch {}
})(), (() => {
    try {
        return sa;
    } catch {}
})(), (() => {
    try {
        return la;
    } catch {}
})(), (() => {
    try {
        return na;
    } catch {}
})(), (() => {
    try {
        return ra;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return ha;
    } catch {}
})(), (() => {
    try {
        return ya;
    } catch {}
})(), (() => {
    try {
        return fa;
    } catch {}
})(), (() => {
    try {
        return ka;
    } catch {}
})(), (() => {
    try {
        return _a;
    } catch {}
})(), (() => {
    try {
        return Ca;
    } catch {}
})() ]).then(async () => {
    let P, $, ee, se, ae, le, te, ie, ce, oe, ne, re, de, ue, me, pe, ve, he, ye, fe, ke, _e, Ce, xe, ge, be, Ie, we, ze, Ve, Te, Fe, Le, Oe, Ue, De, Ne, Ee, Se, Ae, Re, He, Be, Me, qe, Je, Pe, je, Ge, Xe, Ke, Qe, We, Ye, Ze, $e, es, ss, as, ls, ts, is;
    P = M => (js("data-v-6ba1dc2f"), M = M(), Gs(), M), $ = {
        class: "course-discussion"
    }, ee = {
        class: "drawer-body"
    }, se = {
        key: 0
    }, ae = {
        class: "relative"
    }, le = {
        class: "top-box clearFix"
    }, te = {
        class: "left h-40px font-size-12px lh-40px"
    }, ie = P(() => s("span", {
        style: {
            color: "#333333"
        },
        class: "ml-20px mr-8px"
    }, "仅查看教师", -1)), ce = {
        class: "left h-40px font-size-12px lh-40px"
    }, oe = P(() => s("span", {
        style: {
            color: "#333333"
        },
        class: "ml-20px mr-8px"
    }, "仅查看当前班级", -1)), ne = {
        class: "right h-40px flex lh-40px",
        style: {
            "align-items": "center"
        }
    }, re = {
        class: "el-dropdown-link"
    }, de = {
        class: "content pb-20px"
    }, ue = {
        key: 2,
        class: "teacher-tag"
    }, me = {
        class: "ml-10px w-100%"
    }, pe = {
        class: "title"
    }, ve = {
        key: 0,
        class: "discuss-content clearFix mb-24px mt-10px"
    }, he = [ "innerHTML" ], ye = {
        key: 1,
        class: "complexContent mb-24px mt-10px break-all"
    }, fe = [ "innerHTML" ], ke = {
        class: "left bottom-text w-225px"
    }, _e = {
        class: "left bottom-text w-110px"
    }, Ce = {
        class: "left w-93px"
    }, xe = [ "onClick" ], ge = {
        class: "left w-93px"
    }, be = {
        class: "bottom-btn inline-flex"
    }, Ie = {
        class: "left"
    }, we = [ "onClick" ], ze = [ "onClick" ], Ve = {
        class: "comment-input"
    }, Te = {
        class: "cover"
    }, Fe = {
        class: "input-box"
    }, Le = {
        class: "text-btn-box neu-bg-white"
    }, Oe = {
        class: "comment-list"
    }, Ue = {
        class: "comment-title"
    }, De = {
        class: "discuss-avatar left h-24px w-24px"
    }, Ne = {
        class: "discuss-body left"
    }, Ee = {
        class: "discuss-title"
    }, Se = {
        class: "main-body break-all"
    }, Ae = {
        class: "clearFix"
    }, Re = {
        class: "left bottom-text w-160px"
    }, He = {
        class: "left w-93px"
    }, Be = [ "onClick" ], Me = {
        class: "left w-93px"
    }, qe = {
        class: "bottom-btn inline-flex"
    }, Je = {
        class: "left"
    }, Pe = [ "onClick" ], je = {
        class: "comment-input"
    }, Ge = {
        class: "input-box",
        style: {
            width: "100%"
        }
    }, Xe = {
        class: "text-btn-box neu-bg-white"
    }, Ke = {
        key: 0,
        class: "comment-list common-reply-list"
    }, Qe = {
        class: "discuss-avatar left h-24px w-24px"
    }, We = {
        class: "discuss-body left"
    }, Ye = {
        class: "discuss-title"
    }, Ze = {
        class: "main-body break-all"
    }, $e = {
        class: "clearFix"
    }, es = {
        class: "left bottom-text w-160px"
    }, ss = {
        class: "left w-93px"
    }, as = {
        class: "bottom-btn inline-flex"
    }, ls = {
        class: "left"
    }, ts = [ "onClick" ], is = [ "onClick" ], Cs = da({
        __name: "courseDiscussion",
        setup(M, {
            expose: xs
        }) {
            const cs = A(null), R = A(!1), O = Es(), f = Ss(), z = As(() => f.isTeacher), m = Rs(), j = A("1"), g = A([]), H = A(0), u = vs({
                searchReq: "",
                isTeacher: 0,
                isClass: 0,
                orderByType: 1,
                creator: "",
                isJoin: 0
            }), V = vs({
                pageNo: 1,
                pageSize: 10
            }), gs = l => {
                u.searchReq = l.searchReq, x();
            }, bs = () => {
                u.isTeacher = 0, u.isClass = 0;
            }, Is = l => {
                switch (l) {
                  case "1":
                    u.creator = "", u.isJoin = 0, x();
                    break;

                  case "2":
                    u.creator = f.user.id, u.isJoin = 0, x();
                    break;

                  case "3":
                    u.creator = "", u.isJoin = 1, x();
                }
            }, ws = l => {
                u.orderByType = l, x();
            }, os = A(!1), x = async (l = !1) => {
                os.value = l;
                const a = await Y({
                    ...V,
                    ...u,
                    teachCourseId: m.params.teachCourseId,
                    teachClassId: m.params.classId,
                    loginUser: f.user.id
                });
                g.value = a == null ? void 0 : a.list.map(r => {
                    let T, F = r.complexContent.match(/<img\s+[^>]*>/i);
                    return F && (T = F[0]), {
                        ...r,
                        isOpen: !1,
                        showDetail: !1,
                        commentList: [],
                        commentValue: "",
                        showAll: !1,
                        imgTag: T
                    };
                }), H.value = (a == null ? void 0 : a.total) || 0;
            }, ns = l => {
                if (l.isOpen) l.isOpen = !1, l.showAll = !1; else {
                    l.isOpen = !0;
                    let a = {
                        discussId: l.id,
                        creator: l.creator,
                        teachCourseId: m.params.teachCourseId,
                        pageNo: 1,
                        pageSize: 10
                    };
                    Z(a).then(r => {
                        l.commentList = r.list;
                    }), g.value = g.value.map(r => (r.id !== l.id && (r.isOpen = !1, 
                    r.showAll = !1), r));
                }
            }, rs = l => {
                l.isOpen = !l.isOpen;
            }, ds = l => {
                O.confirm("确认要删除该回复吗？").then(async () => {
                    let a = {
                        id: l.id,
                        creator: f.user.id,
                        classify: z.value ? "1" : "2"
                    };
                    await ca(a), O.success("删除成功"), x();
                });
            }, U = async (l, a, r) => {
                let T;
                T = a === "1" ? {
                    teachCourseId: m.params.teachCourseId,
                    teachClassId: m.params.classId,
                    discussId: l.id,
                    type: a,
                    actType: 1
                } : {
                    teachCourseId: m.params.teachCourseId,
                    teachClassId: m.params.classId,
                    discussId: l.id,
                    commentId: r.id,
                    type: a,
                    actType: 1
                }, await oa(T), a === "1" ? l.selfLike ? (l.selfLike = 0, l.likeCount = l.likeCount - 1) : (l.selfLike = 1, 
                l.likeCount = l.likeCount + 1) : r.selfLike ? (r.selfLike = 0, r.likeCount = r.likeCount - 1) : (r.selfLike = 1, 
                r.likeCount = r.likeCount + 1);
            }, us = () => {
                cs.value.handleOpen();
            }, zs = async () => {
                R.value = !1;
            };
            return xs({
                handleOpen: () => {
                    R.value = !0, x(!0);
                }
            }), (l, a) => {
                const r = Hs, T = Bs, F = Ms, ms = qs, Vs = aa, k = Js, G = ua, Ts = ma, Fs = pa, b = ea, ps = Ps, Ls = Zs, Os = Ws, Us = Ks;
                return i(), p("div", $, [ o(Us, {
                    modelValue: c(R),
                    "onUpdate:modelValue": a[10] || (a[10] = e => hs(R) ? R.value = e : null),
                    title: "讨论",
                    size: "927",
                    "before-close": zs
                }, {
                    default: _(() => [ s("div", ee, [ c(g).length > 0 || !c(os) ? (i(), 
                    p("div", se, [ s("div", ae, [ o(T, {
                        modelValue: c(j),
                        "onUpdate:modelValue": a[0] || (a[0] = e => hs(j) ? j.value = e : null),
                        onTabChange: Is
                    }, {
                        default: _(() => [ o(r, {
                            label: "全部讨论",
                            name: "1"
                        }), o(r, {
                            label: "我发起的",
                            name: "2"
                        }), o(r, {
                            label: "我参与的",
                            name: "3"
                        }) ]),
                        _: 1
                    }, 8, [ "modelValue" ]), o(F, {
                        class: "absolute right-0 top-0",
                        type: "primary",
                        onClick: a[1] || (a[1] = e => us())
                    }, {
                        default: _(() => [ h("发起讨论") ]),
                        _: 1
                    }) ]), s("div", le, [ o(Vs, {
                        onHandleSearch: gs,
                        onHandleReset: bs,
                        inDialog: !0,
                        class: "left",
                        keywordsInfo: {
                            key: "searchReq",
                            label: "讨论标题/内容关键字"
                        }
                    }, {
                        default: _(() => [ s("div", te, [ ie, o(ms, {
                            modelValue: c(u).isTeacher,
                            "onUpdate:modelValue": a[2] || (a[2] = e => c(u).isTeacher = e),
                            "active-value": 1,
                            "inactive-value": 0,
                            onChange: a[3] || (a[3] = e => x())
                        }, null, 8, [ "modelValue" ]) ]), s("div", ce, [ oe, o(ms, {
                            modelValue: c(u).isClass,
                            "onUpdate:modelValue": a[4] || (a[4] = e => c(u).isClass = e),
                            "active-value": 1,
                            "inactive-value": 0,
                            onChange: a[5] || (a[5] = e => x())
                        }, null, 8, [ "modelValue" ]) ]) ]),
                        _: 1
                    }), s("div", ne, [ o(Fs, {
                        onCommand: ws,
                        "popper-class": "disscussion-dropdown"
                    }, {
                        dropdown: _(() => [ o(Ts, null, {
                            default: _(() => [ o(G, {
                                command: "1"
                            }, {
                                default: _(() => [ s("div", {
                                    style: B(c(u).orderByType === "1" ? "background-color: #F5F7FA; color: #409EFF" : "")
                                }, "按发布时间", 4) ]),
                                _: 1
                            }), o(G, {
                                command: "2"
                            }, {
                                default: _(() => [ s("div", {
                                    style: B(c(u).orderByType === "2" ? "background-color: #F5F7FA; color: #409EFF" : "")
                                }, "按讨论热度", 4) ]),
                                _: 1
                            }), o(G, {
                                command: "3"
                            }, {
                                default: _(() => [ s("div", {
                                    style: B(c(u).orderByType === "3" ? "background-color: #F5F7FA; color: #409EFF" : "")
                                }, "按最近回复", 4) ]),
                                _: 1
                            }) ]),
                            _: 1
                        }) ]),
                        default: _(() => [ s("span", re, [ o(k, {
                            icon: "svg-icon:menu",
                            size: 18
                        }) ]) ]),
                        _: 1
                    }) ]) ]), s("div", de, [ (i(!0), p(X, null, K(c(g), e => (i(), 
                    p("div", {
                        key: e.id,
                        class: "flex"
                    }, [ s("div", null, [ e.avatar ? (i(), y(b, {
                        key: 0,
                        class: "userIcon",
                        fit: "cover",
                        size: 40,
                        src: c(J)(e.avatar)
                    }, null, 8, [ "src" ])) : (i(), y(b, {
                        key: 1,
                        class: "userIcon",
                        fit: "cover",
                        size: 40,
                        src: "https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"
                    })), e.classify === 1 ? (i(), p("div", ue, " 教师 ")) : L("", !0) ]), s("div", me, [ s("div", null, [ s("div", pe, d(e.title), 1), e.showDetail ? (i(), 
                    p("div", ye, [ s("div", {
                        innerHTML: e.complexContent
                    }, null, 8, fe) ])) : (i(), p("div", ve, [ e.imgTag ? (i(), 
                    p("div", {
                        key: 0,
                        innerHTML: e.imgTag,
                        class: "left mr10px h-110px w-190px b-5px"
                    }, null, 8, he)) : L("", !0), s("div", {
                        class: "message left",
                        style: B(e.imgTag ? "width: calc(100% - 200px); -webkit-line-clamp: 4;" : "width: 100%")
                    }, d(e.content), 5) ])), s("div", {
                        class: "clearFix pb-10px",
                        style: B(e.isOpen ? "" : "border-bottom: 1px solid #eee;")
                    }, [ s("div", ke, d(e.nickname) + "提问于" + d(e.createTimeString), 1), s("div", _e, d(e.viewType === "0" ? "全部班级可见" : "仅当前班级可见"), 1), s("div", Ce, [ s("div", {
                        class: ys([ "bottom-btn discuss inline-flex cursor-pointer", e.isOpen ? "discuss-active" : "" ]),
                        onClick: t => ns(e)
                    }, [ o(k, {
                        icon: "svg-icon:discuss",
                        size: 18
                    }), h(" " + d(e.replyNum ? e.replyNum : 0) + "条回复 ", 1) ], 10, xe) ]), s("div", ge, [ s("div", be, [ e.selfLike === 0 ? (i(), 
                    y(k, {
                        key: 0,
                        class: "discuss cursor-pointer",
                        icon: "svg-icon:upvote",
                        size: 18,
                        onClick: t => U(e, "1")
                    }, null, 8, [ "onClick" ])) : (i(), y(k, {
                        key: 1,
                        class: "cursor-pointer",
                        icon: "svg-icon:upvote-active",
                        size: 18,
                        onClick: t => U(e, "1")
                    }, null, 8, [ "onClick" ])), h(" " + d(e.likeCount ? e.likeCount : 0) + "个点赞 ", 1) ]) ]), s("div", Ie, [ e.creator === c(f).user.id || c(z) ? (i(), 
                    p("div", {
                        key: 0,
                        class: "bottom-btn delete inline-flex cursor-pointer",
                        onClick: t => (v => {
                            O.confirm(`\u8BA8\u8BBA\u5220\u9664\u540E\u6240\u6709\u5B66\u751F\u7686\u4E0D\u53EF\u89C1\uFF0C
\u5DF2\u4EA7\u751F\u56DE\u590D\u53CA\u70B9\u8D5E\u6570\u636E\u5747\u5C06\u6E05\u7A7A\uFF0C\u786E\u5B9A\u5220\u9664?`).then(async () => {
                                let n = {
                                    id: v.id,
                                    creator: f.user.id,
                                    classify: z.value ? "1" : "2",
                                    teachCourseId: m.params.teachCourseId
                                };
                                await ia(n), O.success("删除成功"), x();
                            });
                        })(e)
                    }, [ o(k, {
                        icon: "ep:delete",
                        size: 18
                    }), h(" 删除 ") ], 8, we)) : L("", !0) ]), s("div", {
                        class: "right bottom-btn discuss inline-flex cursor-pointer",
                        onClick: t => (v => {
                            v.showDetail = !v.showDetail;
                        })(e)
                    }, [ h(d(e.showDetail ? "收起" : "展开") + " ", 1), o(k, {
                        icon: e.showDetail ? "ep:arrow-up" : "ep:arrow-down",
                        size: 18
                    }, null, 8, [ "icon" ]) ], 8, ze) ], 4) ]), Q(s("div", null, [ s("div", Ve, [ s("div", Te, [ c(f).user.avatar ? (i(), 
                    y(b, {
                        key: 0,
                        class: "userIcon",
                        fit: "cover",
                        size: 40,
                        src: c(J)(c(f).user.avatar)
                    }, null, 8, [ "src" ])) : (i(), y(b, {
                        key: 1,
                        class: "userIcon",
                        fit: "cover",
                        size: 40,
                        src: "https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"
                    })) ]), s("div", Fe, [ o(ps, {
                        modelValue: e.commentValue,
                        "onUpdate:modelValue": t => e.commentValue = t,
                        placeholder: "请输入",
                        class: "input-with-select",
                        type: "textarea",
                        maxlength: 500,
                        size: "default",
                        autosize: !0
                    }, null, 8, [ "modelValue", "onUpdate:modelValue" ]), s("div", Le, [ h(d((e.commentValue || "").length || 0) + " / 500 ", 1), o(F, {
                        type: "primary",
                        size: "default",
                        onClick: fs(t => (v => {
                            let n = {
                                teachCourseId: m.params.teachCourseId,
                                teachClassId: m.params.classId,
                                discussId: v.id,
                                replyUserId: f.user.id,
                                classify: z.value ? "1" : "2",
                                content: v.commentValue
                            };
                            _s(n).then(C => {
                                O.success("评论成功"), v.commentValue = "", Y({
                                    ...V,
                                    ...u,
                                    teachCourseId: m.params.teachCourseId,
                                    teachClassId: m.params.classId,
                                    loginUser: f.user.id
                                }).then(D => {
                                    g.value = D == null ? void 0 : D.list.map(N => {
                                        let I, E = N.complexContent.match(/<img\s+[^>]*>/i);
                                        return E && (I = E[0]), {
                                            ...N,
                                            isOpen: !1,
                                            showDetail: !1,
                                            commentList: [],
                                            commentValue: "",
                                            imgTag: I
                                        };
                                    }), H.value = (C == null ? void 0 : C.total) || 0, 
                                    ks(() => {
                                        let N = g.value.find(I => I.id === v.id);
                                        ns(N);
                                    });
                                });
                            });
                        })(e), [ "stop" ]),
                        class: "right ml-2"
                    }, {
                        default: _(() => [ h("回复") ]),
                        _: 2
                    }, 1032, [ "onClick" ]) ]) ]) ]), s("div", Oe, [ s("div", Ue, d(e.replyNum ? e.replyNum : 0) + " 条回复 ", 1), (i(!0), 
                    p(X, null, K(e.commentList, (t, v) => (i(), p("div", {
                        class: "comment-item clearFix",
                        key: v
                    }, [ s("div", De, [ t.avatar ? (i(), y(b, {
                        key: 0,
                        class: "userIcon",
                        fit: "cover",
                        size: 24,
                        src: c(J)(t.avatar)
                    }, null, 8, [ "src" ])) : (i(), y(b, {
                        key: 1,
                        class: "userIcon",
                        fit: "cover",
                        size: 24,
                        src: "https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"
                    })) ]), s("div", Ne, [ s("div", Ee, d(t.nickname), 1), s("div", Se, d(t.content), 1), s("div", Ae, [ s("div", Re, d(t.createTimeString), 1), s("div", He, [ s("div", {
                        class: ys([ "bottom-btn discuss inline-flex cursor-pointer", t.isOpen ? "discuss-active" : "" ]),
                        onClick: n => rs(t)
                    }, [ o(k, {
                        icon: "svg-icon:discuss",
                        size: 18
                    }), h(" " + d(t.applyNum ? t.applyNum : 0) + "条回复 ", 1) ], 10, Be) ]), s("div", Me, [ s("div", qe, [ t.selfLike === 0 ? (i(), 
                    y(k, {
                        key: 0,
                        class: "discuss cursor-pointer",
                        icon: "svg-icon:upvote",
                        size: 18,
                        onClick: n => U(e, "2", t)
                    }, null, 8, [ "onClick" ])) : (i(), y(k, {
                        key: 1,
                        class: "cursor-pointer",
                        icon: "svg-icon:upvote-active",
                        size: 18,
                        onClick: n => U(e, "2", t)
                    }, null, 8, [ "onClick" ])), h(" " + d(t.likeCount ? t.likeCount : 0) + "个点赞 ", 1) ]) ]), s("div", Je, [ t.creator === c(f).user.id || c(z) ? (i(), 
                    p("div", {
                        key: 0,
                        class: "bottom-btn delete inline-flex cursor-pointer",
                        onClick: n => ds(t)
                    }, [ o(k, {
                        icon: "ep:delete",
                        size: 18
                    }), h(" 删除 ") ], 8, Pe)) : L("", !0) ]) ]), Q(s("div", je, [ s("div", Ge, [ o(ps, {
                        modelValue: t.commentValue,
                        "onUpdate:modelValue": n => t.commentValue = n,
                        placeholder: "请输入",
                        class: "input-with-select",
                        type: "textarea",
                        maxlength: 500,
                        size: "default",
                        autosize: !0
                    }, null, 8, [ "modelValue", "onUpdate:modelValue" ]), s("div", Xe, [ h(d((t.commentValue || "").length || 0) + " / 500 ", 1), o(F, {
                        type: "primary",
                        size: "default",
                        onClick: fs(n => ((C, D) => {
                            let N = {
                                teachCourseId: m.params.teachCourseId,
                                teachClassId: m.params.classId,
                                replyCommentId: C.id,
                                discussId: D.id,
                                replyUserId: f.user.id,
                                classify: z.value ? "1" : "2",
                                content: C.commentValue
                            };
                            _s(N).then(I => {
                                O.success("评论成功"), C.commentValue = "", Y({
                                    ...V,
                                    ...u,
                                    teachCourseId: m.params.teachCourseId,
                                    teachClassId: m.params.classId,
                                    loginUser: f.user.id
                                }).then(E => {
                                    g.value = E == null ? void 0 : E.list.map(w => {
                                        let q, S = w.complexContent.match(/<img\s+[^>]*>/i);
                                        return S && (q = S[0]), {
                                            ...w,
                                            isOpen: !1,
                                            showDetail: !1,
                                            commentList: [],
                                            commentValue: "",
                                            imgTag: q
                                        };
                                    }), H.value = (I == null ? void 0 : I.total) || 0, 
                                    ks(() => {
                                        let w = g.value.find(S => S.id === D.id);
                                        w.isOpen = !0;
                                        let q = {
                                            discussId: w.id,
                                            creator: w.creator,
                                            teachCourseId: m.params.teachCourseId,
                                            pageNo: 1,
                                            pageSize: 10
                                        };
                                        Z(q).then(S => {
                                            w.commentList = S.list;
                                            let Ds = w.commentList.find(Ns => Ns.id === C.id);
                                            rs(Ds);
                                        });
                                    });
                                });
                            });
                        })(t, e), [ "stop" ]),
                        class: "right ml-2"
                    }, {
                        default: _(() => [ h("回复") ]),
                        _: 2
                    }, 1032, [ "onClick" ]) ]) ]) ], 512), [ [ W, t.isOpen ] ]), t.isOpen ? (i(), 
                    p("div", Ke, [ (i(!0), p(X, null, K(t.teachCourseDiscussCommentRespVOs, n => (i(), 
                    p("div", {
                        class: "comment-item",
                        key: n.id
                    }, [ s("div", Qe, [ n.avatar ? (i(), y(b, {
                        key: 0,
                        class: "userIcon",
                        fit: "cover",
                        size: 24,
                        src: c(J)(n.avatar)
                    }, null, 8, [ "src" ])) : (i(), y(b, {
                        key: 1,
                        class: "userIcon",
                        fit: "cover",
                        size: 24,
                        src: "https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"
                    })) ]), s("div", We, [ s("div", Ye, d(n.nickname), 1), s("div", Ze, d(n.content), 1), s("div", $e, [ s("div", es, d(n.createTimeString), 1), s("div", ss, [ s("div", as, [ n.selfLike === 0 ? (i(), 
                    y(k, {
                        key: 0,
                        class: "discuss cursor-pointer",
                        icon: "svg-icon:upvote",
                        size: 18,
                        onClick: C => U(e, "2", n)
                    }, null, 8, [ "onClick" ])) : (i(), y(k, {
                        key: 1,
                        class: "cursor-pointer",
                        icon: "svg-icon:upvote-active",
                        size: 18,
                        onClick: C => U(e, "2", n)
                    }, null, 8, [ "onClick" ])), h(" " + d(n.likeCount ? n.likeCount : 0) + "个点赞 ", 1) ]) ]), s("div", ls, [ n.creator === c(f).user.id || c(z) ? (i(), 
                    p("div", {
                        key: 0,
                        class: "bottom-btn delete inline-flex cursor-pointer",
                        onClick: C => ds(n)
                    }, [ o(k, {
                        icon: "ep:delete",
                        size: 18
                    }), h(" 删除 ") ], 8, ts)) : L("", !0) ]) ]) ]) ]))), 128)) ])) : L("", !0) ]) ]))), 128)), e.replyNum > 10 && !e.showAll ? (i(), 
                    p("div", {
                        key: 0,
                        onClick: t => (v => {
                            v.showAll = !0;
                            let n = {
                                discussId: v.id,
                                creator: v.creator,
                                teachCourseId: m.params.teachCourseId,
                                pageNo: 1,
                                pageSize: 100
                            };
                            Z(n).then(C => {
                                v.commentList = C.list;
                            });
                        })(e),
                        class: "mb-20px ml-20px h-32px w-160px cursor-pointer bg-#EEEEEE font-size-14px lh-32px c-#666666",
                        style: {
                            "border-radius": "4px",
                            display: "flex",
                            "align-items": "center",
                            "justify-content": "center"
                        }
                    }, [ h(" 查看全部" + d(e.replyNum ? e.replyNum : 0) + "条讨论 ", 1), o(k, {
                        icon: "ep:arrow-right"
                    }) ], 8, is)) : L("", !0) ]) ], 512), [ [ W, e.isOpen ] ]) ]) ]))), 128)) ]), Q(o(Ls, {
                        limit: c(V).pageSize,
                        "onUpdate:limit": a[6] || (a[6] = e => c(V).pageSize = e),
                        page: c(V).pageNum,
                        "onUpdate:page": a[7] || (a[7] = e => c(V).pageNum = e),
                        total: c(H),
                        onPagination: a[8] || (a[8] = e => x())
                    }, null, 8, [ "limit", "page", "total" ]), [ [ W, c(H) > 0 ] ]) ])) : (i(), 
                    y(Os, {
                        key: 1
                    }, {
                        btn: _(() => [ o(F, {
                            type: "primary",
                            size: "large",
                            class: "btn-group",
                            onClick: a[9] || (a[9] = e => us())
                        }, {
                            default: _(() => [ h(" 发起讨论 ") ]),
                            _: 1
                        }) ]),
                        _: 1
                    })) ]) ]),
                    _: 1
                }, 8, [ "modelValue" ]), o(ta, {
                    ref_key: "addDiscussionDialogRef",
                    ref: cs,
                    onRefresh: a[11] || (a[11] = e => x())
                }, null, 512) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-6ba1dc2f" ] ]);
});

export {
    xa as __tla,
    Cs as default
};