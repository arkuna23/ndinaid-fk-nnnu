import {
    _ as Ke,
    __tla as qe
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    u as He,
    T as We,
    r as o,
    e as F,
    f as Ye,
    j as Ze,
    o as u,
    c as b,
    t as i,
    a as s,
    k as r,
    A as h,
    C as _,
    l as t,
    v as n,
    D as L,
    m as z,
    B as D,
    F as ke,
    y as be,
    G as $e,
    z as Oe,
    E as Qe,
    bo as xe,
    _ as Xe,
    J as ea,
    ak as aa,
    ad as ta,
    K as la,
    ae as ra,
    a8 as sa,
    bp as oa,
    bq as na,
    aU as ca,
    R as ua,
    S as ia,
    __tla as ma
} from "./index-6c08ea4c.js";

import {
    _ as _a,
    __tla as da
} from "./index-1024512a.js";

import {
    _ as pa
} from "./appraise-c016687f.js";

import {
    _ as ha
} from "./manageIcon-aa116bb2.js";

import {
    _ as fa
} from "./deleteIcon-ec5a6b2b.js";

import {
    g as ya
} from "./file.data-64a18eaa.js";

import va, {
    __tla as ga
} from "./addResourceDialog-f58c8d8c.js";

import ka, {
    __tla as ba
} from "./editorResourceNameDialog-ea0f775b.js";

import xa, {
    __tla as wa
} from "./resourceSetting-0225cc93.js";

import Ca, {
    __tla as Ia
} from "./resourceStatistics-c2959cf4.js";

import {
    h as Ra,
    __tla as Va
} from "./file-e038b35d.js";

import {
    A as Ea,
    j as Da,
    __tla as Ta
} from "./pkgManage-14933852.js";

import {
    _ as Sa
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    a as Aa,
    b as La,
    E as za,
    __tla as Ba
} from "./index-5adb716b.js";

import {
    __tla as Ua
} from "./index.es-14d10e28.js";

import {
    __tla as Ma
} from "./project-file-a2b4fd07.js";

import "./tree-05ea8e09.js";

import {
    __tla as Pa
} from "./DeptTag-1be092ce.js";

import {
    __tla as ja
} from "./index-ef4d146e.js";

import "./teachingResourceIcon7-1c1a8557.js";

import {
    __tla as Na
} from "./index-c4ca0ced.js";

import {
    __tla as Fa
} from "./index-993301ca.js";

import {
    __tla as Ga
} from "./index-8b41572c.js";

import "./step1Banner-550d8194.js";

import "./file_HTML-65451e1b.js";

import "./file.data-794ea5d0.js";

import "./file_题-23882218.js";

import {
    __tla as Ja
} from "./formatTime-de6f1520.js";

import {
    __tla as Ka
} from "./index-9567cbf6.js";

import "./step2Banner-4d214de6.js";

import "./download-20922b56.js";

import {
    __tla as qa
} from "./statisticsEchart-e951990b.js";

import "./index-eb0ca811.js";

import "./install-67fb146c.js";

import "./install-0c30d2d2.js";

import {
    __tla as Ha
} from "./statisticsList-70c50913.js";

let we, Wa = Promise.all([ (() => {
    try {
        return qe;
    } catch {}
})(), (() => {
    try {
        return ma;
    } catch {}
})(), (() => {
    try {
        return da;
    } catch {}
})(), (() => {
    try {
        return ga;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return wa;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Ta;
    } catch {}
})(), (() => {
    try {
        return Ba;
    } catch {}
})(), (() => {
    try {
        return Ua;
    } catch {}
})(), (() => {
    try {
        return Ma;
    } catch {}
})(), (() => {
    try {
        return Pa;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return Na;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Ga;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Ka;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Ha;
    } catch {}
})() ]).then(async () => {
    let p, G, J, K, q, H, W, Y, Z, $, O, Q, X, ee, ae, te, le, re, se, oe;
    p = T => (ua("data-v-0a165e9d"), T = T(), ia(), T), G = {
        style: {
            padding: "0 30px"
        },
        class: "height_box"
    }, J = {
        key: 0,
        class: "neu-no-data",
        style: {
            height: "500px"
        }
    }, K = p(() => i("p", {
        class: ""
    }, "暂无数据", -1)), q = {
        key: 1,
        class: "contentArea"
    }, H = p(() => i("div", {
        style: {
            clear: "both"
        }
    }, null, -1)), W = {
        style: {
            color: "#333",
            "font-size": "12px",
            "line-height": "30px"
        }
    }, Y = p(() => i("span", {
        style: {
            display: "inline-block"
        }
    }, "仅查看计入考核资料", -1)), Z = [ "src" ], $ = {
        class: "file-name"
    }, O = [ "onClick" ], Q = p(() => i("img", {
        src: pa,
        alt: "",
        style: {
            cursor: "pointer"
        }
    }, null, -1)), X = {
        class: "bottomClass"
    }, ee = p(() => i("img", {
        src: ha,
        alt: ""
    }, null, -1)), ae = p(() => i("img", {
        src: fa,
        alt: ""
    }, null, -1)), te = {
        style: {
            "text-align": "center",
            "line-height": "26px"
        }
    }, le = p(() => i("br", null, null, -1)), re = p(() => i("br", null, null, -1)), 
    se = {
        style: {
            color: "#245FE6"
        }
    }, oe = {
        style: {
            "text-align": "center",
            margin: "20px"
        }
    }, we = Sa({
        __name: "xxzl",
        setup(T) {
            He();
            const v = We(), Ce = o(), ne = o(), ce = o(), ue = o(), B = o(), Ie = o(), C = o();
            o([ "未发布", "未开始", "进行中", "已截止" ]);
            const f = o([]), ie = o(!1), x = F(() => v.name.includes("Manage")), Re = o([ {
                label: "视频",
                value: 1,
                num: 0
            }, {
                label: "音频",
                value: 2,
                num: 0
            }, {
                label: "文档",
                value: 3,
                num: 0
            }, {
                label: "图片",
                value: 4,
                num: 0
            }, {
                label: "压缩包",
                value: 5,
                num: 0
            }, {
                label: "链接",
                value: 6,
                num: 0
            }, {
                label: "MD",
                value: 7,
                num: 0
            } ]), Ve = F(() => [ {
                label: "资料类型",
                key: "resType",
                type: "list",
                options: Re.value
            } ]);
            F(() => {
                var e = g.value.length, a = [ 0, 0, 0, 0 ];
                return g.value.forEach(m => {
                    a[m.state]++;
                }), a[0] == e ? 1 : a[0] ? 2 : 3;
            });
            const I = o(!1);
            o(0);
            const U = o(""), S = o(!1), me = o(!1), g = o([]), w = o({}), _e = () => {
                ne.value.openStep1(1);
            }, Ee = e => {
                I.value = e, k(w.value);
            };
            o([]);
            const De = e => {
                w.value = e, k(e);
            }, k = (e, a) => {
                ie.value = a, f.value.length && fe(), Ea({
                    type: 1,
                    name: e ? e.name : null,
                    resType: e ? e.resType : null,
                    neuPkgId: v.params.id,
                    isAssess: I.value ? 1 : ""
                }).then(m => {
                    f.value = m, f.value.forEach(c => {
                        c.resName = c.name, c.eid = c.dataId;
                    });
                });
            }, de = e => {
                e.resType == 6 ? window.open(e.resLink, "_blank") : ce.value.operation(e);
            }, M = e => {
                U.value = "set", B.value.open(e);
            }, Te = e => {
                f.value.forEach(a => {
                    a.id == e.oldData.id && (a.name = e.name + (e.oldData.resExt ? e.oldData.resExt : ""));
                });
            }, pe = e => {
                Qe.confirm(`\u786E\u5B9A\u8981\u5220\u9664${e.length == 1 ? "该" : "这些"}\u8D44\u6E90\u5417\uFF1F`, "提示", {
                    confirmButtonText: "确认",
                    cancelButtonText: "取消"
                }).then(() => {
                    var a = [];
                    e.forEach(m => {
                        a.push(m.id);
                    }), Da({
                        id: v.params.id
                    }, a).then(m => {
                        k(w.value), xe({
                            type: "success",
                            message: "删除成功"
                        });
                    });
                }).catch(() => {});
            }, R = o(!1), V = o(0), P = o([]), he = o([]), Se = () => {
                var e = [];
                he.value.forEach(a => {
                    e.push(a.id);
                }), revokeRes({
                    teachCourseId: v.params.teachCourseId,
                    currentTeachClassId: v.params.classId,
                    resIds: e,
                    range: V.value
                }).then(a => {
                    j(), k(w.value), xe({
                        type: "success",
                        message: "撤销成功"
                    });
                });
            }, j = () => {
                V.value = 0, R.value = !1;
            }, Ae = (e, a) => {
                switch (a) {
                  case "editor":
                    ue.value.open(e);
                    break;

                  case "download":
                    Ra(e.dataId, e.name);
                    break;

                  case "publish":
                    ((m, c) => {
                        U.value = "publish", B.value.open(m, c);
                    })([ e ], 1);
                    break;

                  case "delete":
                    pe([ e ]);
                    break;

                  case "set":
                    M([ e ]);
                    break;

                  case "revoke":
                    (m => {
                        he.value = m, R.value = !0, getResCtl({
                            currenClassId: v.params.classId,
                            teachCourseId: v.params.teachCourseId,
                            resId: m[0].id
                        }).then(c => {
                            P.value = c.teachClassList || [];
                        });
                    })([ e ]);
                }
            }, fe = () => {
                C.value && C.value.clearSelection();
            }, Le = e => {
                C.value && C.value.toggleAllSelection();
            }, ze = e => {
                g.value = e;
                let a = e.length;
                S.value = a === f.value.length, me.value = a > 0 && a < f.value.length;
            };
            return Ye(() => {
                k({}, !0);
            }), (e, a) => {
                const m = Xe, c = ea, Be = _a, Ue = aa, E = ta, N = la, ye = Aa, Me = La, Pe = za, je = ra, Ne = sa, ve = oa, Fe = na, Ge = ca, Je = Ke, y = Ze("hasPermi-none");
                return u(), b("div", {
                    id: "jxwd",
                    style: {
                        padding: "20px 0 0"
                    },
                    class: Oe("isManage" + s(x))
                }, [ i("div", G, [ !s(f).length && s(ie) ? (u(), b("div", J, [ r(m, {
                    icon: "svg-icon:bg-no-data",
                    size: 200,
                    class: "",
                    style: {
                        height: "160px"
                    }
                }), K, s(x) ? h((u(), _(c, {
                    key: 0,
                    type: "primary",
                    style: {
                        "margin-top": "10px"
                    },
                    onClick: _e
                }, {
                    default: t(() => [ r(m, {
                        icon: "ep:plus",
                        class: "mr-4px"
                    }), n("添加") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:create" ] ] ]) : L("", !0) ])) : (u(), 
                b("div", q, [ r(Be, {
                    borderBox: !0,
                    ref_key: "comSearchRef",
                    ref: Ce,
                    searchList: s(Ve),
                    keywordsInfo: {
                        label: "资料名称/标签",
                        key: "name"
                    },
                    onHandleSearch: De,
                    class: "left"
                }, null, 8, [ "searchList" ]), s(x) ? h((u(), _(c, {
                    key: 0,
                    type: "primary",
                    class: "btn-group",
                    onClick: _e
                }, {
                    default: t(() => [ r(m, {
                        icon: "ep:plus",
                        class: "mr-4px"
                    }), n(" 添加 ") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:create" ] ] ]) : L("", !0), H, i("div", W, [ Y, n(), r(Ue, {
                    modelValue: s(I),
                    "onUpdate:modelValue": a[0] || (a[0] = l => z(I) ? I.value = l : null),
                    class: "ml-2",
                    style: {
                        "--el-switch-on-color": "#63D90A"
                    },
                    onChange: Ee
                }, null, 8, [ "modelValue" ]) ]), r(je, {
                    ref_key: "tableListRef",
                    ref: C,
                    data: s(f),
                    "header-row-class-name": "system-header",
                    onSelectionChange: ze,
                    "row-key": "id",
                    "show-header": !1,
                    height: s(x) ? "calc( 100% - 40px)" : "calc( 100% - 20px)",
                    "default-expand-all": !0
                }, {
                    default: t(() => [ s(x) ? (u(), _(E, {
                        key: 0,
                        type: "selection",
                        width: "30"
                    })) : L("", !0), r(E, {
                        width: "30"
                    }, {
                        default: t(l => [ i("img", {
                            src: s(ya)(l.row.resType),
                            alt: "",
                            style: {
                                "margin-right": "10px",
                                "margin-top": "5px"
                            }
                        }, null, 8, Z) ]),
                        _: 1
                    }), r(E, {
                        label: "文件名"
                    }, {
                        default: t(l => [ i("div", $, [ r(N, {
                            effect: "dark",
                            content: l.row.name,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: t(() => [ i("span", {
                                class: "file-name__span",
                                onClick: d => de(l.row)
                            }, D(l.row.name), 9, O) ]),
                            _: 2
                        }, 1032, [ "content" ]), (u(!0), b(ke, null, be(l.row.tagNameList, (d, A) => (u(), 
                        b("div", {
                            class: "resourceLabel",
                            key: A
                        }, D(d), 1))), 128)), l.row.isAssess ? (u(), _(N, {
                            key: 0,
                            effect: "dark",
                            content: "计入考核点",
                            placement: "top",
                            enterable: !1
                        }, {
                            default: t(() => [ Q ]),
                            _: 1
                        })) : L("", !0) ]) ]),
                        _: 1
                    }), s(x) ? (u(), _(E, {
                        key: 1,
                        width: "200"
                    }, {
                        default: t(l => [ h((u(), _(c, {
                            type: "primary",
                            text: "",
                            onClick: d => M([ l.row ])
                        }, {
                            default: t(() => [ n("资源设置") ]),
                            _: 2
                        }, 1032, [ "onClick" ])), [ [ y, [ "teachmanager:teach-course-res-class-ctl:update" ] ] ]), r(Pe, {
                            style: {
                                "font-size": "12px"
                            },
                            onCommand: d => Ae(l.row, d),
                            onVisibleChange: d => {
                                return A = l.row, ge = d, void (A.moreIcon = ge);
                                var A, ge;
                            }
                        }, {
                            dropdown: t(() => [ h((u(), _(Me, null, {
                                default: t(() => [ h((u(), _(ye, {
                                    command: "editor"
                                }, {
                                    default: t(() => [ n("编辑") ]),
                                    _: 1
                                })), [ [ y, [ "teachmanager:teach-course-res:update" ] ] ]), h((u(), 
                                _(ye, {
                                    command: "delete",
                                    style: {
                                        color: "#E14635"
                                    }
                                }, {
                                    default: t(() => [ n("删除") ]),
                                    _: 1
                                })), [ [ y, [ "teachmanager:teach-course-res:delete" ] ] ]) ]),
                                _: 1
                            })), [ [ y, [ "teachmanager:teach-course-res:update", "teachmanager:teach-course-res:delete", "teachmanager:teach-course-res-class-ctl:update" ] ] ]) ]),
                            default: t(() => [ r(c, {
                                type: "primary",
                                text: "",
                                style: {
                                    "margin-left": "3px"
                                }
                            }, {
                                default: t(() => [ n("更多"), r(m, {
                                    icon: l.row.moreIcon ? "ep:arrow-up" : "ep:arrow-down"
                                }, null, 8, [ "icon" ]) ]),
                                _: 2
                            }, 1024) ]),
                            _: 2
                        }, 1032, [ "onCommand", "onVisibleChange" ]) ]),
                        _: 1
                    })) : (u(), _(E, {
                        key: 2,
                        width: "100"
                    }, {
                        default: t(l => [ r(c, {
                            type: "primary",
                            text: "",
                            onClick: d => de(l.row)
                        }, {
                            default: t(() => [ n("预览") ]),
                            _: 2
                        }, 1032, [ "onClick" ]) ]),
                        _: 1
                    })) ]),
                    _: 1
                }, 8, [ "data", "height" ]), h(i("div", X, [ r(Ne, {
                    style: {
                        "margin-left": "40px"
                    },
                    indeterminate: s(me),
                    modelValue: s(S),
                    "onUpdate:modelValue": a[1] || (a[1] = l => z(S) ? S.value = l : null),
                    onChange: Le
                }, {
                    default: t(() => [ n("全选，当前已选中" + D(s(g).length) + "个文件", 1) ]),
                    _: 1
                }, 8, [ "indeterminate", "modelValue" ]), i("div", null, [ h((u(), 
                _(c, {
                    type: "primary",
                    onClick: a[2] || (a[2] = l => M(s(g)))
                }, {
                    default: t(() => [ ee, n("资源设置") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:update" ] ] ]), h((u(), 
                _(c, {
                    type: "danger",
                    onClick: a[3] || (a[3] = l => pe(s(g)))
                }, {
                    default: t(() => [ ae, n("删除") ]),
                    _: 1
                })), [ [ y, [ "teachmanager:teach-course-res:delete" ] ] ]) ]), r(c, {
                    style: {
                        "margin-right": "40px"
                    },
                    onClick: fe
                }, {
                    default: t(() => [ n("取消") ]),
                    _: 1
                }) ], 512), [ [ $e, !!s(g).length ] ]) ])) ]), r(Ge, {
                    modelValue: s(R),
                    "onUpdate:modelValue": a[5] || (a[5] = l => z(R) ? R.value = l : null),
                    title: "撤销发布",
                    width: "500px",
                    "close-on-click-modal": !1,
                    "close-on-press-escape": !1,
                    draggable: !1,
                    onClose: j
                }, {
                    default: t(() => [ i("div", te, [ n(" 学习资料撤销发布后学生端将不可见，"), le, n(" 且所有学习记录均将被清空（无法撤销恢复），确定撤销发布？"), re, n(" 撤销发布范围： "), r(Fe, {
                        modelValue: s(V),
                        "onUpdate:modelValue": a[4] || (a[4] = l => z(V) ? V.value = l : null),
                        style: {
                            position: "relative",
                            top: "2px"
                        }
                    }, {
                        default: t(() => [ r(ve, {
                            value: 0
                        }, {
                            default: t(() => [ n("当前班级") ]),
                            _: 1
                        }), r(ve, {
                            value: 1
                        }, {
                            default: t(() => [ n("全部班级（ "), r(N, {
                                class: "box-item",
                                effect: "light",
                                placement: "right"
                            }, {
                                content: t(() => [ (u(!0), b(ke, null, be(s(P), (l, d) => (u(), 
                                b("div", {
                                    key: d
                                }, D(l.name), 1))), 128)) ]),
                                default: t(() => [ i("span", se, D(s(P).length), 1) ]),
                                _: 1
                            }), n(" ）") ]),
                            _: 1
                        }) ]),
                        _: 1
                    }, 8, [ "modelValue" ]) ]), i("div", oe, [ r(c, {
                        style: {
                            "margin-right": "20px"
                        },
                        onClick: j
                    }, {
                        default: t(() => [ n("取消") ]),
                        _: 1
                    }), r(c, {
                        type: "primary",
                        onClick: Se
                    }, {
                        default: t(() => [ n("确定") ]),
                        _: 1
                    }) ]) ]),
                    _: 1
                }, 8, [ "modelValue" ]), r(va, {
                    ref_key: "addResourceDialogRef",
                    ref: ne,
                    onTableRefresh: a[6] || (a[6] = l => k(s(w)))
                }, null, 512), r(Je, {
                    ref_key: "ResourcePreviewRef",
                    ref: ce
                }, null, 512), r(ka, {
                    ref_key: "editorResourceNameDialogRef",
                    ref: ue,
                    onEditorNameDone: Te
                }, null, 512), r(xa, {
                    ref_key: "resourceSettingDialogRef",
                    ref: B,
                    onDone: a[7] || (a[7] = l => k(s(w))),
                    scene: s(U),
                    isfromTeaching: 1
                }, null, 8, [ "scene" ]), r(Ca, {
                    ref_key: "resourceStatisticsRef",
                    ref: Ie
                }, null, 512) ], 2);
            };
        }
    }, [ [ "__scopeId", "data-v-0a165e9d" ] ]);
});

export {
    Wa as __tla,
    we as default
};