import {
    _ as It,
    __tla as xt
} from "./index-8b41572c.js";

import {
    d as St,
    T as wt,
    u as Ct,
    h as Lt,
    r as u,
    e as V,
    b9 as C,
    al as Et,
    cf as Mt,
    f as Rt,
    j as Nt,
    o as a,
    c as s,
    t as n,
    v as b,
    B as v,
    a as t,
    C as k,
    l as T,
    D as c,
    k as l,
    A as mt,
    m as Pt,
    F as L,
    L as At,
    _ as Vt,
    J as Dt,
    K as qt,
    M as Bt,
    s as Ht,
    cn as Jt,
    R as Kt,
    S as Ot,
    __tla as Ut
} from "./index-6c08ea4c.js";

import {
    _ as zt,
    __tla as Ft
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import {
    g as Gt,
    h as Xt,
    __tla as Qt
} from "./task-be0f4a51.js";

import {
    D as Wt,
    __tla as Yt
} from "./dict-c5825220.js";

import pt, {
    __tla as Zt
} from "./index-95daf5a7.js";

import $t, {
    __tla as ta
} from "./index-6a1eede2.js";

import aa, {
    __tla as ea
} from "./setting-69158567.js";

import ra, {
    __tla as la
} from "./index-56d48dcc.js";

import ut, {
    __tla as _a
} from "./projectResource-5b5dc275.js";

import {
    g as oa,
    __tla as sa
} from "./group-7c00fc2a.js";

import na, {
    __tla as ca
} from "./memberIndex-de4d44cc.js";

import {
    f as dt,
    __tla as ia
} from "./formatTime-de6f1520.js";

import {
    _ as ma
} from "./_plugin-vue_export-helper-1b428a4d.js";

import "./color-a8b4eb58.js";

import {
    __tla as pa
} from "./index-71666e05.js";

import {
    __tla as ua
} from "./el-collapse-item-c8b76a0a.js";

import {
    __tla as da
} from "./index-81dbd56d.js";

import {
    __tla as ha
} from "./index-1024512a.js";

import "./tree-05ea8e09.js";

import {
    __tla as ya
} from "./DeptTag-1be092ce.js";

import {
    __tla as fa
} from "./index-ef4d146e.js";

import {
    __tla as va
} from "./taskItem-b5fc5dce.js";

import {
    __tla as ga
} from "./el-avatar-76960a98.js";

import {
    __tla as ba
} from "./viewDetail-8725097a.js";

import {
    __tla as ka
} from "./el-drawer-fca4d971.js";

import {
    __tla as Ta
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    __tla as ja
} from "./file-e038b35d.js";

import {
    __tla as Ia
} from "./index.es-14d10e28.js";

import {
    __tla as xa
} from "./project-file-a2b4fd07.js";

import {
    __tla as Sa
} from "./index-3a269d1c.js";

import {
    __tla as wa
} from "./upload-resource-2f073b5b.js";

import "./file.data-794ea5d0.js";

import "./file_题-23882218.js";

import {
    __tla as Ca
} from "./project-51c056b9.js";

import {
    __tla as La
} from "./member-bed692a1.js";

import {
    __tla as Ea
} from "./workItem-20fa3e3c.js";

import {
    __tla as Ma
} from "./devops-24948d31.js";

import {
    __tla as Ra
} from "./taskAllocation-5a545f2c.js";

import {
    __tla as Na
} from "./monitor-50ba803e.js";

import {
    __tla as Pa
} from "./project-user-445059df.js";

import {
    __tla as Aa
} from "./score-b548b686.js";

import {
    __tla as Va
} from "./index-e2094cc0.js";

import {
    __tla as Da
} from "./setting-4a9ecd0e.js";

import {
    __tla as qa
} from "./import-a90e1a02.js";

import {
    __tla as Ba
} from "./index-7c75bd27.js";

import {
    __tla as Ha
} from "./supplement-2a2cfc5f.js";

import {
    __tla as Ja
} from "./comment-6cb94c26.js";

import {
    __tla as Ka
} from "./UserManage-019582a4.js";

import "./file_HTML-65451e1b.js";

import {
    __tla as Oa
} from "./addFolder.vue_vue_type_script_setup_true_lang-2e8ce82a.js";

import "./validate-b72f006c.js";

import {
    __tla as Ua
} from "./addResource-cf3ece02.js";

import {
    __tla as za
} from "./index-c4ca0ced.js";

import {
    __tla as Fa
} from "./index-993301ca.js";

import {
    __tla as Ga
} from "./index-a34a73bc.js";

import {
    __tla as Xa
} from "./library-c2ecc5ca.js";

import {
    __tla as Qa
} from "./index-5adb716b.js";

import {
    __tla as Wa
} from "./contribution-dialog-71f2e7f6.js";

let ht, Ya = Promise.all([ (() => {
    try {
        return xt;
    } catch {}
})(), (() => {
    try {
        return Ut;
    } catch {}
})(), (() => {
    try {
        return Ft;
    } catch {}
})(), (() => {
    try {
        return Qt;
    } catch {}
})(), (() => {
    try {
        return Yt;
    } catch {}
})(), (() => {
    try {
        return Zt;
    } catch {}
})(), (() => {
    try {
        return ta;
    } catch {}
})(), (() => {
    try {
        return ea;
    } catch {}
})(), (() => {
    try {
        return la;
    } catch {}
})(), (() => {
    try {
        return _a;
    } catch {}
})(), (() => {
    try {
        return sa;
    } catch {}
})(), (() => {
    try {
        return ca;
    } catch {}
})(), (() => {
    try {
        return ia;
    } catch {}
})(), (() => {
    try {
        return pa;
    } catch {}
})(), (() => {
    try {
        return ua;
    } catch {}
})(), (() => {
    try {
        return da;
    } catch {}
})(), (() => {
    try {
        return ha;
    } catch {}
})(), (() => {
    try {
        return ya;
    } catch {}
})(), (() => {
    try {
        return fa;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return ga;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return ka;
    } catch {}
})(), (() => {
    try {
        return Ta;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return xa;
    } catch {}
})(), (() => {
    try {
        return Sa;
    } catch {}
})(), (() => {
    try {
        return wa;
    } catch {}
})(), (() => {
    try {
        return Ca;
    } catch {}
})(), (() => {
    try {
        return La;
    } catch {}
})(), (() => {
    try {
        return Ea;
    } catch {}
})(), (() => {
    try {
        return Ma;
    } catch {}
})(), (() => {
    try {
        return Ra;
    } catch {}
})(), (() => {
    try {
        return Na;
    } catch {}
})(), (() => {
    try {
        return Pa;
    } catch {}
})(), (() => {
    try {
        return Aa;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Da;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Ba;
    } catch {}
})(), (() => {
    try {
        return Ha;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Ka;
    } catch {}
})(), (() => {
    try {
        return Oa;
    } catch {}
})(), (() => {
    try {
        return Ua;
    } catch {}
})(), (() => {
    try {
        return za;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Ga;
    } catch {}
})(), (() => {
    try {
        return Xa;
    } catch {}
})(), (() => {
    try {
        return Qa;
    } catch {}
})(), (() => {
    try {
        return Wa;
    } catch {}
})() ]).then(async () => {
    let j, D, q, B, H, J, K, O, U, z, F, G, X, Q, W, Y, Z, $, tt, at, et, rt;
    j = S => (Kt("data-v-7094b40a"), S = S(), Ot(), S), D = {
        class: "project-preview",
        noBgColor: !0
    }, q = {
        class: "page-header"
    }, B = {
        class: "header-left"
    }, H = {
        class: "header-title"
    }, J = {
        key: 0,
        class: "header-right absolute",
        style: {
            right: "20px"
        }
    }, K = {
        key: 1,
        class: "header-right"
    }, O = {
        class: "header-bottom"
    }, U = {
        style: {
            "max-width": "50%"
        }
    }, z = j(() => n("span", {
        class: "label"
    }, "实践时间：", -1)), F = {
        class: "tooltip-content"
    }, G = j(() => n("span", {
        class: "label"
    }, "教师：", -1)), X = j(() => n("span", {
        class: "label"
    }, "完成方式：", -1)), Q = {
        class: "tooltip-content"
    }, W = j(() => n("span", {
        class: "label"
    }, "授课班级：", -1)), Y = {
        class: "center-box"
    }, Z = {
        style: {
            width: "100%",
            padding: "0 10px",
            "box-sizing": "border-box"
        }
    }, $ = [ "innerHTML" ], tt = {
        key: 2
    }, at = {
        key: 0
    }, et = {
        key: 2
    }, rt = {
        key: 3
    }, ht = ma(St({
        __name: "index",
        setup(S) {
            const y = wt(), E = Ct(), lt = Lt(), _t = u(), r = u({}), M = u({}), _ = u("first"), I = u(""), R = u(""), d = u(""), g = V(() => y.params.projectId), x = u("");
            C("completeType", d), C("environment", I), C("trialType", R), C("projectStatus", x);
            const f = V(() => lt.isStudent), ot = u(), N = u([]), P = async () => {
                const e = await Gt({
                    projectId: y.params.projectId
                }), i = e.taskStudentGroupList || e.taskStudentIndividualList, m = [];
                i && i.length > 0 && i.forEach(o => {
                    o.classify == 2 ? m.push(o) : o.classify == 1 && (o != null && o.children) && (o == null ? void 0 : o.children.length) > 0 && o.children.forEach(p => {
                        p.classify == 2 && m.push(p);
                    });
                }), N.value = m;
            };
            f.value && P();
            const st = (e, i) => N.value.filter(m => e(m) && (!i || i(m))), nt = V(() => {
                if (!f.value || [ "0" ].includes(r.value.environment) || x == 2 || N.value.length == 0) return 0;
                const e = p => p.leaderId == lt.getUser.id, i = st(p => p.taskStatus == 2, d.value == 2 ? e : null), m = st(p => p.taskStatus == 0 && [ 2, 3 ].includes(p.submitType), d.value == 2 ? e : null), o = x.value;
                return o == 3 ? i.length > 0 ? 2 : 1 : o == 4 ? m.length > 0 && i.length > 0 ? 2 : m.length > 0 ? 1 : 0 : 0;
            }), A = Et(), yt = () => {
                if (r.value.environment == 15) if (A.devopsMenus && A.devopsMenus.length > 0) {
                    let e = E.resolve({
                        name: A.devopsMenus[0].routeName,
                        params: {
                            classId: y.params.classId,
                            groupId: M.value.groupId,
                            projectId: g.value,
                            teachArrangementId: y.params.teachArrangementId,
                            teachCourseId: y.params.teachCourseId
                        }
                    });
                    window.open(e.href, "_blank");
                } else E.push("/404");
                if ([ 5, 10, 20, "5", "10", "20" ].indexOf(r.value.environment) >= 0) {
                    let e = E.resolve({
                        name: "ProjectActualCombatIndex",
                        query: {
                            environment: r.value.environment,
                            module: "2",
                            projectId: g.value
                        }
                    });
                    window.open(e.href, "_blank");
                }
            }, ft = () => {
                ot.value.open();
            }, vt = Mt(), gt = () => {
                document.visibilityState === "hidden" || document.visibilityState === "visible" && (_.value == "second" && _t.value.getTaskList(), 
                P());
            };
            return Rt(() => {
                f.value ? y.params.tab === "3" && (_.value = "second") : (y.params.tab === "3" && (_.value = "third"), 
                y.params.tab === "4" && (_.value = "forth")), vt.setInProject(!0), 
                Xt(g.value).then(e => {
                    r.value = e, I.value = e.environment, d.value = e.completeType, 
                    R.value = e.trialType, x.value = e.status;
                }), f.value && oa({
                    projectId: g.value
                }).then(e => {
                    M.value = e;
                }), f.value && document.addEventListener("visibilitychange", gt);
            }), (e, i) => {
                const m = At, o = zt, p = Vt, bt = Dt, ct = qt, h = Bt, kt = Ht, Tt = Jt, jt = It, it = Nt("show-tip");
                return a(), s("div", D, [ n("div", q, [ n("div", B, [ n("div", H, [ b(v(t(r).projectName) + " ", 1), t(r).direction ? (a(), 
                k(m, {
                    key: 0,
                    type: "primary",
                    style: {
                        margin: "0 10px"
                    }
                }, {
                    default: T(() => [ b(v(t(r).direction), 1) ]),
                    _: 1
                })) : c("", !0), t(r).level ? (a(), k(o, {
                    key: 1,
                    type: t(Wt).EXP_PROJECT_LEVEL,
                    value: t(r).level
                }, null, 8, [ "type", "value" ])) : c("", !0) ]) ]), t(nt) != 0 ? (a(), 
                s("div", J, [ n("div", {
                    class: "simulation-btn",
                    onClick: yt
                }, v(t(nt) == 2 ? "继续实战" : "开始实战"), 1) ])) : t(f) ? c("", !0) : (a(), 
                s("div", K, [ l(bt, {
                    color: "rgba(0, 0, 0, 0.1)",
                    onClick: ft
                }, {
                    default: T(() => [ l(p, {
                        class: "icon mr-2",
                        icon: "svg-icon:icon-type-setting"
                    }), b("设置 ") ]),
                    _: 1
                }) ])), n("div", O, [ n("div", U, [ z, b(v(t(dt)(t(r).publishTime)) + "～" + v(t(dt)(t(r).endTime)), 1) ]), mt((a(), 
                s("div", F, [ G, l(ct, {
                    content: t(r).teacherName
                }, {
                    default: T(() => [ b(v(t(r).teacherName ?? "--"), 1) ]),
                    _: 1
                }, 8, [ "content" ]) ])), [ [ it ] ]), n("div", null, [ X, b(v(t(r).completeType == 2 ? "分组完成" : t(r).completeType == 1 ? "个人完成" : "-- "), 1) ]), mt((a(), 
                s("div", Q, [ W, l(ct, {
                    content: t(r).teachClassName
                }, {
                    default: T(() => [ b(v(t(r).teachClassName ?? "--"), 1) ]),
                    _: 1
                }, 8, [ "content" ]) ])), [ [ it ] ]) ]) ]), l(jt, {
                    "outer-height": 91,
                    style: {
                        "padding-top": "0 !important"
                    }
                }, {
                    default: T(() => [ n("div", Y, [ l(kt, {
                        modelValue: t(_),
                        "onUpdate:modelValue": i[0] || (i[0] = w => Pt(_) ? _.value = w : null)
                    }, {
                        default: T(() => [ t(f) ? (a(), s(L, {
                            key: 0
                        }, [ l(h, {
                            label: "项目简介",
                            name: "first"
                        }), l(h, {
                            label: "项目任务",
                            name: "second"
                        }), l(h, {
                            label: "项目资料",
                            name: "third"
                        }), t(d) == 2 ? (a(), k(h, {
                            key: 0,
                            label: "成员",
                            name: "sixth"
                        })) : c("", !0) ], 64)) : (a(), s(L, {
                            key: 1
                        }, [ l(h, {
                            label: "任务管理",
                            name: "first"
                        }), l(h, {
                            label: "资料管理",
                            name: "second"
                        }), l(h, {
                            label: "评分管理",
                            name: "third"
                        }), l(h, {
                            label: "数据统计",
                            name: "forth"
                        }), t(d) == 2 ? (a(), k(h, {
                            key: 0,
                            label: "分组管理",
                            name: "fifth"
                        })) : c("", !0) ], 64)) ]),
                        _: 1
                    }, 8, [ "modelValue" ]), l(Tt, {
                        style: {
                            padding: "10px 10px 20px",
                            height: "calc(100% - 88px)"
                        }
                    }, {
                        default: T(() => {
                            var w;
                            return [ n("div", Z, [ t(f) ? (a(), s(L, {
                                key: 0
                            }, [ t(_) == "first" ? (a(), s("div", {
                                key: 0,
                                innerHTML: t(r).introduction,
                                class: "editor-content-view"
                            }, null, 8, $)) : c("", !0), t(_) == "third" ? (a(), 
                            k(ut, {
                                key: 1,
                                "project-id": t(g),
                                "page-type": "student",
                                calculatingTime: !0
                            }, null, 8, [ "project-id" ])) : c("", !0), t(_) == "second" ? (a(), 
                            s("div", tt, [ l(pt, {
                                ref_key: "stuTaskManageRef",
                                ref: _t,
                                environment: t(I),
                                completeType: t(d),
                                trialType: t(R),
                                projectStatus: t(x),
                                from: "stuTask",
                                onRefreshList: P
                            }, null, 8, [ "environment", "completeType", "trialType", "projectStatus" ]) ])) : c("", !0), t(_) == "sixth" ? (a(), 
                            k(na, {
                                key: 3,
                                groupId: ((w = t(M)) == null ? void 0 : w.groupId) || ""
                            }, null, 8, [ "groupId" ])) : c("", !0) ], 64)) : (a(), 
                            s(L, {
                                key: 1
                            }, [ t(_) == "first" ? (a(), s("div", at, [ l(pt, {
                                environment: t(I),
                                completeType: t(d),
                                from: "teaTask"
                            }, null, 8, [ "environment", "completeType" ]) ])) : c("", !0), t(_) == "second" ? (a(), 
                            k(ut, {
                                key: 1,
                                "project-id": t(g),
                                "page-type": "project"
                            }, null, 8, [ "project-id" ])) : c("", !0), t(_) == "fifth" ? (a(), 
                            s("div", et, [ l(ra, {
                                "project-id": t(g)
                            }, null, 8, [ "project-id" ]) ])) : c("", !0), t(_) == "third" ? (a(), 
                            s("div", rt, [ l($t, {
                                environment: t(I),
                                completeType: t(d)
                            }, null, 8, [ "environment", "completeType" ]) ])) : c("", !0) ], 64)) ]) ];
                        }),
                        _: 1
                    }) ]) ]),
                    _: 1
                }), l(aa, {
                    ref_key: "settingRef",
                    ref: ot
                }, null, 512) ]);
            };
        }
    }), [ [ "__scopeId", "data-v-7094b40a" ] ]);
});

export {
    Ya as __tla,
    ht as default
};