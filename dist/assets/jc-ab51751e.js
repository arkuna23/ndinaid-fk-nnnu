import {
    _ as He,
    __tla as Se
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    u as Fe,
    T as qe,
    r as b,
    U as Ee,
    f as Ae,
    o as u,
    c as m,
    a as e,
    z as Ze,
    k as a,
    l as i,
    v as c,
    t as s,
    B as h,
    C as Be,
    D as he,
    bo as Pe,
    K as Me,
    av as $e,
    aw as Le,
    J as Ke,
    _ as Oe,
    P as Ge,
    O as Je,
    bp as Qe,
    bq as We,
    Q as Xe,
    R as Ye,
    S as el,
    __tla as ll
} from "./index-6c08ea4c.js";

import {
    _ as al,
    __tla as tl
} from "./index-a34a73bc.js";

import {
    _ as sl,
    __tla as il
} from "./Editor-ef737d2a.js";

import {
    g as fe
} from "./file.data-794ea5d0.js";

import {
    S as rl,
    R as ol,
    __tla as nl
} from "./index-9567cbf6.js";

import {
    h as dl,
    q as ul,
    __tla as pl
} from "./file-e038b35d.js";

import {
    _ as ml
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as cl
} from "./index.es-14d10e28.js";

import {
    __tla as hl
} from "./project-file-a2b4fd07.js";

import "./file_题-23882218.js";

import {
    __tla as fl
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as _l
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

let _e, gl = Promise.all([ (() => {
    try {
        return Se;
    } catch {}
})(), (() => {
    try {
        return ll;
    } catch {}
})(), (() => {
    try {
        return tl;
    } catch {}
})(), (() => {
    try {
        return il;
    } catch {}
})(), (() => {
    try {
        return nl;
    } catch {}
})(), (() => {
    try {
        return pl;
    } catch {}
})(), (() => {
    try {
        return cl;
    } catch {}
})(), (() => {
    try {
        return hl;
    } catch {}
})(), (() => {
    try {
        return fl;
    } catch {}
})(), (() => {
    try {
        return _l;
    } catch {}
})() ]).then(async () => {
    let p, N, V, U, R, T, z, j, C, H, S, F, q, E, A, Z, B, P, M, $, L, K, O, G, J, Q, W, X, Y, ee, le, ae, te, se, ie, re, oe;
    p = y => (Ye("data-v-9f109e6a"), y = y(), el(), y), N = {
        id: "jc",
        style: {
            padding: "20px 0 0"
        }
    }, V = {
        key: 0,
        style: {
            padding: "20px 30px 30px"
        }
    }, U = p(() => s("div", {
        class: "_title",
        style: {
            "margin-bottom": "10px"
        }
    }, "基本信息", -1)), R = {
        style: {
            "font-weight": "normal"
        }
    }, T = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 60px)"
        }
    }, z = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 60px)"
        }
    }, j = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 80px)"
        }
    }, C = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 80px)"
        }
    }, H = p(() => s("div", {
        class: "_title",
        style: {
            margin: "20px 0 10px 0"
        }
    }, "教材简介", -1)), S = [ "innerHTML" ], F = {
        key: 1,
        style: {
            "padding-left": "20px"
        }
    }, q = p(() => s("div", {
        class: "_title",
        style: {
            margin: "20px 0 10px 0"
        }
    }, "教材链接", -1)), E = [ "href" ], A = {
        key: 3,
        style: {
            "padding-left": "20px"
        }
    }, Z = {
        key: 4,
        style: {
            margin: "20px 0"
        }
    }, B = p(() => s("div", {
        style: {
            "margin-bottom": "10px"
        },
        class: "_title"
    }, "教材附件", -1)), P = [ "src" ], M = {
        key: 5,
        style: {
            margin: "20px 0"
        }
    }, $ = [ p(() => s("div", {
        style: {
            "margin-bottom": "10px"
        },
        class: "_title"
    }, "教材附件", -1)), p(() => s("div", {
        style: {
            "padding-left": "20px"
        }
    }, "无", -1)) ], L = {
        key: 1,
        class: "neu-no-data",
        style: {
            height: "500px"
        }
    }, K = p(() => s("p", {
        style: {
            "margin-top": "10px"
        }
    }, "暂无数据", -1)), O = {
        key: 1,
        class: "height_box"
    }, G = {
        style: {
            padding: "0 30px"
        }
    }, J = p(() => s("div", {
        style: {
            display: "block",
            width: "100%",
            height: "20px"
        }
    }, null, -1)), Q = p(() => s("div", {
        class: "title_editor"
    }, "教材简介", -1)), W = {
        style: {
            width: "100%"
        }
    }, X = p(() => s("div", {
        style: {
            width: "100%",
            height: "1px"
        }
    }, null, -1)), Y = p(() => s("div", {
        style: {
            width: "100%",
            height: "20px"
        }
    }, null, -1)), ee = {
        key: 0,
        class: "title_editor"
    }, le = [ "src" ], ae = {
        key: 1,
        class: "title_editor"
    }, te = {
        key: 2,
        style: {
            width: "100%"
        }
    }, se = p(() => s("div", {
        class: "title_editor",
        style: {
            margin: "5px 0 0 0"
        }
    }, "是否允许下载附件", -1)), ie = {
        style: {
            "padding-left": "20px"
        }
    }, re = p(() => s("div", {
        style: {
            height: "40px"
        }
    }, null, -1)), oe = {
        style: {
            position: "absolute",
            bottom: "0px",
            width: "100%",
            "text-align": "center",
            "box-shadow": "0px -1px 0px 0px #DFDFDF",
            height: "70px",
            "line-height": "70px",
            "background-color": "#fff"
        }
    }, _e = ml({
        __name: "jc",
        emits: [ "isShowTipFun" ],
        setup(y, {
            emit: ge
        }) {
            Fe();
            const ne = qe(), de = b(), v = b(), l = b({
                materialDes: "",
                resourceId: "",
                isDownload: 0
            }), o = b({
                materialDes: null,
                resourceId: null,
                newResourceId: null,
                showNewResourceId: !1,
                isDownload: 0
            }), d = b({
                materialName: "",
                isbn: "",
                author: "",
                publishingHouse: "",
                publishingInfo: "",
                materialUrl: "",
                materialDesTxt: ""
            }), ue = b(), be = Ee({
                materialName: [ {
                    required: !0,
                    message: "教材名称不能为空",
                    trigger: "blur"
                } ],
                isbn: [ {
                    required: !0,
                    message: "ISBN不能为空",
                    trigger: "blur"
                } ],
                author: [ {
                    required: !0,
                    message: "作者不能为空",
                    trigger: "blur"
                } ],
                publishingHouse: [ {
                    required: !0,
                    message: "出版社不能为空",
                    trigger: "blur"
                } ],
                publishingInfo: [ {
                    required: !0,
                    message: "版次信息不能为空",
                    trigger: "blur"
                } ],
                materialUrl: [ {
                    pattern: /^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,
                    message: "教材链接不正确",
                    trigger: "blur"
                } ],
                materialDesTxt: [ {
                    max: 2e3,
                    message: "教材简介最多2000位字符",
                    trigger: "change"
                } ]
            }), xe = ge, w = b("preview"), ye = r => {
                d.value.materialDesTxt = r;
            }, pe = r => {
                de.value.operation(r.fileInfo);
            }, ve = () => {
                o.value.resourceId = null;
            }, we = () => {
                ue.value.validate(r => {
                    r && (o.value.showNewResourceId ? v.value.submitFile() : me());
                });
            }, me = r => {
                r && r.length && (o.value.newResourceId = r[0].eid), rl({
                    teachCourseId: ne.params.teachCourseId,
                    materialDes: o.value.materialDes,
                    isDownload: o.value.isDownload,
                    resourceId: o.value.newResourceId ? o.value.newResourceId : o.value.resourceId || "",
                    ...d.value
                }).then(t => {
                    Pe({
                        message: "操作成功",
                        type: "success"
                    }), w.value = "preview", I();
                });
            }, Ie = () => {
                o.value.showNewResourceId = !0;
            }, ke = () => {
                v.value.cancelUpload(), o.value.showNewResourceId = !1;
            }, De = () => {
                o.value.showNewResourceId = !1;
            }, I = () => {
                ol({
                    teachCourseId: ne.params.teachCourseId
                }).then(r => {
                    if (r && !r.author && !r.isbn && !r.materialDes && !r.materialName && !r.materialUrl && !r.publishingHouse && !r.publishingInfo && !r.resourceId) return l.value = null, 
                    !1;
                    l.value = r, xe("isShowTipFun", r), r.resourceId && ul(r.resourceId).then(t => {
                        l.value.fileInfo = t, l.value.fileInfo.resType = 3, l.value.resName = t.objectKey || t.name;
                        var f = l.value.resName.lastIndexOf(".");
                        l.value.resExt = "." + l.value.resName.substring(f + 1);
                    });
                });
            }, Ne = () => {
                w.value = "preview", o.value = {
                    materialDes: null,
                    resourceId: null,
                    newResourceId: null,
                    showNewResourceId: !1,
                    isDownload: 0
                }, d.value = {
                    materialName: "",
                    isbn: "",
                    author: "",
                    publishingHouse: "",
                    publishingInfo: "",
                    materialUrl: "",
                    materialDesTxt: ""
                }, I();
            };
            return Ae(() => {
                I();
            }), (r, t) => {
                const f = Me, x = $e, Ve = Le, k = Ke, Ue = Oe, _ = Ge, g = Je, Re = sl, Te = al, ce = Qe, ze = We, je = Xe, Ce = He;
                return u(), m("div", N, [ e(w) == "preview" ? (u(), m("div", {
                    key: 0,
                    style: {
                        padding: "0 30px"
                    },
                    class: Ze({
                        height_box: e(l)
                    })
                }, [ e(l) ? (u(), m("div", V, [ U, a(Ve, {
                    style: {
                        "font-size": "14px",
                        "padding-left": "20px"
                    }
                }, {
                    default: i(() => [ a(x, {
                        span: 24,
                        style: {
                            "margin-bottom": "10px",
                            "font-weight": "900"
                        }
                    }, {
                        default: i(() => [ c("教材名称： "), a(f, {
                            effect: "dark",
                            disabled: !e(l).materialName,
                            content: e(l).materialName,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: i(() => [ s("span", R, h(e(l).materialName || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), a(x, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: i(() => [ c("ISBN： "), a(f, {
                            effect: "dark",
                            disabled: !e(l).isbn,
                            content: e(l).isbn,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: i(() => [ s("span", T, h(e(l).isbn || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), a(x, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: i(() => [ c("作者： "), a(f, {
                            effect: "dark",
                            disabled: !e(l).author,
                            content: e(l).author,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: i(() => [ s("span", z, h(e(l).author || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), a(x, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: i(() => [ c("出版社： "), a(f, {
                            effect: "dark",
                            disabled: !e(l).publishingHouse,
                            content: e(l).publishingHouse,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: i(() => [ s("span", j, h(e(l).publishingHouse || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), a(x, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: i(() => [ c("版次信息： "), a(f, {
                            effect: "dark",
                            disabled: !e(l).publishingInfo,
                            content: e(l).publishingInfo,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: i(() => [ s("span", C, h(e(l).publishingInfo || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }) ]),
                    _: 1
                }), H, e(l).materialDes && e(l).materialDes != "<p><br></p>" ? (u(), 
                m("div", {
                    key: 0,
                    innerHTML: e(l).materialDes,
                    style: {
                        "padding-left": "20px",
                        "word-break": "break-all",
                        "white-space": "pre-wrap"
                    },
                    class: "editor-content-view wangEditorLinewrapPreView"
                }, null, 8, S)) : (u(), m("div", F, "无")), q, e(l).materialUrl ? (u(), 
                m("a", {
                    key: 2,
                    href: e(l).materialUrl,
                    style: {
                        display: "block",
                        "padding-left": "20px",
                        "text-decoration": "none",
                        color: "#245FE6",
                        "font-size": "14px"
                    },
                    target: "_blank"
                }, h(e(l).materialUrl), 9, E)) : (u(), m("div", A, "无")), e(l).resourceId ? (u(), 
                m("div", Z, [ B, s("img", {
                    src: e(fe)(e(l).resName + e(l).resExt),
                    alt: "",
                    style: {
                        width: "24px",
                        "margin-right": "5px",
                        "margin-left": "20px",
                        position: "relative",
                        top: "5px"
                    }
                }, null, 8, P), s("span", {
                    class: "file-name__span",
                    onClick: t[0] || (t[0] = n => pe(e(l)))
                }, h(e(l).resName), 1), e(l).isDownload ? (u(), Be(k, {
                    key: 0,
                    type: "primary",
                    plain: "",
                    round: "",
                    size: "small",
                    onClick: t[1] || (t[1] = n => {
                        return D = e(l), void dl(D.resourceId, D.resName);
                        var D;
                    })
                }, {
                    default: i(() => [ c("下载附件") ]),
                    _: 1
                })) : he("", !0) ])) : (u(), m("div", M, $)) ])) : (u(), m("div", L, [ a(Ue, {
                    icon: "svg-icon:bg-no-data-stu",
                    size: 200,
                    class: "",
                    style: {
                        height: "160px"
                    }
                }), K ])) ], 2)) : (u(), m("div", O, [ s("div", G, [ a(je, {
                    ref_key: "formRef",
                    ref: ue,
                    "label-position": "top",
                    "label-width": "90px",
                    inline: !0,
                    model: e(d),
                    rules: e(be)
                }, {
                    default: i(() => [ a(g, {
                        prop: "materialName",
                        label: "教材名称"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).materialName,
                            "onUpdate:modelValue": t[2] || (t[2] = n => e(d).materialName = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), a(g, {
                        prop: "isbn",
                        label: "ISBN"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).isbn,
                            "onUpdate:modelValue": t[3] || (t[3] = n => e(d).isbn = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), J, a(g, {
                        prop: "author",
                        label: "作者"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).author,
                            "onUpdate:modelValue": t[4] || (t[4] = n => e(d).author = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), a(g, {
                        prop: "publishingHouse",
                        label: "出版社"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).publishingHouse,
                            "onUpdate:modelValue": t[5] || (t[5] = n => e(d).publishingHouse = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), a(g, {
                        prop: "publishingInfo",
                        label: "版次信息"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).publishingInfo,
                            "onUpdate:modelValue": t[6] || (t[6] = n => e(d).publishingInfo = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), Q, s("div", W, [ a(Re, {
                        modelValue: e(o).materialDes,
                        "onUpdate:modelValue": t[7] || (t[7] = n => e(o).materialDes = n),
                        ltm: 10,
                        height: "150px",
                        onGetPlainText: ye
                    }, null, 8, [ "modelValue" ]) ]), X, a(g, {
                        prop: "materialDesTxt",
                        label: ""
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).materialDesTxt,
                            "onUpdate:modelValue": t[8] || (t[8] = n => e(d).materialDesTxt = n),
                            style: {
                                display: "none"
                            }
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), Y, a(g, {
                        prop: "materialUrl",
                        label: "教材链接"
                    }, {
                        default: i(() => [ a(_, {
                            modelValue: e(d).materialUrl,
                            "onUpdate:modelValue": t[9] || (t[9] = n => e(d).materialUrl = n),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), e(o).resourceId ? (u(), m("div", ee, [ c("附件      "), s("img", {
                        src: e(fe)(e(o).resName + e(o).resExt),
                        alt: "",
                        style: {
                            width: "24px",
                            "margin-right": "5px",
                            position: "relative",
                            top: "5px"
                        }
                    }, null, 8, le), s("span", {
                        class: "file-name__span",
                        onClick: t[10] || (t[10] = n => pe(e(o)))
                    }, h(e(o).resName), 1), c("  "), s("span", {
                        style: {
                            color: "#E14635",
                            cursor: "pointer"
                        },
                        onClick: ve
                    }, "删除") ])) : (u(), m("div", ae, "附件")), s("div", null, [ a(Te, {
                        ref_key: "NeuUploadRef",
                        ref: v,
                        accept: ".doc,.docx,.ppt,.pptx,.pdf",
                        alert: "总文件大小不得超过20M",
                        limit: 1,
                        size: 20,
                        onSuccess: me,
                        onError: ke,
                        onFileChange: Ie,
                        onFileRemove: De,
                        showUploadIcon: !0,
                        showTooltip: !1,
                        innerBoxTip: "请上传.doc,.docx,.ppt,.pptx,.pdf文件，大小不得超过20M",
                        style: {
                            width: "360px"
                        }
                    }, null, 512) ]), e(o).showNewResourceId || e(o).resourceId ? (u(), 
                    m("div", te, [ se, s("div", ie, [ a(ze, {
                        modelValue: e(o).isDownload,
                        "onUpdate:modelValue": t[11] || (t[11] = n => e(o).isDownload = n)
                    }, {
                        default: i(() => [ a(ce, {
                            value: 1,
                            size: "large"
                        }, {
                            default: i(() => [ c("是") ]),
                            _: 1
                        }), a(ce, {
                            value: 0,
                            size: "large"
                        }, {
                            default: i(() => [ c("否") ]),
                            _: 1
                        }) ]),
                        _: 1
                    }, 8, [ "modelValue" ]) ]) ])) : he("", !0) ]),
                    _: 1
                }, 8, [ "model", "rules" ]), re ]), s("div", oe, [ a(k, {
                    onClick: Ne
                }, {
                    default: i(() => [ c("取消") ]),
                    _: 1
                }), a(k, {
                    type: "primary",
                    onClick: we
                }, {
                    default: i(() => [ c("保存") ]),
                    _: 1
                }) ]) ])), a(Ce, {
                    ref_key: "ResourcePreviewRef",
                    ref: de
                }, null, 512) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-9f109e6a" ] ]);
});

export {
    gl as __tla,
    _e as default
};