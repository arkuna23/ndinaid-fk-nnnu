import {
    _ as Ue,
    __tla as Me
} from "./index-71666e05.js";

import {
    _ as Pe,
    __tla as je
} from "./ContentPage-f6bcc98e.js";

import {
    _ as Qe,
    __tla as Ae
} from "./index-e2094cc0.js";

import {
    _ as We,
    __tla as He
} from "./index-c4ca0ced.js";

import {
    _ as Ye,
    __tla as Ge
} from "./index-8b41572c.js";

import {
    d as Je,
    u as Ke,
    U as ce,
    e as _e,
    h as de,
    r as c,
    p as Ve,
    f as Xe,
    dW as O,
    o,
    c as u,
    a as r,
    k as l,
    l as i,
    t as f,
    v as x,
    D as F,
    F as Ze,
    y as $e,
    B as C,
    C as y,
    x as et,
    _ as tt,
    J as at,
    ad as lt,
    K as rt,
    ae as ot,
    __tla as st
} from "./index-6c08ea4c.js";

import {
    _ as it,
    __tla as nt
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import {
    _ as ct,
    __tla as _t
} from "./index-1024512a.js";

import {
    d as dt,
    __tla as pt
} from "./formatTime-de6f1520.js";

import {
    __tla as mt
} from "./file-e038b35d.js";

import {
    d as pe,
    D as L,
    __tla as ut
} from "./dict-c5825220.js";

import {
    a as me,
    c as ft,
    g as ue,
    t as fe,
    f as ye,
    __tla as yt
} from "./questionBank-6fe58de9.js";

import {
    Q as ht,
    __tla as kt
} from "./questionPreview-3c0f3206.js";

import {
    _ as wt,
    __tla as gt
} from "./addFolder.vue_vue_type_script_setup_true_lang-46a1302c.js";

import vt, {
    __tla as bt
} from "./moveDialog-7f64935b.js";

import {
    _ as xt,
    __tla as Ct
} from "./viewDatabase.vue_vue_type_script_setup_true_lang-a51e8548.js";

import {
    _ as Nt
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Tt
} from "./index-993301ca.js";

import "./color-a8b4eb58.js";

import "./tree-05ea8e09.js";

import {
    __tla as Ft
} from "./DeptTag-1be092ce.js";

import {
    __tla as Dt
} from "./index-ef4d146e.js";

import {
    __tla as It
} from "./type1-bb9ab50e.js";

import {
    __tla as Lt
} from "./type2-f7593207.js";

import {
    __tla as qt
} from "./type3-f0157d42.js";

import {
    __tla as zt
} from "./type4-e194cfc5.js";

import {
    __tla as St
} from "./type5-5cfc2694.js";

import {
    __tla as Et
} from "./type6-f24b6333.js";

import {
    __tla as Rt
} from "./type7-6a71ebde.js";

import {
    __tla as Bt
} from "./video-1d0dc730.js";

import {
    __tla as Ot
} from "./type20-1bb6de92.js";

import {
    __tla as Ut
} from "./type30-1635403c.js";

import {
    __tla as Mt
} from "./myQuestionBank-a9dcc9db.js";

import "./validate-b72f006c.js";

import {
    __tla as Pt
} from "./sqlDetail-6033fcff.js";

let he, jt = Promise.all([ (() => {
    try {
        return Me;
    } catch {}
})(), (() => {
    try {
        return je;
    } catch {}
})(), (() => {
    try {
        return Ae;
    } catch {}
})(), (() => {
    try {
        return He;
    } catch {}
})(), (() => {
    try {
        return Ge;
    } catch {}
})(), (() => {
    try {
        return st;
    } catch {}
})(), (() => {
    try {
        return nt;
    } catch {}
})(), (() => {
    try {
        return _t;
    } catch {}
})(), (() => {
    try {
        return pt;
    } catch {}
})(), (() => {
    try {
        return mt;
    } catch {}
})(), (() => {
    try {
        return ut;
    } catch {}
})(), (() => {
    try {
        return yt;
    } catch {}
})(), (() => {
    try {
        return kt;
    } catch {}
})(), (() => {
    try {
        return gt;
    } catch {}
})(), (() => {
    try {
        return bt;
    } catch {}
})(), (() => {
    try {
        return Ct;
    } catch {}
})(), (() => {
    try {
        return Tt;
    } catch {}
})(), (() => {
    try {
        return Ft;
    } catch {}
})(), (() => {
    try {
        return Dt;
    } catch {}
})(), (() => {
    try {
        return It;
    } catch {}
})(), (() => {
    try {
        return Lt;
    } catch {}
})(), (() => {
    try {
        return qt;
    } catch {}
})(), (() => {
    try {
        return zt;
    } catch {}
})(), (() => {
    try {
        return St;
    } catch {}
})(), (() => {
    try {
        return Et;
    } catch {}
})(), (() => {
    try {
        return Rt;
    } catch {}
})(), (() => {
    try {
        return Bt;
    } catch {}
})(), (() => {
    try {
        return Ot;
    } catch {}
})(), (() => {
    try {
        return Ut;
    } catch {}
})(), (() => {
    try {
        return Mt;
    } catch {}
})(), (() => {
    try {
        return Pt;
    } catch {}
})() ]).then(async () => {
    let U, M, P, j, Q, A, W, H, Y, G, J, K, V, X, Z;
    U = {
        key: 0
    }, M = {
        class: "top-box"
    }, P = {
        key: 0,
        class: "right btns-box"
    }, j = {
        class: "file-path"
    }, Q = [ "onClick" ], A = {
        key: 1,
        class: "path-item stop"
    }, W = {
        m: "4",
        style: {
            background: "#F9F9F9"
        }
    }, H = [ "onClick" ], Y = [ "title" ], G = {
        key: 1
    }, J = {
        key: 1
    }, K = {
        style: {
            "max-width": "100px",
            overflow: "hidden",
            "text-overflow": "ellipsis",
            "white-space": "nowrap",
            display: "inline-block"
        }
    }, V = {
        class: "items-left flex justify-left"
    }, X = {
        class: "bottom-box"
    }, Z = {
        class: "page-empty w-100%"
    }, he = Nt(Je({
        __name: "questionBank",
        setup(Qt) {
            const ke = Ke(), _ = ce({
                id: 0,
                folderName: "根目录",
                release: 1
            }), q = _e(() => de().isTeacher), z = c(), D = c(), S = c(), E = c(), R = c(), k = c([]);
            de();
            const $ = c(), p = Ve(), N = c([]), we = _e(() => [ {
                label: "题型",
                key: "questionType",
                type: "list",
                options: pe(L.QUESTION_TYPE)
            }, {
                label: "难易度",
                key: "difficult",
                type: "list",
                options: pe(L.QUESTION_DIFFICULT)
            } ]), I = c([]), v = c([]), ee = c(10);
            let te = c(10);
            const d = ce({
                questionType: "",
                difficult: "",
                keywords: "",
                page: 1,
                size: 10
            }), ge = c(!1);
            Xe(() => {
                b("", !0), me({
                    id: O(_.id),
                    release: 1
                }).then(e => {
                    N.value.push(...e);
                });
            });
            const ve = e => {
                $.value.handleOpen(e);
            }, ae = e => {
                e.folder ? (D.value.resetParamsFile(), _.id = e.id ?? "", _.folderName = e.showName, 
                b(_.id), le(_.id)) : k.value.indexOf(e.id) >= 0 ? k.value = k.value.filter(t => t.id === e.id) : k.value.push(e.id);
            }, le = (e = "") => {
                me({
                    id: O(e),
                    release: 1
                }).then(t => {
                    N.value = t;
                });
            }, B = e => {
                switch (e) {
                  case "addFolder":
                    z.value.openDialog({
                        title: "新建文件夹",
                        type: "add",
                        fatherObj: _
                    });
                    break;

                  case "tagManagement":
                    ke.push({
                        name: "LabelManagement",
                        params: {
                            subassembly: "questionLabel"
                        }
                    });
                }
            };
            function be({
                row: e,
                column: t,
                rowIndex: h,
                columnIndex: n
            }) {
                return (t.type === "expand" ? "is-folder" : "is-question") + " pointer";
            }
            const b = (e = "", t = !1) => {
                let h = {
                    parentId: O(e),
                    ...d,
                    page: d.page - 1,
                    sort: "folder,updateTime,desc"
                };
                ft(h).then(n => {
                    I.value = n.pageList.content, ee.value = n.pageList.totalElements, 
                    t && (te.value = n.pageList.totalElements), k.value = [];
                });
            };
            function xe(e) {
                le(), d.keywords = e.keywords || "", d.difficult = e.difficult || "", 
                d.questionType = e.questionType || "", b();
            }
            const Ce = () => {
                _.id = "0", D.value && D.value.resetParamsFile();
            }, re = async (e, t) => {
                switch (e) {
                  case "handlePublic":
                    await p.confirm("资源公开后将显示在校本资源库里，所有人均可查看和使用，且公开后该资源不可再修改或删除， 确定公开吗？", "提示");
                    let h = [ {
                        folder: t.folder,
                        id: t.id
                    } ];
                    fe(h).then(w => {
                        T(), p.success("公开成功");
                    });
                    break;

                  case "handleMove":
                    let n = await ue(1);
                    R.value.openDialog({
                        title: "移动到",
                        treeList: n,
                        ids: [ t.id ],
                        release: 1
                    });
                    break;

                  case "handleEdit":
                    t.folder && z.value.openDialog({
                        title: "编辑文件夹",
                        type: "edit",
                        editObject: t,
                        fatherObj: _
                    });
                }
            };
            function oe(e, t, h, n) {
                return h || "--";
            }
            function Ne(e) {
                v.value = [ ...e ], v.value.length === I.value.length ? E.value.checkBox = !0 : E.value.checkBox = !1;
            }
            const Te = async () => {
                await p.delConfirm("确定删除这些资源吗？删除后不可恢复！", "提示");
                let e = [];
                v.value.map(t => {
                    e.push({
                        id: t.id,
                        folder: t.folder
                    });
                }), ye(e).then(() => {
                    p.success("操作成功"), T();
                });
            }, Fe = async () => {
                await p.confirm("资源公开后将显示在校本资源库里，所有人均可查看和使用，且公开后该资源不可再修改或删除， 确定要公开这些资源吗？", "提示");
                let e = [];
                v.value.forEach(t => {
                    e.push({
                        folder: t.folder,
                        id: t.id
                    });
                }), fe(e).then(t => {
                    T(), p.success("公开成功");
                });
            }, De = async () => {
                let e = await ue(1);
                R.value.openDialog({
                    title: "移动到",
                    treeList: e,
                    ids: v.value.map(t => t.id),
                    release: 1
                });
            }, Ie = async () => {
                await p.confirm("确定下载这些资源吗？", "提示");
            }, Le = e => {
                e ? S.value.toggleAllSelection() : S.value.clearSelection();
            }, T = () => {
                b(_.id);
            }, qe = () => {
                d.page = 1, b(_.id, !0);
            };
            return (e, t) => {
                const h = ct, n = tt, w = at, m = lt, se = it, ze = rt, Se = ot, Ee = Ye, Re = We, Be = Qe, ie = Pe, Oe = Ue;
                return o(), u("div", null, [ r(te) > 0 ? (o(), u("div", U, [ l(ie, {
                    class: "cont-box"
                }, {
                    default: i(() => [ f("div", M, [ l(h, {
                        ref_key: "ComSearchRef",
                        ref: D,
                        searchList: r(we),
                        keywordsInfo: {
                            label: "试题题干/试题标签/文件夹名称",
                            key: "keywords"
                        },
                        onHandleSearch: xe,
                        onHandleReset: Ce,
                        class: "left"
                    }, null, 8, [ "searchList" ]), r(q) ? F("", !0) : (o(), u("div", P, [ l(w, {
                        type: "primary",
                        size: "large",
                        plain: "",
                        onClick: t[0] || (t[0] = a => B("addFolder"))
                    }, {
                        default: i(() => [ l(n, {
                            icon: "ep:plus",
                            class: "mr-5px"
                        }), x(" 新建文件夹 ") ]),
                        _: 1
                    }), l(w, {
                        type: "primary",
                        size: "large",
                        plain: "",
                        onClick: t[1] || (t[1] = a => B("tagManagement"))
                    }, {
                        default: i(() => [ l(n, {
                            icon: "svg-icon:tagManagement",
                            class: "mr-5px"
                        }), x(" 标签管理 ") ]),
                        _: 1
                    }) ])) ]), f("div", j, [ (o(!0), u(Ze, null, $e(r(N), (a, s) => (o(), 
                    u("div", {
                        key: a.id,
                        style: {
                            "max-width": "120px",
                            overflow: "hidden",
                            "white-space": "nowrap",
                            "text-overflow": "ellipsis"
                        }
                    }, [ s < r(N).length - 1 ? (o(), u("span", {
                        key: 0,
                        class: "path-item",
                        onClick: g => {
                            return (ne = a).folder = !0, void ae(ne);
                            var ne;
                        }
                    }, C(a.folderName), 9, Q)) : (o(), u("span", A, C(a.folderName), 1)), s < r(N).length - 1 ? (o(), 
                    y(n, {
                        key: 2,
                        icon: "ep:arrow-right-bold",
                        size: 10,
                        style: {
                            margin: "0 10px"
                        }
                    })) : F("", !0) ]))), 128)) ]), l(Ee, {
                        class: "center-box",
                        "no-pager": !1,
                        "outer-height": 102
                    }, {
                        default: i(() => [ l(Se, {
                            ref_key: "ResourceTableRef",
                            ref: S,
                            data: r(I),
                            height: "calc(100%)",
                            "header-row-class-name": "system-header",
                            "cell-class-name": be,
                            "expand-row-keys": r(k),
                            onSelectionChange: Ne,
                            "row-key": "id"
                        }, {
                            default: i(() => [ l(m, {
                                type: "selection",
                                width: "50"
                            }), l(m, {
                                type: "expand",
                                width: "20"
                            }, {
                                default: i(a => [ f("div", W, [ a.row.folder ? F("", !0) : (o(), 
                                y(ht, {
                                    key: 0,
                                    form: a.row.questionBody || {},
                                    onViewDatabase: ve
                                }, null, 8, [ "form" ])) ]) ]),
                                _: 1
                            }), l(m, {
                                label: "试题题干/文件夹名称",
                                key: "folderName",
                                prop: "folderName",
                                "min-width": "180px"
                            }, {
                                default: i(a => {
                                    var s;
                                    return [ f("div", {
                                        class: "file-name",
                                        onClick: g => ae(a.row)
                                    }, [ a.row.folder ? (o(), y(n, {
                                        key: 0,
                                        icon: "svg-icon:folder",
                                        size: 18,
                                        style: {
                                            "margin-right": "10px",
                                            "flex-shrink": "0"
                                        }
                                    })) : (o(), y(n, {
                                        key: 1,
                                        icon: "svg-icon:question",
                                        size: 18,
                                        style: {
                                            "margin-right": "10px",
                                            "flex-shrink": "0"
                                        }
                                    })), f("span", {
                                        class: "file-name__span",
                                        style: et({
                                            fontWeight: (s = r(k)) != null && s.includes(a.row.id) ? "bold" : "normal"
                                        }),
                                        title: a.row.showName
                                    }, C(a.row.showName), 13, Y) ], 8, H) ];
                                }),
                                _: 1
                            }), l(m, {
                                prop: "orderNum",
                                label: "题型",
                                width: "120"
                            }, {
                                default: i(a => {
                                    var s;
                                    return [ a.row.folder ? (o(), u("span", G, C("--"))) : (o(), 
                                    y(se, {
                                        key: 0,
                                        type: r(L).QUESTION_TYPE,
                                        value: ((s = a.row.questionBody) == null ? void 0 : s.questionType) || 0
                                    }, null, 8, [ "type", "value" ])) ];
                                }),
                                _: 1
                            }), l(m, {
                                prop: "deptName",
                                label: "难易度",
                                width: "80",
                                formatter: oe
                            }, {
                                default: i(a => {
                                    var s;
                                    return [ a.row.folder ? (o(), u("span", J, C("--"))) : (o(), 
                                    y(se, {
                                        key: 0,
                                        type: r(L).QUESTION_DIFFICULT,
                                        value: ((s = a.row.questionBody) == null ? void 0 : s.difficult) || 0
                                    }, null, 8, [ "type", "value" ])) ];
                                }),
                                _: 1
                            }), l(m, {
                                formatter: oe,
                                label: "所在文件夹",
                                prop: "belongToFolderName",
                                width: "100"
                            }, {
                                default: i(a => {
                                    var s;
                                    return [ l(ze, {
                                        class: "item",
                                        effect: "dark",
                                        content: (s = a.row.ancestorsFolderName) == null ? void 0 : s.replace(/,/g, "/"),
                                        placement: "top"
                                    }, {
                                        default: i(() => {
                                            var g;
                                            return [ f("span", K, C((g = a.row.belongToFolderName) == null ? void 0 : g.split(",").slice(-1)[0]), 1) ];
                                        }),
                                        _: 2
                                    }, 1032, [ "content" ]) ];
                                }),
                                _: 1
                            }), l(m, {
                                prop: "publisherName",
                                label: "公开人",
                                width: "170"
                            }), l(m, {
                                label: "公开时间",
                                prop: "publisherTime",
                                formatter: r(dt),
                                width: "170"
                            }, null, 8, [ "formatter" ]), r(q) ? F("", !0) : (o(), 
                            y(m, {
                                key: 0,
                                label: "操作",
                                width: "160",
                                fixed: "right"
                            }, {
                                default: i(a => [ f("div", V, [ l(w, {
                                    type: "primary",
                                    size: "small",
                                    link: "",
                                    onClick: s => re("handleMove", a.row)
                                }, {
                                    default: i(() => [ x(" 移动 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), l(w, {
                                    type: "primary",
                                    size: "small",
                                    link: "",
                                    onClick: s => re("handleEdit", a.row)
                                }, {
                                    default: i(() => [ x(" 编辑 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), l(w, {
                                    type: "danger",
                                    size: "small",
                                    link: "",
                                    onClick: s => (async g => {
                                        await p.delConfirm("确定删除该资源吗？删除后不可恢复！", "提示"), 
                                        ye([ {
                                            id: g.id,
                                            folder: g.folder
                                        } ]).then(() => {
                                            T(), p.success("操作成功");
                                        });
                                    })(a.row)
                                }, {
                                    default: i(() => [ x(" 删除 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]) ]) ]),
                                _: 1
                            })) ]),
                            _: 1
                        }, 8, [ "data", "expand-row-keys" ]) ]),
                        _: 1
                    }), f("div", X, [ l(Re, {
                        total: r(ee),
                        page: r(d).page,
                        "onUpdate:page": t[2] || (t[2] = a => r(d).page = a),
                        limit: r(d).size,
                        "onUpdate:limit": t[3] || (t[3] = a => r(d).size = a),
                        onPagination: t[4] || (t[4] = a => b())
                    }, null, 8, [ "total", "page", "limit" ]) ]), l(Be, {
                        ref_key: "SelectionButtonGroupRef",
                        ref: E,
                        "select-list": r(v),
                        "page-list": r(I),
                        btnList: [ "delete", "move" ],
                        checkBox: r(ge),
                        subject: "文件/文件夹",
                        onDelete: Te,
                        onMove: De,
                        onShare: Fe,
                        onDownload: Ie,
                        onSelectAll: Le
                    }, null, 8, [ "select-list", "page-list", "checkBox" ]) ]),
                    _: 1
                }) ])) : (o(), y(ie, {
                    key: 1,
                    class: "cont-box"
                }, {
                    default: i(() => [ f("div", Z, [ l(Oe, {
                        type: "resource",
                        msg: "暂无资源"
                    }), r(q) ? F("", !0) : (o(), y(w, {
                        key: 0,
                        type: "primary",
                        onClick: t[5] || (t[5] = a => B("addFolder")),
                        size: "large"
                    }, {
                        default: i(() => [ x(" 新建文件夹 "), l(n, {
                            class: "el-icon--right",
                            icon: "ep:plus",
                            style: {
                                "margin-left": "5px"
                            }
                        }) ]),
                        _: 1
                    })) ]) ]),
                    _: 1
                })), l(wt, {
                    ref_key: "AddFolderRef",
                    ref: z,
                    onRefresh: qe
                }, null, 512), l(vt, {
                    ref_key: "MoveDialogRef",
                    ref: R,
                    onRefresh: T
                }, null, 512), l(xt, {
                    ref_key: "viewDatabaseRef",
                    ref: $
                }, null, 512) ]);
            };
        }
    }), [ [ "__scopeId", "data-v-02b78b4e" ] ]);
});

export {
    jt as __tla,
    he as default
};