import {
    b8 as B,
    r as h,
    w as V,
    e as W,
    f as Z,
    o as p,
    c as I,
    t as ee,
    k as _,
    a as r,
    dX as te,
    H as S,
    c5 as ae,
    e0 as le,
    A as R,
    G as z,
    l as d,
    v as N,
    F as L,
    y as P,
    C as g,
    m as ue,
    D as x,
    z as oe,
    J as re,
    ab as ie,
    ac as se,
    O as ne,
    cK as ce,
    Q as _e,
    __tla as de
} from "./index-6c08ea4c.js";

import fe, {
    __tla as me
} from "./chooseTags-11285796.js";

import {
    Q as pe,
    __tla as ve
} from "./questionPreview-3c0f3206.js";

import {
    Q as he,
    __tla as qe
} from "./questionInfo-7ad6a9af.js";

import {
    d as $,
    D as j,
    __tla as ye
} from "./dict-c5825220.js";

import {
    _ as be
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Se
} from "./index-5adb716b.js";

import {
    __tla as ge
} from "./type1-bb9ab50e.js";

import {
    __tla as Qe
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import "./color-a8b4eb58.js";

import {
    __tla as Te
} from "./type2-f7593207.js";

import {
    __tla as ke
} from "./type3-f0157d42.js";

import {
    __tla as Ve
} from "./type4-e194cfc5.js";

import {
    __tla as Ie
} from "./type5-5cfc2694.js";

import {
    __tla as xe
} from "./type6-f24b6333.js";

import {
    __tla as we
} from "./type7-6a71ebde.js";

import {
    __tla as Ce
} from "./video-1d0dc730.js";

import {
    __tla as Ee
} from "./file-e038b35d.js";

import {
    __tla as Me
} from "./type20-1bb6de92.js";

import {
    __tla as Fe
} from "./type30-1635403c.js";

import {
    __tla as Ue
} from "./myQuestionBank-a9dcc9db.js";

import {
    __tla as Oe
} from "./type1-81e690fe.js";

import {
    __tla as De
} from "./editEditor-a03e6696.js";

import {
    __tla as Re
} from "./Editor-ef737d2a.js";

import {
    __tla as ze
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Ne
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import "./editEditor.vue_vue_type_style_index_0_scoped_bf777343_lang-f0d79ba2.js";

import {
    __tla as Le
} from "./type2-cee6fed1.js";

import {
    __tla as Pe
} from "./type3-da6f6f46.js";

import {
    __tla as $e
} from "./type4-0f2e1cd1.js";

import {
    __tla as je
} from "./type5-a6b47fc2.js";

import {
    __tla as Ae
} from "./type6-9fcada99.js";

import {
    __tla as Ge
} from "./type7-f25f20ee.js";

import {
    __tla as He
} from "./type30-8bfa018d.js";

import {
    __tla as Je
} from "./sqlInfo-6616efed.js";

import {
    __tla as Ke
} from "./sqlDetail-6033fcff.js";

import {
    __tla as Xe
} from "./type20-0744bc00.js";

import {
    __tla as Ye
} from "./questionBank-6fe58de9.js";

let A, Be = Promise.all([ (() => {
    try {
        return de;
    } catch {}
})(), (() => {
    try {
        return me;
    } catch {}
})(), (() => {
    try {
        return ve;
    } catch {}
})(), (() => {
    try {
        return qe;
    } catch {}
})(), (() => {
    try {
        return ye;
    } catch {}
})(), (() => {
    try {
        return Se;
    } catch {}
})(), (() => {
    try {
        return ge;
    } catch {}
})(), (() => {
    try {
        return Qe;
    } catch {}
})(), (() => {
    try {
        return Te;
    } catch {}
})(), (() => {
    try {
        return ke;
    } catch {}
})(), (() => {
    try {
        return Ve;
    } catch {}
})(), (() => {
    try {
        return Ie;
    } catch {}
})(), (() => {
    try {
        return xe;
    } catch {}
})(), (() => {
    try {
        return we;
    } catch {}
})(), (() => {
    try {
        return Ce;
    } catch {}
})(), (() => {
    try {
        return Ee;
    } catch {}
})(), (() => {
    try {
        return Me;
    } catch {}
})(), (() => {
    try {
        return Fe;
    } catch {}
})(), (() => {
    try {
        return Ue;
    } catch {}
})(), (() => {
    try {
        return Oe;
    } catch {}
})(), (() => {
    try {
        return De;
    } catch {}
})(), (() => {
    try {
        return Re;
    } catch {}
})(), (() => {
    try {
        return ze;
    } catch {}
})(), (() => {
    try {
        return Ne;
    } catch {}
})(), (() => {
    try {
        return Le;
    } catch {}
})(), (() => {
    try {
        return Pe;
    } catch {}
})(), (() => {
    try {
        return $e;
    } catch {}
})(), (() => {
    try {
        return je;
    } catch {}
})(), (() => {
    try {
        return Ae;
    } catch {}
})(), (() => {
    try {
        return Ge;
    } catch {}
})(), (() => {
    try {
        return He;
    } catch {}
})(), (() => {
    try {
        return Je;
    } catch {}
})(), (() => {
    try {
        return Ke;
    } catch {}
})(), (() => {
    try {
        return Xe;
    } catch {}
})(), (() => {
    try {
        return Ye;
    } catch {}
})() ]).then(async () => {
    let w;
    w = {
        class: "btns-box"
    }, A = be({
        __name: "questionItems",
        props: {
            modelValue: {
                type: Object,
                default: () => ({})
            },
            itemIndex: {
                type: Number,
                default: 0
            },
            length: {
                type: Number,
                default: 0
            },
            editQuestionId: {
                type: String,
                default: ""
            }
        },
        emits: [ "update:modelValue", "handleEdit", "handleMove", "viewDatabase" ],
        setup(G, {
            expose: H,
            emit: J
        }) {
            const v = J, {
                proxy: C
            } = B(), n = G, e = h({
                questionType: ""
            }), s = h({}), E = u => {
                v("viewDatabase", u);
            };
            V(() => s.value, () => {
                if (e.value.questionType === "4") {
                    let u = 0, t = s.value.answers || [];
                    if (t.length > 0) if (t.forEach(a => {
                        u += a.blankScore || 0;
                    }), u > 999) {
                        let a = Math.round(999 / t.length * 10) / 10 || .1;
                        t.forEach((i, l) => {
                            t.length === l + 1 ? (i.blankScore = Math.round(10 * (999 - l * a)) / 10, 
                            i.blankScore <= 0 && (i.blankScore = .1)) : i.blankScore = a;
                        });
                    } else e.value.questionScore = Math.round(10 * u) / 10;
                } else if ([ "10", "8" ].indexOf(e.value.questionType) >= 0) {
                    if (s.value.subQuestions && s.value.subQuestions.length > 0) {
                        let u = 0, t = s.value.subQuestions || [];
                        if (t.length > 0) {
                            let a = !0;
                            if (t.forEach(i => {
                                if (i.subQuestion.questionType === "4") {
                                    let l = 0, c = i.subQuestion.answers || [];
                                    if (c.length > 0) {
                                        if (c.forEach(m => {
                                            l += m.blankScore || 0;
                                        }), l > 999) return e.value.questionScore = 999, 
                                        T(), void (a = !1);
                                        i.subQuestion.questionScore = Math.round(10 * l) / 10;
                                    }
                                }
                                u += i.subQuestion.questionScore || .1;
                            }), !a) return;
                            if (u > 999) {
                                let i = Math.round(999 / t.length * 10) / 10 || .1;
                                t.forEach((l, c) => {
                                    t.length === c + 1 ? (l.subQuestion.questionScore = Math.round(10 * (999 - c * i)) / 10, 
                                    l.subQuestion.questionScore <= 0 && (l.subQuestion.questionScore = .1)) : l.subQuestion.questionScore = i;
                                });
                            } else e.value.questionScore = Math.round(10 * u) / 10;
                        }
                    }
                } else e.value.questionScore = e.value.questionScore || 0;
                v("update:modelValue", {
                    id: e.value.id,
                    questionType: e.value.questionType || "",
                    isCreate: e.value.isCreate,
                    difficult: e.value.difficult,
                    paperQuestion: {
                        ...s.value,
                        difficult: e.value.difficult,
                        questionType: e.value.questionType || "",
                        tags: e.value.tags
                    },
                    questionId: e.value.questionId,
                    questionSource: e.value.questionSource,
                    questionScore: e.value.questionScore || 0,
                    tags: e.value.tags
                });
            }, {
                deep: !0
            }), V(() => e.value, () => {
                s.value.questionScore = e.value.questionScore || 0;
            }, {
                deep: !0
            }), V(() => n.editQuestionId, u => {
                u === n.modelValue.id && k();
            });
            const f = W(() => e.value.id === n.editQuestionId), M = h({
                difficult: [ {
                    required: !0,
                    message: "请选择难易度",
                    trigger: [ "blur", "change" ]
                } ],
                questionType: [ {
                    required: !0,
                    message: "请选择试题类型",
                    trigger: [ "blur", "change" ]
                } ],
                questionScore: [ {
                    required: !0,
                    message: "请输入试题分数",
                    trigger: "blur"
                } ]
            }), Q = h(!1), K = h(), X = h(), q = h();
            function Y() {
                f.value && (Q.value = !1, s.value = {}, setTimeout(() => {
                    Q.value = !0, q.value && q.value.reset({});
                }, 1));
            }
            function F(u) {
                v("handleMove", u, n.itemIndex);
            }
            async function U(u) {
                u === "save" ? setTimeout(async () => {
                    let t = await C.$refs.questionFormRef.validate(), a = await C.$refs.questionForm1Ref.validate();
                    e.value.questionType && q.value && q.value.validateForm().then(() => {
                        if (t && a) {
                            let i = {
                                id: e.value.id || "",
                                difficult: e.value.difficult,
                                tags: e.value.tags || [],
                                isCreate: e.value.isCreate,
                                paperQuestion: {
                                    ...s.value,
                                    difficult: e.value.difficult,
                                    questionType: e.value.questionType || "",
                                    questionScore: e.value.questionScore || 0,
                                    tags: e.value.tags
                                },
                                questionType: e.value.questionType || "",
                                questionSource: e.value.questionSource,
                                questionId: e.value.questionId,
                                questionScore: e.value.questionScore || 0
                            };
                            v("update:modelValue", i), O(u), setTimeout(() => {
                                k();
                            }, 1);
                        }
                    }).catch(() => {});
                }, 1) : O(u);
            }
            function T(u) {
                const t = u === "first";
                if (s.value.questionScore = e.value.questionScore, e.value.paperQuestion.questionScore = e.value.questionScore, 
                !t) {
                    if (e.value.questionType === "4") {
                        let a = s.value.answers || [];
                        if (a.length > 0) {
                            let i = Math.round((e.value.questionScore || 0) / a.length * 10) / 10 || .1;
                            a.forEach((l, c) => {
                                c + 1 === a.length ? (l.blankScore = Math.round(10 * ((e.value.questionScore || 0) - c * i)) / 10, 
                                l.blankScore <= 0 && (l.blankScore = .1)) : l.blankScore = i;
                            });
                        }
                    } else if ([ "10", "8" ].indexOf(e.value.questionType) >= 0) {
                        let a = s.value.subQuestions || [];
                        if (a.length > 0) {
                            let i = Math.round((e.value.questionScore || 0) / a.length * 10) / 10 || .1;
                            a.forEach((l, c) => {
                                if (c + 1 === a.length ? (l.subQuestion.questionScore = Math.round(10 * ((e.value.questionScore || 0) - c * i)) / 10, 
                                l.subQuestion.questionScore <= 0 && (l.subQuestion.questionScore = .1)) : l.subQuestion.questionScore = i, 
                                l.subQuestion.questionType === "4") {
                                    let m = l.subQuestion.answers || [], y = 0;
                                    if (m.length > 0) {
                                        let o = Math.round((l.subQuestion.questionScore || 0) / m.length * 10) / 10 || .1;
                                        m.forEach((b, D) => {
                                            D + 1 === m.length ? (b.blankScore = Math.round(10 * ((l.subQuestion.questionScore || 0) - D * o)) / 10, 
                                            b.blankScore <= 0 && (b.blankScore = .1)) : b.blankScore = o, 
                                            y += b.blankScore;
                                        });
                                    }
                                    l.subQuestion.questionScore = y;
                                }
                            });
                        }
                    }
                    v("update:modelValue", {
                        id: e.value.id || "",
                        difficult: e.value.difficult,
                        tags: e.value.tags || [],
                        isCreate: e.value.isCreate,
                        paperQuestion: {
                            ...s.value,
                            difficult: e.value.difficult,
                            questionType: e.value.questionType || "",
                            questionScore: e.value.questionScore || 0,
                            tags: e.value.tags
                        },
                        questionType: e.value.questionType || "",
                        questionSource: e.value.questionSource,
                        questionId: e.value.questionId,
                        questionScore: e.value.questionScore || 0
                    });
                }
            }
            function O(u) {
                v("handleEdit", u, e.value.id);
            }
            function k() {
                var u, t, a;
                e.value = {
                    ...n.modelValue,
                    questionScore: ((u = n.modelValue.paperQuestion) == null ? void 0 : u.questionScore) || 0,
                    difficult: (t = n.modelValue.paperQuestion) == null ? void 0 : t.difficult,
                    tags: (a = n.modelValue.paperQuestion) == null ? void 0 : a.tags
                }, s.value = {
                    ...e.value.paperQuestion
                }, Q.value = !0;
            }
            return H({
                initEditForm: k
            }), Z(() => {
                var u, t, a;
                e.value = {
                    ...n.modelValue,
                    questionScore: ((u = n.modelValue.paperQuestion) == null ? void 0 : u.questionScore) || 0,
                    difficult: (t = n.modelValue.paperQuestion) == null ? void 0 : t.difficult,
                    tags: (a = n.modelValue.paperQuestion) == null ? void 0 : a.tags
                }, s.value = {
                    ...e.value.paperQuestion
                }, T("first");
            }), (u, t) => {
                const a = re, i = ie, l = se, c = ne, m = ce, y = _e;
                return p(), I("div", {
                    class: oe([ "question-item px-5 pt-3 pb-2", f.value || !n.editQuestionId ? "is-edit" : "" ])
                }, [ ee("div", w, [ _(a, {
                    icon: r(te),
                    size: "small",
                    disabled: n.itemIndex === 0,
                    circle: "",
                    onClick: t[0] || (t[0] = S(o => F("prev"), [ "prevent" ]))
                }, null, 8, [ "icon", "disabled" ]), _(a, {
                    icon: r(ae),
                    size: "small",
                    disabled: n.itemIndex === n.length - 1,
                    circle: "",
                    onClick: t[1] || (t[1] = S(o => F("next"), [ "prevent" ]))
                }, null, 8, [ "icon", "disabled" ]), _(a, {
                    class: "delete-btn",
                    icon: r(le),
                    size: "small",
                    circle: "",
                    onClick: t[2] || (t[2] = S(o => {
                        v("handleMove", "remove", n.itemIndex);
                    }, [ "prevent" ]))
                }, null, 8, [ "icon" ]), R(_(a, {
                    type: "primary",
                    onClick: t[3] || (t[3] = o => U("save"))
                }, {
                    default: d(() => [ N("确定") ]),
                    _: 1
                }, 512), [ [ z, f.value ] ]), R(_(a, {
                    type: "primary",
                    plain: "",
                    onClick: t[4] || (t[4] = o => U("edit")),
                    disabled: !!n.editQuestionId
                }, {
                    default: d(() => [ N("编辑") ]),
                    _: 1
                }, 8, [ "disabled" ]), [ [ z, !f.value ] ]) ]), _(y, {
                    ref_key: "questionFormRef",
                    ref: K,
                    inline: !0,
                    class: "pl-3 question-form",
                    model: r(e),
                    rules: r(M),
                    onSubmit: t[7] || (t[7] = S(() => {}, [ "prevent" ])),
                    "label-width": "80px"
                }, {
                    default: d(() => [ _(c, {
                        label: "试题类型",
                        prop: "questionType"
                    }, {
                        default: d(() => [ _(l, {
                            modelValue: r(e).questionType,
                            "onUpdate:modelValue": t[5] || (t[5] = o => r(e).questionType = o),
                            placeholder: "请选择",
                            clearable: "",
                            style: {
                                width: "200px"
                            },
                            onChange: Y,
                            disabled: !f.value
                        }, {
                            default: d(() => [ (p(!0), I(L, null, P(r($)(r(j).QUESTION_TYPE), o => (p(), 
                            g(i, {
                                key: o.value,
                                label: o.label,
                                value: o.value
                            }, null, 8, [ "label", "value" ]))), 128)) ]),
                            _: 1
                        }, 8, [ "modelValue", "disabled" ]) ]),
                        _: 1
                    }), _(c, {
                        label: "试题分数",
                        prop: "questionScore"
                    }, {
                        default: d(() => [ _(m, {
                            modelValue: r(e).questionScore,
                            "onUpdate:modelValue": t[6] || (t[6] = o => r(e).questionScore = o),
                            placeholder: "请输入",
                            onChange: T,
                            style: {
                                width: "100px"
                            },
                            step: 1,
                            precision: 1,
                            min: .1,
                            max: 999,
                            title: "",
                            "step-strictly": !1,
                            "controls-position": "right"
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }) ]),
                    _: 1
                }, 8, [ "model", "rules" ]), r(e).questionType && r(Q) && f.value ? (p(), 
                g(he, {
                    key: 0,
                    class: "question-info px-5",
                    ref_key: "questionInfoRef",
                    ref: q,
                    type: r(e).questionType,
                    inLibrary: !0,
                    isEdit: !r(e).isCreate && f.value,
                    form: r(s),
                    "onUpdate:form": t[8] || (t[8] = o => ue(s) ? s.value = o : null),
                    onViewDatabase: E
                }, null, 8, [ "type", "isEdit", "form" ])) : x("", !0), f.value ? x("", !0) : (p(), 
                g(pe, {
                    key: 1,
                    form: r(s),
                    inLibrary: !0,
                    onViewDatabase: E
                }, null, 8, [ "form" ])), f.value ? (p(), g(y, {
                    key: 2,
                    ref_key: "questionForm1Ref",
                    ref: X,
                    inline: !0,
                    class: "question-form1",
                    model: r(e),
                    rules: r(M),
                    onSubmit: t[11] || (t[11] = S(() => {}, [ "prevent" ])),
                    "label-width": "80px"
                }, {
                    default: d(() => [ _(c, {
                        label: "难易度",
                        prop: "difficult"
                    }, {
                        default: d(() => [ _(l, {
                            modelValue: r(e).difficult,
                            "onUpdate:modelValue": t[9] || (t[9] = o => r(e).difficult = o),
                            placeholder: "请选择",
                            clearable: "",
                            style: {
                                width: "200px"
                            }
                        }, {
                            default: d(() => [ (p(!0), I(L, null, P(r($)(r(j).QUESTION_DIFFICULT), o => (p(), 
                            g(i, {
                                key: o.value,
                                label: o.label,
                                value: o.value
                            }, null, 8, [ "label", "value" ]))), 128)) ]),
                            _: 1
                        }, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), _(c, {
                        label: "试题标签",
                        prop: "tags",
                        style: {
                            width: "100%",
                            "margin-right": "0"
                        }
                    }, {
                        default: d(() => [ _(fe, {
                            modelValue: r(e).tags,
                            "onUpdate:modelValue": t[10] || (t[10] = o => r(e).tags = o)
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }) ]),
                    _: 1
                }, 8, [ "model", "rules" ])) : x("", !0) ], 2);
            };
        }
    }, [ [ "__scopeId", "data-v-81004757" ] ]);
});

export {
    Be as __tla,
    A as default
};