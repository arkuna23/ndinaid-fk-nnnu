import {
    _ as Ya,
    __tla as Za
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    u as Ja,
    T as Ka,
    r as n,
    p as Oa,
    U as ma,
    b9 as $a,
    f as Qa,
    o,
    c as d,
    t as l,
    a as u,
    k as r,
    l as p,
    F as _a,
    y as ya,
    v as _,
    B as y,
    D as m,
    z as Wa,
    C as R,
    A as Xa,
    G as ae,
    bo as ee,
    _ as te,
    ab as se,
    ac as le,
    ak as re,
    K as oe,
    L as ne,
    Y as ce,
    J as ie,
    Z as de,
    R as ue,
    S as pe,
    E as me,
    __tla as _e
} from "./index-6c08ea4c.js";

import {
    _ as ye,
    __tla as fe
} from "./index-81dbd56d.js";

import {
    q as he,
    f as Ce,
    u as ge,
    __tla as ve
} from "./catalog-6352045f.js";

import {
    g as ke,
    __tla as Ie
} from "./index-b22fcdff.js";

import we, {
    __tla as xe
} from "./addTeach-52c31c64.js";

import be, {
    __tla as Te
} from "./addResourceDialog-18001587.js";

import Ae, {
    __tla as Re
} from "./publishStuMaterial-aa5964b5.js";

import {
    g as De
} from "./file.data-7b6aa8ed.js";

import {
    __tla as Ne
} from "./file-e038b35d.js";

import Se, {
    __tla as Le
} from "./editorResourceNameDialog-75607cd1.js";

import ze, {
    __tla as He
} from "./resourceSetting-8d4d06ac.js";

import "./index-eb0ca811.js";

import {
    _ as Ve
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Pe
} from "./index-c4ca0ced.js";

import {
    __tla as Ee
} from "./index-8b41572c.js";

import {
    v as Be,
    g as Fe,
    a as Ue,
    __tla as je
} from "./index-43a52aa3.js";

import {
    __tla as qe
} from "./index.es-14d10e28.js";

import {
    __tla as Ge
} from "./project-file-a2b4fd07.js";

import {
    __tla as Me
} from "./index-13c88727.js";

import {
    __tla as Ye
} from "./index-9567cbf6.js";

import "./tree-05ea8e09.js";

import {
    __tla as Ze
} from "./index-ef4d146e.js";

import {
    __tla as Je
} from "./index-1024512a.js";

import {
    __tla as Ke
} from "./DeptTag-1be092ce.js";

import "./step1Banner-550d8194.js";

import "./file_HTML-65451e1b.js";

import "./file.data-794ea5d0.js";

import "./file_题-23882218.js";

import {
    __tla as Oe
} from "./formatTime-de6f1520.js";

import {
    __tla as $e
} from "./library-c2ecc5ca.js";

import {
    __tla as Qe
} from "./resourceSetting-939e80bf.js";

import "./step2Banner-4d214de6.js";

import {
    __tla as We
} from "./index-993301ca.js";

import "./teachingResourceIcon7-1c1a8557.js";

import "./install-67fb146c.js";

import "./install-0c30d2d2.js";

let fa, Xe = Promise.all([ (() => {
    try {
        return Za;
    } catch {}
})(), (() => {
    try {
        return _e;
    } catch {}
})(), (() => {
    try {
        return fe;
    } catch {}
})(), (() => {
    try {
        return ve;
    } catch {}
})(), (() => {
    try {
        return Ie;
    } catch {}
})(), (() => {
    try {
        return xe;
    } catch {}
})(), (() => {
    try {
        return Te;
    } catch {}
})(), (() => {
    try {
        return Re;
    } catch {}
})(), (() => {
    try {
        return Ne;
    } catch {}
})(), (() => {
    try {
        return Le;
    } catch {}
})(), (() => {
    try {
        return He;
    } catch {}
})(), (() => {
    try {
        return Pe;
    } catch {}
})(), (() => {
    try {
        return Ee;
    } catch {}
})(), (() => {
    try {
        return je;
    } catch {}
})(), (() => {
    try {
        return qe;
    } catch {}
})(), (() => {
    try {
        return Ge;
    } catch {}
})(), (() => {
    try {
        return Me;
    } catch {}
})(), (() => {
    try {
        return Ye;
    } catch {}
})(), (() => {
    try {
        return Ze;
    } catch {}
})(), (() => {
    try {
        return Je;
    } catch {}
})(), (() => {
    try {
        return Ke;
    } catch {}
})(), (() => {
    try {
        return Oe;
    } catch {}
})(), (() => {
    try {
        return $e;
    } catch {}
})(), (() => {
    try {
        return Qe;
    } catch {}
})(), (() => {
    try {
        return We;
    } catch {}
})() ]).then(async () => {
    let h, L, z, H, V, P, E, B, F, U, j, q, G, M, Y, Z, J, K, O, $, Q, W, X, aa, ea, ta, sa, la, ra;
    h = T => (ue("data-v-929c38d5"), T = T(), pe(), T), L = {
        id: "jxmb",
        style: {
            padding: "20px 0 0"
        }
    }, z = {
        style: {
            padding: "0 20px"
        },
        class: "height_box"
    }, H = {
        key: 0,
        class: "neu-no-data",
        style: {
            height: "500px"
        }
    }, V = h(() => l("p", {
        class: ""
    }, "暂无数据", -1)), P = {
        key: 1,
        class: "content"
    }, E = {
        class: "search-params"
    }, B = h(() => l("div", {
        style: {
            clear: "both"
        }
    }, null, -1)), F = {
        class: "right",
        style: {
            display: "flex",
            "font-size": "12px",
            "align-items": "center",
            "margin-top": "8px"
        }
    }, U = {
        style: {
            color: "#333",
            "font-size": "12px",
            "line-height": "30px"
        }
    }, j = h(() => l("span", {
        style: {
            display: "inline-block",
            "margin-left": "30px"
        }
    }, "仅查看计入考核任务", -1)), q = {
        class: "content-tree"
    }, G = {
        class: "custom-node"
    }, M = {
        class: "node-label"
    }, Y = [ "src" ], Z = {
        key: 1,
        class: "em-class"
    }, J = {
        key: 2,
        class: "line"
    }, K = {
        key: 3,
        style: {
            display: "flex"
        },
        class: "ml-10px"
    }, O = {
        class: "class-detail"
    }, $ = h(() => l("span", null, "开放时间：", -1)), Q = h(() => l("span", null, "截止时间：", -1)), 
    W = {
        class: "node-details"
    }, X = {
        style: {
            display: "flex"
        }
    }, aa = h(() => l("span", null, "状态：", -1)), ea = {
        class: "ml-8px",
        style: {
            color: "#666"
        }
    }, ta = {
        class: "distribute"
    }, sa = {
        key: 0
    }, la = {
        key: 1
    }, ra = {
        key: 2
    }, fa = Ve({
        __name: "catalog",
        emits: [ "isShowTipFun" ],
        setup(T, {
            emit: ha
        }) {
            const Ca = Ja(), c = Ka();
            n(!1);
            const ga = ha;
            Oa(), n(!1);
            const va = n(null), ka = () => {
                ga("tableRefresh"), closeDialog();
            };
            n(!1);
            const Ia = [ {
                label: "资料",
                value: 1
            }, {
                label: "测试",
                value: 2
            }, {
                label: "作业",
                value: 3
            }, {
                label: "项目",
                value: 4
            }, {
                label: "测试",
                value: 5
            } ], C = ma({
                sourceType: "",
                isAssess: !1,
                isReview: !1
            }), k = ma({
                completionProgress: "",
                finishNum: 0,
                resNum: 0
            }), wa = () => {
                g();
            }, g = async () => {
                const a = await ke({
                    currentClassId: c.params.classId,
                    teachCourseId: c.params.teachCourseId,
                    sourceType: C.sourceType,
                    isAssess: C.isAssess ? "1" : "",
                    isReview: C.isReview ? "1" : ""
                });
                D.value = (a == null ? void 0 : a.treeList) || [], Object.keys(k).forEach(t => k[t] = a == null ? void 0 : a[t]);
            }, D = n([]), xa = () => {}, oa = n(null), ba = n(null), Ta = n(null), Aa = n(null), Ra = n(""), na = n(null), N = [ {
                name: "未开始",
                code: "0",
                color: "#CCCCCC",
                percentage: 100
            }, {
                name: "进行中",
                code: "1",
                color: "#63D90A",
                percentage: 50
            }, {
                name: "已完成",
                code: "2",
                color: "#63D90A",
                percentage: 100
            } ], ca = [ {
                name: "未开始",
                code: "2",
                tag: "info"
            }, {
                name: "进行中",
                code: "3",
                tag: "success"
            }, {
                name: "已截止",
                code: "4",
                tag: "info"
            } ], I = ({
                list: a,
                listAttrCode: t,
                rawAttrCode: s = 1
            }) => {
                var v;
                return (v = a.filter(S => S[t] === (s == null ? void 0 : s.toString()))) == null ? void 0 : v.pop();
            }, Da = () => {
                g();
            }, Na = n(null), Sa = n(null), A = n(null), La = async ({
                type: a,
                params: t
            }) => {
                const s = {
                    quickGenerate: () => {
                        A.value = za;
                    },
                    manualAdd: () => {
                        A.value = Ha;
                    },
                    editCatalog: () => {
                        A.value = Va;
                    },
                    default: () => {}
                };
                (s[a] || s.default)(), await A.value({
                    params: t
                }), ee.success("操作成功"), oa.value.handleClose(), g();
            }, za = async ({
                params: a
            }) => {
                const {
                    level: t,
                    level1Num: s,
                    level2Num: f,
                    level3Num: v
                } = a;
                return await he({
                    teachCourseId: c.params.teachCourseId,
                    level: t,
                    level1Num: s,
                    level2Num: f,
                    level3Num: v
                });
            }, Ha = async ({
                params: a
            }) => {
                const t = {
                    id: "",
                    teachCourseId: c.params.teachCourseId,
                    parentId: a.parentId,
                    ancestors: a.ancestors,
                    name: a.name,
                    studyType: a.studyType,
                    classHours: a.classHours,
                    sort: a.sort
                };
                return await Ce(t);
            }, Va = async ({
                params: a
            }) => await ge({
                ...na.value,
                name: a.name
            });
            $a("tableColumnList", [ {
                prop: "name",
                label: "学生姓名"
            }, {
                prop: "code",
                label: "学生学号"
            } ]);
            const Pa = async ({
                node: a,
                data: t
            }) => {
                const s = (t == null ? void 0 : t.id) || "";
                await (async ({
                    resId: f
                }) => await Ue({
                    teachCourseId: c.params.teachCourseId,
                    currentClassId: c.params.classId,
                    resId: f
                }))({
                    resId: s
                }), t.resType === 6 ? window.open(t.resLink, "_blank") : Ca.push({
                    name: "studyMaterialIndex",
                    params: {
                        teachCourseId: c.params.teachCourseId,
                        classId: c.params.classId,
                        teachArrangementId: c.params.teachArrangementId,
                        resId: s
                    }
                });
            }, w = ({
                node: a,
                data: t
            }) => {
                const s = {
                    1: async () => {
                        await Ea({
                            data: t
                        }), Pa({
                            node: a,
                            data: t
                        });
                    },
                    default: () => {}
                };
                (s[t == null ? void 0 : t.type] || s.default)();
            }, Ea = async ({
                data: a
            }) => {
                const t = await Be({
                    teachCourseId: c.params.teachCourseId,
                    currentClassId: c.params.classId,
                    resId: a.id
                }), s = {
                    2: "当前学习任务未到开始时间，暂无法学习！",
                    4: "当前学习任务已到截止时间，无法继续学习！",
                    default: "资源不可用，请检查后重试！"
                };
                if (t.status == 3) await Ba({
                    data: a
                }); else {
                    const f = s[t.status] || s.default;
                    me.alert(`${f}`, "提示", {
                        confirmButtonText: "确认"
                    }).then(v => {
                        window.close();
                    });
                }
                return t;
            }, Ba = async ({
                data: a
            }) => await Fe({
                teachCourseId: c.params.teachCourseId,
                currentClassId: c.params.classId,
                resId: a.id
            }), Fa = a => {
                const t = {
                    1: () => {
                        var s;
                        return [ 3, 4, 7 ].includes(a.resType) && ((s = a == null ? void 0 : a.resCtl) == null ? void 0 : s.isDownload) || a.resType == 5;
                    },
                    default: () => !1
                };
                return (t[a == null ? void 0 : a.type] || t.default)();
            };
            return Qa(() => {
                g();
            }), (a, t) => {
                const s = te, f = se, v = le, S = ye, Ua = re, ia = oe, ja = ne, qa = ce, x = ie, Ga = de, Ma = Ya;
                return o(), d("div", L, [ l("div", z, [ u(D).length ? (o(), d("div", P, [ l("div", E, [ r(v, {
                    size: "large",
                    modelValue: u(C).sourceType,
                    "onUpdate:modelValue": t[0] || (t[0] = e => u(C).sourceType = e),
                    placeholder: "全部任务",
                    onChange: wa,
                    clearable: ""
                }, {
                    default: p(() => [ (o(), d(_a, null, ya(Ia, e => r(f, {
                        key: e.key,
                        label: e.label,
                        value: e.value
                    }, null, 8, [ "label", "value" ])), 64)) ]),
                    _: 1
                }, 8, [ "modelValue" ]) ]), B, l("div", F, [ _("任务完成进度    "), r(S, {
                    percentage: u(k).completionProgress ? parseFloat(u(k).completionProgress.slice(0, -1)) : 0,
                    style: {
                        width: "200px"
                    }
                }, null, 8, [ "percentage" ]) ]), l("div", U, [ _("已完成 " + y(u(k).finishNum) + "/" + y(u(k).resNum) + " ", 1), j, r(Ua, {
                    modelValue: u(C).isAssess,
                    "onUpdate:modelValue": t[1] || (t[1] = e => u(C).isAssess = e),
                    class: "ml-2",
                    style: {
                        "--el-switch-on-color": "#13ce66"
                    },
                    onChange: Da
                }, null, 8, [ "modelValue" ]) ]), l("div", q, [ r(Ga, {
                    ref_key: "treeRef",
                    ref: ba,
                    data: u(D),
                    "node-key": "id",
                    "expand-on-click-node": !1,
                    onCheckChange: xa
                }, {
                    default: p(({
                        data: e
                    }) => {
                        var da, ua, pa;
                        return [ l("div", G, [ l("div", M, [ e.dirType === "file" ? (o(), 
                        d("img", {
                            key: 0,
                            src: u(De)(e.resType),
                            alt: ""
                        }, null, 8, Y)) : m("", !0), l("span", {
                            class: Wa([ "pl-6px", e.dirType === "dir" ? "catalog-class" : "material-class" ])
                        }, y(e.name), 3), e.classHours ? (o(), d("em", Z, "（" + y(e.classHours) + "课时）", 1)) : m("", !0), e.studyType ? (o(), 
                        d("span", J, y(e.studyType), 1)) : m("", !0), e.dirType === "file" ? (o(), 
                        d("div", K, [ (o(!0), d(_a, null, ya(e.tag, i => (o(), d("div", {
                            class: "resourceLabel",
                            key: i.tagId
                        }, y(i.tagName), 1))), 128)), e.isAssess === 1 ? (o(), R(ia, {
                            key: 0,
                            content: "计入考核点",
                            placement: "top",
                            effect: "light"
                        }, {
                            default: p(() => [ r(s, {
                                icon: "svg-icon:icon-point",
                                class: "ml-6px mr-3px mt-1"
                            }) ]),
                            _: 1
                        })) : m("", !0), r(ia, {
                            placement: "top",
                            effect: "light",
                            teleported: !0,
                            "append-to": "html"
                        }, {
                            content: p(() => {
                                var i, b;
                                return [ l("ul", O, [ l("li", null, [ $, _(y(((i = e.resCtl) == null ? void 0 : i.openTimeStr) || "无"), 1) ]), l("li", null, [ Q, _(y(((b = e.resCtl) == null ? void 0 : b.closeTimeStr) || "无"), 1) ]) ]) ];
                            }),
                            default: p(() => {
                                var i;
                                return [ e.status !== 0 ? (o(), R(ja, {
                                    key: 0,
                                    class: "distribute",
                                    type: (i = I({
                                        list: ca,
                                        listAttrCode: "code",
                                        rawAttrCode: e.status
                                    })) == null ? void 0 : i.tag
                                }, {
                                    default: p(() => {
                                        var b;
                                        return [ _(y((b = I({
                                            list: ca,
                                            listAttrCode: "code",
                                            rawAttrCode: e.status
                                        })) == null ? void 0 : b.name), 1) ];
                                    }),
                                    _: 2
                                }, 1032, [ "type" ])) : m("", !0) ];
                            }),
                            _: 2
                        }, 1024) ])) : m("", !0) ]), Xa(l("div", W, [ l("div", X, [ aa, r(qa, {
                            style: {
                                width: "48px"
                            },
                            "show-text": !1,
                            color: (da = I({
                                list: N,
                                listAttrCode: "code",
                                rawAttrCode: e.studyStatus
                            })) == null ? void 0 : da.color,
                            percentage: (ua = I({
                                list: N,
                                listAttrCode: "code",
                                rawAttrCode: e.studyStatus
                            })) == null ? void 0 : ua.percentage,
                            "stroke-width": "6px"
                        }, null, 8, [ "color", "percentage" ]), l("span", ea, y((pa = I({
                            list: N,
                            listAttrCode: "code",
                            rawAttrCode: e.studyStatus
                        })) == null ? void 0 : pa.name), 1) ]), l("div", ta, [ e.type === 1 ? (o(), 
                        d("div", sa, [ Fa(e) ? (o(), R(x, {
                            key: 0,
                            type: "primary",
                            plain: "",
                            onClick: i => w({
                                node: a.node,
                                data: e
                            })
                        }, {
                            default: p(() => [ _("下载 ") ]),
                            _: 2
                        }, 1032, [ "onClick" ])) : m("", !0), e.resType !== 5 ? (o(), 
                        R(x, {
                            key: 1,
                            type: "primary",
                            onClick: i => w({
                                node: a.node,
                                data: e
                            })
                        }, {
                            default: p(() => [ _("去学习 ") ]),
                            _: 2
                        }, 1032, [ "onClick" ])) : m("", !0) ])) : m("", !0), e.type === 4 ? (o(), 
                        d("div", la, [ r(x, {
                            type: "primary",
                            onClick: i => w({
                                node: a.node,
                                data: e
                            })
                        }, {
                            default: p(() => [ _("去训练 ") ]),
                            _: 2
                        }, 1032, [ "onClick" ]) ])) : m("", !0), [ 2, 3, 5 ].includes(e.type) ? (o(), 
                        d("div", ra, [ r(x, {
                            type: "primary",
                            plain: "",
                            onClick: i => w({
                                node: a.node,
                                data: e
                            })
                        }, {
                            default: p(() => [ _("详情 ") ]),
                            _: 2
                        }, 1032, [ "onClick" ]), r(x, {
                            type: "primary",
                            onClick: i => w({
                                node: a.node,
                                data: e
                            })
                        }, {
                            default: p(() => [ _("去作答 ") ]),
                            _: 2
                        }, 1032, [ "onClick" ]) ])) : m("", !0) ]) ], 512), [ [ ae, e.dirType === "file" ] ]) ]) ];
                    }),
                    _: 1
                }, 8, [ "data" ]) ]) ])) : (o(), d("div", H, [ r(s, {
                    icon: "svg-icon:bg-no-data-stu",
                    size: 200,
                    class: "",
                    style: {
                        height: "160px"
                    }
                }), V ])) ]), r(we, {
                    ref_key: "addTeachRef",
                    ref: oa,
                    teachInfo: u(na),
                    onHandleData: La
                }, null, 8, [ "teachInfo" ]), r(be, {
                    ref_key: "addResourceDialogRef",
                    ref: va,
                    onDone: g
                }, null, 512), r(Ae, {
                    ref_key: "publishStuMaterialRef",
                    ref: Ta,
                    onDone: ka
                }, null, 512), r(Ma, {
                    ref_key: "ResourcePreviewRef",
                    ref: Na
                }, null, 512), r(Se, {
                    ref_key: "editorResourceNameDialogRef",
                    ref: Aa,
                    onEditorNameDone: g
                }, null, 512), r(ze, {
                    ref_key: "resourceSettingDialogRef",
                    ref: Sa,
                    onDone: g,
                    scene: u(Ra),
                    isfromTeaching: 1
                }, null, 8, [ "scene" ]) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-929c38d5" ] ]);
});

export {
    Xe as __tla,
    fa as default
};