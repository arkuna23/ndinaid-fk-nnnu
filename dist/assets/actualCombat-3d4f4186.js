import {
    a7 as q,
    h as Ia,
    e as x,
    T as Ca,
    u as xa,
    r as u,
    f as Sa,
    A as E,
    a,
    o as _,
    c as L,
    k as v,
    t as f,
    z as O,
    C,
    l as w,
    D as F,
    v as b,
    B as j,
    F as $e,
    y as Ae,
    G as U,
    E as Ke,
    n as Ge,
    i as ae,
    a8 as Ta,
    _ as za,
    J as Ea,
    L as La,
    a9 as ja,
    R as Na,
    S as Da,
    p as Ra,
    __tla as qa
} from "./index-6c08ea4c.js";

import {
    _ as Oa,
    __tla as Fa
} from "./EditorPreviewNew.vue_vue_type_style_index_1_scoped_88adfb62_lang-b5c74759.js";

import {
    __tla as Ua
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import {
    _ as He
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    E as Va,
    __tla as Ba
} from "./el-avatar-76960a98.js";

import {
    c as Ma,
    g as Pa,
    a as $a,
    b as Aa,
    d as Ka,
    e as Ga,
    f as Ha,
    __tla as Ja
} from "./project-51c056b9.js";

import {
    C as Ya,
    g as Wa,
    __tla as Qa
} from "./CodeEdit-407a04a9.js";

import {
    g as Xa,
    __tla as Za
} from "./judge-7c842b3d.js";

import {
    e as et,
    a as at,
    __tla as tt
} from "./guacClient-8dd41bd6.js";

import {
    g as st,
    __tla as lt
} from "./codeRepository-027fddde.js";

import {
    d as it,
    b as rt,
    p as nt,
    c as ct,
    a as ut,
    __tla as ot
} from "./file-e038b35d.js";

import dt, {
    __tla as mt
} from "./Environment-c14b9bfd.js";

import {
    m as Je,
    C as _t,
    __tla as vt
} from "./CtEnvironment-5e2e5234.js";

import pt, {
    __tla as yt
} from "./ResourceList-1a64cd15.js";

import ft, {
    __tla as ht
} from "./MdCollapseWhite-6429fc66.js";

import kt, {
    __tla as gt
} from "./MdCollapseWhiteStep-8b03afe4.js";

import wt, {
    __tla as bt
} from "./UploadResult-516b9d02.js";

import It, {
    __tla as Ct
} from "./LeftTaskTree-24c1d7d3.js";

import {
    g as xt,
    __tla as St
} from "./task-be0f4a51.js";

import {
    g as Ye,
    D as We,
    __tla as Tt
} from "./dict-c5825220.js";

import {
    g as zt,
    __tla as Et
} from "./member-bed692a1.js";

import {
    E as Lt,
    a as jt,
    b as Nt,
    __tla as Dt
} from "./index-5adb716b.js";

import {
    __tla as Rt
} from "./el-collapse-item-c8b76a0a.js";

import {
    __tla as qt
} from "./index-1344e56b.js";

import {
    __tla as Ot
} from "./index-13c88727.js";

import "./html2canvas.esm-ad032b91.js";

import {
    __tla as Ft
} from "./patientsList-36f8c78c.js";

import "./patients-6f7adc6a.js";

import {
    __tla as Ut
} from "./addPatients-6dedae81.js";

import {
    __tla as Vt
} from "./ctExperiment-e381d146.js";

import {
    __tla as Bt
} from "./el-image-0d184777.js";

import {
    __tla as Mt
} from "./el-image-viewer-2c0d56e4.js";

import {
    __tla as Pt
} from "./throttle-1adeb119.js";

import {
    __tla as $t
} from "./imageProcess-137eb93b.js";

import {
    __tla as At
} from "./labReport-42ee0731.js";

import {
    __tla as Kt
} from "./patientsInfo-519b2fd7.js";

import {
    __tla as Gt
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    __tla as Ht
} from "./index.es-14d10e28.js";

import {
    __tla as Jt
} from "./project-file-a2b4fd07.js";

import "./file_题-23882218.js";

import {
    __tla as Yt
} from "./index-3a269d1c.js";

import {
    __tla as Wt
} from "./el-drawer-fca4d971.js";

let Qe, Qt = Promise.all([ (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Ua;
    } catch {}
})(), (() => {
    try {
        return Ba;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Qa;
    } catch {}
})(), (() => {
    try {
        return Za;
    } catch {}
})(), (() => {
    try {
        return tt;
    } catch {}
})(), (() => {
    try {
        return lt;
    } catch {}
})(), (() => {
    try {
        return ot;
    } catch {}
})(), (() => {
    try {
        return mt;
    } catch {}
})(), (() => {
    try {
        return vt;
    } catch {}
})(), (() => {
    try {
        return yt;
    } catch {}
})(), (() => {
    try {
        return ht;
    } catch {}
})(), (() => {
    try {
        return gt;
    } catch {}
})(), (() => {
    try {
        return bt;
    } catch {}
})(), (() => {
    try {
        return Ct;
    } catch {}
})(), (() => {
    try {
        return St;
    } catch {}
})(), (() => {
    try {
        return Tt;
    } catch {}
})(), (() => {
    try {
        return Et;
    } catch {}
})(), (() => {
    try {
        return Dt;
    } catch {}
})(), (() => {
    try {
        return Rt;
    } catch {}
})(), (() => {
    try {
        return qt;
    } catch {}
})(), (() => {
    try {
        return Ot;
    } catch {}
})(), (() => {
    try {
        return Ft;
    } catch {}
})(), (() => {
    try {
        return Ut;
    } catch {}
})(), (() => {
    try {
        return Vt;
    } catch {}
})(), (() => {
    try {
        return Bt;
    } catch {}
})(), (() => {
    try {
        return Mt;
    } catch {}
})(), (() => {
    try {
        return Pt;
    } catch {}
})(), (() => {
    try {
        return $t;
    } catch {}
})(), (() => {
    try {
        return At;
    } catch {}
})(), (() => {
    try {
        return Kt;
    } catch {}
})(), (() => {
    try {
        return Gt;
    } catch {}
})(), (() => {
    try {
        return Ht;
    } catch {}
})(), (() => {
    try {
        return Jt;
    } catch {}
})(), (() => {
    try {
        return Yt;
    } catch {}
})(), (() => {
    try {
        return Wt;
    } catch {}
})() ]).then(async () => {
    const Xe = He(Oa, [ [ "__scopeId", "data-v-88adfb62" ] ]), Ze = "" + new URL("before-60360f1a.png", import.meta.url).href;
    let P = "exp", te, se, le, ie, re, ne, ce, ue, oe, de, me, _e, ve, pe;
    te = {
        class: "exp-cont"
    }, se = {
        class: "title-label"
    }, le = {
        key: 2,
        class: "group-users"
    }, ie = {
        class: "title-close"
    }, re = {
        class: "body-left"
    }, ne = {
        class: "left-menu"
    }, ce = [ "onClick" ], ue = {
        class: "left-cont"
    }, oe = {
        class: "left-cont-show"
    }, de = {
        class: "left-cont-title"
    }, me = {
        class: "left-cont-value"
    }, _e = {
        class: "body-right"
    }, ve = {
        key: 0,
        class: "empty-env"
    }, pe = (V => (Na("data-v-d689f9ec"), V = V(), Da(), V))(() => f("img", {
        class: "before-img",
        fit: "cover",
        src: Ze
    }, null, -1)), Qe = He({
        __name: "actualCombat",
        setup(V) {
            const $ = Ia(), ye = x(() => !!c.value.isHelping), h = x(() => {
                var e;
                return ((e = $.getUser) == null ? void 0 : e.curIdentity) === "5";
            }), p = Ca(), A = xa(), k = Ra(), fe = u({}), K = x(() => {
                var e;
                return (((e = fe.value) == null ? void 0 : e.groupUserList) || []).find(t => t.isLeader === 1) || {};
            }), he = x(() => {
                var e;
                return (p.query.studentId || p.query.groupId || ((e = $.getUser) == null ? void 0 : e.id)) + "";
            }), G = u({}), B = u({
                isPublishAnswer: 1,
                isCut: 1,
                isCopyCode: 1,
                isShowDemo: 1,
                isShowCode: 1
            }), ea = x(() => [ {
                name: "描述",
                title: "任务描述",
                key: "description",
                icon: "svg-icon:ac-desc"
            }, ...d.value.type === 1 && a(B).isPublishAnswer === 1 ? [ {
                name: "手册",
                title: "任务手册",
                key: "manual",
                icon: "svg-icon:ac-manual"
            }, {
                name: "步骤",
                title: "任务步骤",
                key: "step",
                icon: "svg-icon:ac-step"
            } ] : [], {
                name: "知识点",
                title: "知识点",
                key: "kt",
                icon: "svg-icon:ac-kt"
            }, {
                name: "资源",
                title: "任务资源",
                key: "resource",
                icon: "svg-icon:ac-res"
            }, ...d.value.isAchievement === 1 ? [ {
                name: "成果物",
                title: "成果物",
                key: "result",
                icon: "svg-icon:ac-result"
            } ] : [] ]), aa = u([ {
                fontSize: "12px",
                id: "12"
            }, {
                fontSize: "14px",
                id: "14"
            }, {
                fontSize: "16px",
                id: "16"
            }, {
                fontSize: "18px",
                id: "18"
            }, {
                fontSize: "20px",
                id: "20"
            } ]), ke = u("14"), ge = u("14"), H = u([]), J = u([]), we = u("description"), I = u({
                name: "描述",
                title: "任务描述",
                key: "description",
                icon: "svg-icon:ac-desc"
            }), D = u(!1), c = u({}), S = u(""), N = u(!1), be = u(), ta = u(), T = u(), M = u(), z = u(!1), Y = u(!1), W = u(!1), o = u({}), Q = u([]), d = u({}), m = u({}), Ie = u([]), R = u(0), sa = x(() => {
                var e, t;
                return c.value.groupId && (!h.value || ((e = $.getUser) == null ? void 0 : e.id) === ((t = K.value) == null ? void 0 : t.userId));
            }), la = x(() => c.value.module !== "1" && G.value.completeType === 1 && G.value.trialType === 1 || c.value.module === "1"), Ce = x(() => !c.value.studentId && c.value.module === "2" && h.value), ia = async () => {
                var t;
                let e = !1;
                try {
                    e = await Ma(c.value.projectId);
                } catch {}
                if (e) switch (o.value.environment) {
                  case 10:
                    try {
                        const i = await (c.value.isTesting !== "1" || h.value ? et : at)({
                            module: c.value.module,
                            businessId: c.value.projectId,
                            userId: he.value
                        });
                        N.value = !0, Ge(() => {
                            var n;
                            (n = T.value) == null || n.initData(i);
                        });
                    } catch {}
                    break;

                  case 5:
                    let l = c.value.module === "1" ? Pa : Wa, s = await l(a(d).id);
                    if (s) {
                        let r = await st((t = a(o).editor) == null ? void 0 : t.codeRepositoryId);
                        if (s.testResults = s.tests || s.testResults || [], !s.inputCode) {
                            let i = await Xa(s == null ? void 0 : s.evaluationFileId);
                            s.inputCode = i.content || "";
                        }
                        N.value = !0, Ge(() => {
                            var i, n;
                            (n = (i = M.value) == null ? void 0 : i.initData) == null || n.call(i, s, r);
                        });
                    } else k.warning("当前任务未保存评测设置！");
                    break;

                  case 20:
                    N.value = !0;
                } else Ke.confirm("您当前尝试访问的功能为高级功能，需要订阅我们的付费计划才可以使用", "功能限制通知", {
                    showCancelButton: !1,
                    closeOnClickModal: !1,
                    showClose: !1,
                    confirmButtonText: "确 定",
                    customClass: "neu-message-box  del-confirm"
                });
            }, ra = async e => {
                N.value = !1;
            }, na = () => {
                D.value = !D.value, setTimeout(() => {
                    var e;
                    (e = T.value) == null || e.changeViewWidth();
                }, 220);
            }, xe = async e => {
                var t, l;
                z.value = !0;
                try {
                    await k.confirm("您即将标记此任务为‘已完成’。完成后，您将无法再进入该任务实验环境或更改任何成果物，请确认您已经完成了所有必要的工作，您确定要继续并标记此任务为完成么？");
                    let s = {
                        taskId: a(d).id,
                        sourceType: o.value.environment === 5 ? 2 : 3,
                        savaEnv: 0,
                        fileEid: "",
                        fileName: "",
                        fileType: "",
                        fileSize: 0,
                        content: ""
                    };
                    o.value.environment === 5 && c.value.module !== "1" && h.value && await ((t = M.value) == null ? void 0 : t.testingNow(1, (r, i) => {
                        r.objectKey.lastIndexOf("."), s.fileEid = r.eid, s.fileName = r.objectKey, 
                        s.fileType = Ye(We.COMMON_FILE_TYPE, r.fileType), s.fileSize = r.fileSize, 
                        s.content = i;
                    })), c.value.isTesting !== "1" && c.value.module !== "1" && h.value && (await (async r => await q.put({
                        showLoading: !1,
                        url: "/exp/user-task/student-task-complete",
                        data: r
                    }))(s), k.success("操作成功")), o.value.environment === 10 && await ((l = T.value) == null ? void 0 : l.exitEnvironment()), 
                    window.close(), A.push("/");
                } finally {
                    z.value = !1, e && e();
                }
            }, ca = async () => {
                var e, t;
                try {
                    const l = u(!1);
                    if (o.value.environment === 20) return window.close(), void A.push("/");
                    c.value.module !== "1" && await Ke.confirm("提示", "warning", {
                        title: "提示",
                        message: () => ae("p", null, [ ae("div", null, "您确定要退出当前任务实战详情么？"), ae(Ta, {
                            modelValue: l.value,
                            "onUpdate:modelValue": s => {
                                l.value = s;
                            }
                        }, "保存当前任务实验环境资源") ]),
                        customClass: "neu-message-box",
                        confirmButtonText: "确定",
                        cancelButtonText: "取消",
                        center: !0
                    }), (!l.value || c.value.isTesting === "1" && o.value.environment === 10) && await ((e = T.value) == null ? void 0 : e.exitEnvironment()), 
                    l.value && o.value.environment === 5 && (await ((t = M.value) == null ? void 0 : t.testingNow(2)), 
                    k.success("操作成功")), window.close(), A.push("/");
                } catch {}
            }, ua = async e => {
                if (e) try {
                    fe.value = await zt({
                        id: e
                    });
                } catch {}
            }, oa = async e => {
                if (h.value) try {
                    B.value = await Aa(e);
                } catch {}
            }, da = async () => {
                var e, t, l, s;
                try {
                    if (Q.value = await Ka(p.query.projectId), p.query.module === "2" && (G.value = await Ga({
                        id: p.query.projectId
                    })), p.query.taskId) S.value = p.query.taskId; else if (h.value) {
                        const r = await xt({
                            projectId: p.query.projectId
                        });
                        let i = r.taskStudentGroupList || r.taskStudentIndividualList || [], n = [];
                        i.forEach(y => {
                            y.classify === 2 ? n.push(y) : n = n.concat(y.children || []);
                        }), S.value = ((e = n.find(y => y.taskStatus === 0)) == null ? void 0 : e.id) || ((t = n.find(y => y.classify === 2)) == null ? void 0 : t.id);
                    } else {
                        S.value = p.query.taskId;
                        let r = Q.value || [], i = [];
                        r.forEach(n => {
                            n.classify === 2 ? i.push(n) : i = i.concat(n.children || []);
                        }), S.value = ((l = i.find(n => n.taskStatus === 0)) == null ? void 0 : l.id) || ((s = i.find(n => n.classify === 2)) == null ? void 0 : s.id);
                    }
                } catch {}
            }, Se = async e => {
                z.value = !0;
                try {
                    d.value = await Ha(e), d.value.step && (Y.value = !0, Te(d.value.step, t => {
                        J.value = [], J.value = t, Y.value = !1;
                    })), d.value.manual && (W.value = !0, Te(d.value.manual, t => {
                        H.value = [], H.value = t, W.value = !1;
                    }));
                } catch {} finally {
                    z.value = !1;
                }
            }, ma = () => {
                var e;
                (e = be.value) == null || e.open();
            }, _a = e => {
                S.value = e.id, Se(S.value);
            }, va = (e, t) => {
                I.value.key === "step" ? ke.value = e.id : I.value.key === "manual" && (ge.value = e.id);
            }, pa = e => {
                var l, s;
                const t = c.value.module === "1" || c.value.isTesting === "1";
                if (m.value = {
                    ...e
                }, R.value = e.testStep, !N.value) return k.warning("请先进入实验环境！"), 
                void e.cb(4);
                if (e.type === "cutScreen") t ? e.cb() : (l = T.value) == null || l.handleCheckerEnvet(1, e.cb, e.type, e.scripts, e.closeLoading()); else if (e.type === "stepChecker") {
                    if (e.jumpFlag && t) return void e.cb(1);
                    (s = T.value) == null || s.handleCheckerEnvet(1, async (r, i, n) => {
                        if (t) {
                            let y = i === "error" ? 4 : 1;
                            e.cb(y);
                        } else try {
                            await ya(i, n, r, e.jumpFlag);
                        } catch {}
                    }, e.type, e.scripts, e.jumpFlag);
                } else e.type === "textarea" ? t ? e.cb() : fa() : e.type === "over" ? xe(() => {
                    e.cb(4);
                }) : e.type === "next" && m.value.cb && m.value.cb();
            }, ya = async (e, t, l, s = !1) => {
                try {
                    let r = "步骤" + (R.value + 1) + "-脚本检测";
                    await X({
                        type: 1,
                        name: r,
                        content: JSON.stringify(t.scripts),
                        skip: s,
                        namespace: t.namespace,
                        serviceInstanceName: t.serviceInstanceName,
                        resultType: e.exitCode === 1 ? 0 : 1,
                        resultMsg: e.exitCode === 1 ? e.error : e.stdout
                    }), k.success("保存成功！"), m.value.cb && m.value.cb(s ? 1 : l, e);
                } catch {
                    m.value.cb && m.value.cb(2);
                }
            }, fa = async () => {
                try {
                    let e = "步骤" + (R.value + 1) + "-实验记录";
                    await X({
                        type: 3,
                        name: e,
                        content: m.value.textVal,
                        skip: !1,
                        namespace: "",
                        serviceInstanceName: ""
                    }), k.success("保存成功！"), m.value.cb && m.value.cb();
                } catch {
                    m.value.cb && m.value.cb(4);
                }
            }, ha = async (e, t) => {
                var l;
                try {
                    let s = "步骤" + (R.value + 1) + "-任务截图.png";
                    const r = it(e, s);
                    let i = new FormData();
                    i.append("file", r), i.append("source", rt);
                    const n = await nt(i);
                    await X({
                        type: 2,
                        name: s,
                        content: (l = n == null ? void 0 : n.data) == null ? void 0 : l.eid,
                        skip: !1,
                        namespace: "",
                        serviceInstanceName: ""
                    }), k.success("保存截图成功！"), t(!0), m.value.cb && m.value.cb();
                } catch {
                    m.value.cb && m.value.cb(4);
                }
            }, X = async e => await (async t => await q.post({
                showLoading: !1,
                url: "/exp/user-task-test/create",
                data: t
            }))({
                taskId: a(d).id,
                step: R.value,
                ...e
            }), Te = (e, t) => {
                e && ct(e).then(l => {
                    let s = [];
                    if (l) {
                        let r = Je.lexer(l, {
                            type: "heading"
                        });
                        s = ka(r).map(i => {
                            let n = "";
                            return i.detail.forEach(y => {
                                n += y.raw;
                            }), {
                                ...i,
                                htmls: Je.parser(i.detail),
                                texts: n
                            };
                        });
                    }
                    t && t(s);
                });
            }, ka = (e = []) => {
                let t = [];
                e.forEach((s, r) => {
                    s.type === "heading" && s.depth <= 2 && t.push(r);
                });
                let l = [];
                return t.forEach((s, r) => {
                    let i = t.length >= r + 1 ? t[r + 1] : t.length, n = e.slice(s + 1, i);
                    l.push({
                        ...e[s],
                        detail: n
                    });
                }), l;
            }, ze = async (e, t) => {
                var r;
                let l = ((r = e == null ? void 0 : e.data) == null ? void 0 : r.data) || {}, s = {
                    taskId: a(d).id,
                    sourceType: 1,
                    savaEnv: 0,
                    fileEid: "",
                    fileName: "",
                    fileType: "",
                    fileSize: 0,
                    content: ""
                };
                try {
                    l.objectKey.lastIndexOf("."), s.fileEid = l.eid, s.fileName = l.objectKey, 
                    s.fileType = Ye(We.COMMON_FILE_TYPE, l.fileType), s.fileSize = l.fileSize, 
                    await (async i => await q.post({
                        showLoading: !1,
                        url: `/${P}/user-task-achievement/submit-achievement`,
                        data: i
                    }))(s), k.success("操作成功"), await Z(), t && t(!0);
                } catch {
                    t && t(!1);
                }
            }, ga = async e => {
                try {
                    await k.delConfirm(), await (async t => await q.delete({
                        url: `/${P}/user-task-achievement/delete?id=` + t
                    }))(e.id), k.success("操作成功"), await Z();
                } catch {}
            }, Z = async () => {
                try {
                    Ie.value = await (async e => await q.get({
                        showLoading: !1,
                        url: `/${P}/user-task-achievement/list`,
                        params: e
                    }))({
                        taskId: a(d).id,
                        ...c.value.isHelping ? {
                            userId: c.value.studentId,
                            groupId: c.value.groupId
                        } : {}
                    });
                } catch {}
            };
            return Sa(() => {
                c.value = p.query, (async () => {
                    z.value = !0;
                    try {
                        o.value = await $a(p.query.projectId), await da(), await Se(S.value), 
                        await oa(p.query.projectId), await ua(p.query.groupId);
                    } finally {
                        z.value = !1;
                    }
                })();
            }), (e, t) => {
                var Le, je, Ne, De, Re, qe, Oe, Fe, Ue, Ve, Be, Me, Pe;
                const l = za, s = Ea, r = La, i = Va, n = jt, y = Nt, wa = Lt, ba = Xe, Ee = ja;
                return E((_(), L("div", {
                    class: O([ "exp-page", ((Le = a(o)) == null ? void 0 : Le.environment) === 20 ? "is-dark" : "" ])
                }, [ v(It, {
                    ref_key: "LeftTaskTreeRef",
                    ref: be,
                    taskTree: a(Q),
                    onChangeTask: _a
                }, null, 8, [ "taskTree" ]), f("div", te, [ f("div", {
                    class: O([ "exp-title", a(Ce) ? "" : "showOverBtn" ])
                }, [ f("div", se, [ a(la) ? (_(), C(s, {
                    key: 0,
                    size: "default",
                    class: "task-list-btn !px-10px",
                    text: "",
                    type: "primary",
                    onClick: ma
                }, {
                    default: w(() => [ v(l, {
                        icon: "fa-solid:align-justify",
                        size: 14
                    }) ]),
                    _: 1
                })) : F("", !0), b(" " + j(a(ye) ? a(c).studentId ? `\u5B66\u751F\u3010${a(c).studentName}\u3011` : `\u5C0F\u7EC4\u3010${a(c).groupName}\u3011` : "") + j(a(d).name), 1) ]), a(d).type === 1 ? (_(), 
                C(r, {
                    key: 0,
                    class: "title-tag",
                    plain: "",
                    effect: ((je = a(o)) == null ? void 0 : je.environment) === 20 ? "dark" : "light"
                }, {
                    default: w(() => [ b("过程任务") ]),
                    _: 1
                }, 8, [ "effect" ])) : (_(), C(r, {
                    key: 1,
                    class: "title-tag",
                    type: "success",
                    plain: "",
                    effect: ((Ne = a(o)) == null ? void 0 : Ne.environment) === 20 ? "dark" : "light"
                }, {
                    default: w(() => [ b("最终成果") ]),
                    _: 1
                }, 8, [ "effect" ])), a(sa) ? (_(), L("div", le, [ v(i, {
                    class: "user-avatar",
                    size: 28,
                    src: a(ut)(a(K).avatar)
                }, null, 8, [ "src" ]), b(" " + j(a(K).userName), 1) ])) : F("", !0), f("div", ie, [ v(s, {
                    class: "",
                    type: "danger",
                    size: "large",
                    onClick: ca
                }, {
                    default: w(() => [ b(j(a(ye) ? "退出协作" : a(h) || a(c).module === "1" || a(c).isTeacherEnv === "1" ? "退出实战" : "退出讲解"), 1) ]),
                    _: 1
                }), a(Ce) ? (_(), C(s, {
                    key: 0,
                    class: "title-over",
                    type: "primary",
                    size: "large",
                    onClick: xe
                }, {
                    default: w(() => [ b("任务完成") ]),
                    _: 1
                })) : F("", !0) ]) ], 2), f("div", {
                    class: O([ "exp-body", a(D) ? "hide-menu" : "" ])
                }, [ f("div", re, [ f("div", ne, [ (_(!0), L($e, null, Ae(a(ea), g => (_(), 
                L("div", {
                    key: g.key,
                    class: O([ "menu-item", a(we) === g.key ? "is-active" : "" ]),
                    onClick: Xt => (async ee => {
                        ee.key === "result" && await Z(), we.value = ee.key, I.value = ee, 
                        D.value = !1;
                    })(g)
                }, [ b(j(g.name) + " ", 1), v(l, {
                    icon: g.icon,
                    class: "item-icon",
                    size: 20
                }, null, 8, [ "icon" ]) ], 10, ce))), 128)) ]), f("div", ue, [ E((_(), 
                L("div", oe, [ f("div", de, [ b(j(a(I).title) + " ", 1), E(v(wa, {
                    class: "right",
                    onCommand: va,
                    "popper-class": ((De = a(o)) == null ? void 0 : De.environment) === 20 ? "is-custom-dark" : ""
                }, {
                    dropdown: w(() => [ v(y, null, {
                        default: w(() => [ (_(!0), L($e, null, Ae(a(aa), g => (_(), 
                        C(n, {
                            key: g.id,
                            command: g
                        }, {
                            default: w(() => [ b(j(g.fontSize), 1) ]),
                            _: 2
                        }, 1032, [ "command" ]))), 128)) ]),
                        _: 1
                    }) ]),
                    default: w(() => [ v(s, {
                        size: "default",
                        class: "right fontsizebtn mt-13px !px-10px",
                        text: "",
                        type: "primary"
                    }, {
                        default: w(() => [ v(l, {
                            icon: "svg-icon:font-size",
                            size: 14,
                            class: "mr-5px"
                        }), b("字号设置 ") ]),
                        _: 1
                    }) ]),
                    _: 1
                }, 8, [ "popper-class" ]), [ [ U, [ "manual", "step" ].indexOf(a(I).key) >= 0 ] ]) ]), f("div", me, [ a(I).key === "description" ? (_(), 
                C(ba, {
                    key: 0,
                    class: "px-10px",
                    modelValue: a(d).description,
                    "onUpdate:modelValue": t[0] || (t[0] = g => a(d).description = g),
                    theme: ((Re = a(o)) == null ? void 0 : Re.environment) === 20 ? "dark" : "light"
                }, null, 8, [ "modelValue", "theme" ])) : F("", !0), E(v(ft, {
                    class: "px-10px",
                    "font-size": a(ge),
                    headersList: a(H),
                    isDark: ((qe = a(o)) == null ? void 0 : qe.environment) === 20
                }, null, 8, [ "font-size", "headersList", "isDark" ]), [ [ U, a(I).key === "manual" ] ]), E(v(kt, {
                    "font-size": a(ke),
                    onChangeEvent: pa,
                    isCopyCode: a(B).isCopyCode,
                    headersList: a(J),
                    isDark: ((Oe = a(o)) == null ? void 0 : Oe.environment) === 20
                }, null, 8, [ "font-size", "isCopyCode", "headersList", "isDark" ]), [ [ U, a(I).key === "step" ] ]), E(v(pt, {
                    resList: (Fe = a(d)) == null ? void 0 : Fe.fileList,
                    isStudent: a(h),
                    isDark: ((Ue = a(o)) == null ? void 0 : Ue.environment) === 20
                }, null, 8, [ "resList", "isStudent", "isDark" ]), [ [ U, a(I).key === "resource" ] ]), E(v(wt, {
                    ref_key: "UploadResultRef",
                    ref: ta,
                    isStudent: a(h),
                    resList: a(Ie),
                    isDark: ((Ve = a(o)) == null ? void 0 : Ve.environment) === 20,
                    onCreateResult: ze,
                    onDeleteResult: ga
                }, null, 8, [ "isStudent", "resList", "isDark" ]), [ [ U, a(I).key === "result" ] ]) ]) ])), [ [ Ee, a(Y) || a(W) ] ]) ]) ]), f("div", _e, [ f("div", {
                    class: "hide-left-btn",
                    onClick: na
                }, [ v(l, {
                    icon: a(D) ? "ep:arrow-right" : "ep:arrow-left",
                    class: O([ "arrow-icon" ]),
                    color: "#fff",
                    size: 8
                }, null, 8, [ "icon" ]) ]), a(N) ? ((Be = a(o)) == null ? void 0 : Be.environment) === 10 ? (_(), 
                C(dt, {
                    key: 1,
                    ref_key: "EnvironmentRef",
                    ref: T,
                    projectId: a(c).projectId,
                    module: a(c).module,
                    isTesting: a(c).isTesting,
                    isStudent: a(h),
                    userId: a(he),
                    isCut: a(B).isCut,
                    onStopEnv: ra,
                    onSaveCutScreen: ha
                }, null, 8, [ "projectId", "module", "isTesting", "isStudent", "userId", "isCut" ])) : ((Me = a(o)) == null ? void 0 : Me.environment) === 5 ? (_(), 
                C(Ya, {
                    key: 2,
                    ref_key: "CodeEditRef",
                    ref: M,
                    module: a(c).module,
                    taskId: a(d).id
                }, null, 8, [ "module", "taskId" ])) : ((Pe = a(o)) == null ? void 0 : Pe.environment) === 20 ? (_(), 
                C(_t, {
                    key: 3,
                    ref: "CtEnvironmentRef",
                    onSubmitResult: ze
                }, null, 512)) : F("", !0) : (_(), L("div", ve, [ pe, v(s, {
                    size: "large",
                    class: "mt-7px !px-20px",
                    type: "primary",
                    onClick: ia
                }, {
                    default: w(() => [ b("进入环境") ]),
                    _: 1
                }) ])) ]) ], 2) ]) ], 2)), [ [ Ee, a(z) ] ]);
            };
        }
    }, [ [ "__scopeId", "data-v-d689f9ec" ] ]);
});

export {
    Qt as __tla,
    Qe as default
};