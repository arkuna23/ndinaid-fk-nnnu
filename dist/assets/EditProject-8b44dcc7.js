import {
    p as ut,
    T as pt,
    u as ft,
    cf as yt,
    e as n,
    a as t,
    r as m,
    f as ht,
    A as M,
    o as e,
    C as c,
    l as u,
    t as p,
    c as T,
    F as Q,
    y as dt,
    z as vt,
    B as W,
    k as V,
    G as kt,
    m as gt,
    D as h,
    v as j,
    E as X,
    _ as xt,
    J as It,
    a9 as wt,
    __tla as Rt
} from "./index-6c08ea4c.js";

import {
    _ as bt,
    __tla as jt
} from "./ContentPage-f6bcc98e.js";

import {
    _ as St,
    __tla as Ct
} from "./index-8b41572c.js";

import Ot, {
    __tla as Nt
} from "./ProjectInfo-9d5e6fde.js";

import Tt, {
    __tla as Vt
} from "./ProjectTask-aea019b3.js";

import zt, {
    __tla as Bt
} from "./projectResource-5b5dc275.js";

import {
    a as Y,
    l as Pt,
    m as Et,
    __tla as Ft
} from "./project-51c056b9.js";

import qt, {
    __tla as Jt
} from "./project-engineering-8064edd3.js";

import {
    _ as Dt
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Ut
} from "./Editor-ef737d2a.js";

import {
    __tla as At
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Gt
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import {
    __tla as Ht
} from "./file-e038b35d.js";

import {
    __tla as Kt
} from "./ExpEnvironment-afacdb98.js";

import {
    __tla as Lt
} from "./dict-c5825220.js";

import {
    __tla as Mt
} from "./index-c31c99eb.js";

import {
    __tla as Qt
} from "./CodeRepository-3739494d.js";

import {
    __tla as Wt
} from "./index-c4ca0ced.js";

import {
    __tla as Xt
} from "./index-993301ca.js";

import {
    __tla as Yt
} from "./index-1024512a.js";

import "./tree-05ea8e09.js";

import {
    __tla as Zt
} from "./DeptTag-1be092ce.js";

import {
    __tla as $t
} from "./index-ef4d146e.js";

import {
    __tla as tr
} from "./codeRepository-027fddde.js";

import {
    __tla as rr
} from "./Container-3e0cfabc.js";

import {
    __tla as ar
} from "./MountDatasets-93ee84e0.js";

import {
    __tla as _r
} from "./dataset-a3994d32.js";

import {
    __tla as er
} from "./Flowline-94f98cfc.js";

import {
    __tla as or
} from "./index-71666e05.js";

import {
    __tla as lr
} from "./pipelineManage-fe91e90c.js";

import {
    __tla as cr
} from "./pipelineTab-f3395094.js";

import "./configInfo-14ae9782.js";

import {
    __tla as ir
} from "./databaseConfig-a0b3f7be.js";

import {
    __tla as sr
} from "./techDirectionManage-e96d2dc4.js";

import "./validate-b72f006c.js";

import {
    __tla as nr
} from "./UploadCover-f16f2b2c.js";

import {
    __tla as mr
} from "./el-image-0d184777.js";

import {
    __tla as ur
} from "./el-image-viewer-2c0d56e4.js";

import {
    __tla as pr
} from "./throttle-1adeb119.js";

import {
    __tla as fr
} from "./ComTask-4d1891dc.js";

import "./file_题-23882218.js";

import {
    __tla as yr
} from "./addResource-cf3ece02.js";

import {
    __tla as hr
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    __tla as dr
} from "./index.es-14d10e28.js";

import {
    __tla as vr
} from "./project-file-a2b4fd07.js";

import {
    __tla as kr
} from "./index-a34a73bc.js";

import "./file_HTML-65451e1b.js";

import {
    __tla as gr
} from "./library-c2ecc5ca.js";

import "./file.data-794ea5d0.js";

import {
    __tla as xr
} from "./formatTime-de6f1520.js";

import {
    __tla as Ir
} from "./ChooseKt-d4c6a4b8.js";

import {
    __tla as wr
} from "./TaskProcess-16c765c3.js";

import {
    __tla as Rr
} from "./index-3a269d1c.js";

import {
    __tla as br
} from "./UploadMdBtns-d6f91a58.js";

import {
    __tla as jr
} from "./index-5adb716b.js";

import {
    __tla as Sr
} from "./TaskDemand-6539e5b4.js";

import {
    __tla as Cr
} from "./ModulesChoose-34e6a0e7.js";

import {
    __tla as Or
} from "./TaskDevelop-553c5c72.js";

import {
    __tla as Nr
} from "./TaskTesting-c5f296e2.js";

import {
    __tla as Tr
} from "./TestingSetting-addeb7eb.js";

import {
    __tla as Vr
} from "./ComChooseCodeFile-fe23b12d.js";

import {
    __tla as zr
} from "./judge-7c842b3d.js";

import {
    __tla as Br
} from "./TaskStageDialog-d5f6179c.js";

import {
    __tla as Pr
} from "./index-e2094cc0.js";

import {
    __tla as Er
} from "./addFolder.vue_vue_type_script_setup_true_lang-2e8ce82a.js";

import {
    __tla as Fr
} from "./project-enjineering-046a4b77.js";

import {
    __tla as qr
} from "./tableTree-bfb0c36c.js";

import {
    __tla as Jr
} from "./gitInitDialog-0be58b20.js";

import "./git-init-run-c22497e9.js";

import {
    __tla as Dr
} from "./database-info-f5a22a6b.js";

import {
    __tla as Ur
} from "./copy-a238bc51.js";

import {
    __tla as Ar
} from "./clipboard-0a12866f.js";

import {
    __tla as Gr
} from "./init-log-a1c43284.js";

import {
    __tla as Hr
} from "./log-8da79d7b.js";

import {
    __tla as Kr
} from "./proDialog-9a22c5bf.js";

import {
    __tla as Lr
} from "./proFileDialog-04d3a80e.js";

import {
    __tla as Mr
} from "./setDemoUrl.vue_vue_type_script_setup_true_lang-60a7133c.js";

import {
    __tla as Qr
} from "./middleWareDialog-afa592a5.js";

import {
    __tla as Wr
} from "./addService-6cba1f65.js";

import {
    __tla as Xr
} from "./cloud-6a4afb61.js";

import {
    __tla as Yr
} from "./addPort-61bffaa8.js";

import {
    __tla as Zr
} from "./serviceUploadDialog-ef3d8c60.js";

import "./formatter-7ecf379a.js";

let Z, $r = Promise.all([ (() => {
    try {
        return Rt;
    } catch {}
})(), (() => {
    try {
        return jt;
    } catch {}
})(), (() => {
    try {
        return Ct;
    } catch {}
})(), (() => {
    try {
        return Nt;
    } catch {}
})(), (() => {
    try {
        return Vt;
    } catch {}
})(), (() => {
    try {
        return Bt;
    } catch {}
})(), (() => {
    try {
        return Ft;
    } catch {}
})(), (() => {
    try {
        return Jt;
    } catch {}
})(), (() => {
    try {
        return Ut;
    } catch {}
})(), (() => {
    try {
        return At;
    } catch {}
})(), (() => {
    try {
        return Gt;
    } catch {}
})(), (() => {
    try {
        return Ht;
    } catch {}
})(), (() => {
    try {
        return Kt;
    } catch {}
})(), (() => {
    try {
        return Lt;
    } catch {}
})(), (() => {
    try {
        return Mt;
    } catch {}
})(), (() => {
    try {
        return Qt;
    } catch {}
})(), (() => {
    try {
        return Wt;
    } catch {}
})(), (() => {
    try {
        return Xt;
    } catch {}
})(), (() => {
    try {
        return Yt;
    } catch {}
})(), (() => {
    try {
        return Zt;
    } catch {}
})(), (() => {
    try {
        return $t;
    } catch {}
})(), (() => {
    try {
        return tr;
    } catch {}
})(), (() => {
    try {
        return rr;
    } catch {}
})(), (() => {
    try {
        return ar;
    } catch {}
})(), (() => {
    try {
        return _r;
    } catch {}
})(), (() => {
    try {
        return er;
    } catch {}
})(), (() => {
    try {
        return or;
    } catch {}
})(), (() => {
    try {
        return lr;
    } catch {}
})(), (() => {
    try {
        return cr;
    } catch {}
})(), (() => {
    try {
        return ir;
    } catch {}
})(), (() => {
    try {
        return sr;
    } catch {}
})(), (() => {
    try {
        return nr;
    } catch {}
})(), (() => {
    try {
        return mr;
    } catch {}
})(), (() => {
    try {
        return ur;
    } catch {}
})(), (() => {
    try {
        return pr;
    } catch {}
})(), (() => {
    try {
        return fr;
    } catch {}
})(), (() => {
    try {
        return yr;
    } catch {}
})(), (() => {
    try {
        return hr;
    } catch {}
})(), (() => {
    try {
        return dr;
    } catch {}
})(), (() => {
    try {
        return vr;
    } catch {}
})(), (() => {
    try {
        return kr;
    } catch {}
})(), (() => {
    try {
        return gr;
    } catch {}
})(), (() => {
    try {
        return xr;
    } catch {}
})(), (() => {
    try {
        return Ir;
    } catch {}
})(), (() => {
    try {
        return wr;
    } catch {}
})(), (() => {
    try {
        return Rr;
    } catch {}
})(), (() => {
    try {
        return br;
    } catch {}
})(), (() => {
    try {
        return jr;
    } catch {}
})(), (() => {
    try {
        return Sr;
    } catch {}
})(), (() => {
    try {
        return Cr;
    } catch {}
})(), (() => {
    try {
        return Or;
    } catch {}
})(), (() => {
    try {
        return Nr;
    } catch {}
})(), (() => {
    try {
        return Tr;
    } catch {}
})(), (() => {
    try {
        return Vr;
    } catch {}
})(), (() => {
    try {
        return zr;
    } catch {}
})(), (() => {
    try {
        return Br;
    } catch {}
})(), (() => {
    try {
        return Pr;
    } catch {}
})(), (() => {
    try {
        return Er;
    } catch {}
})(), (() => {
    try {
        return Fr;
    } catch {}
})(), (() => {
    try {
        return qr;
    } catch {}
})(), (() => {
    try {
        return Jr;
    } catch {}
})(), (() => {
    try {
        return Dr;
    } catch {}
})(), (() => {
    try {
        return Ur;
    } catch {}
})(), (() => {
    try {
        return Ar;
    } catch {}
})(), (() => {
    try {
        return Gr;
    } catch {}
})(), (() => {
    try {
        return Hr;
    } catch {}
})(), (() => {
    try {
        return Kr;
    } catch {}
})(), (() => {
    try {
        return Lr;
    } catch {}
})(), (() => {
    try {
        return Mr;
    } catch {}
})(), (() => {
    try {
        return Qr;
    } catch {}
})(), (() => {
    try {
        return Wr;
    } catch {}
})(), (() => {
    try {
        return Xr;
    } catch {}
})(), (() => {
    try {
        return Yr;
    } catch {}
})(), (() => {
    try {
        return Zr;
    } catch {}
})() ]).then(async () => {
    let z, B, P, E, F, q;
    z = {
        class: "head-steps"
    }, B = {
        class: "step-num"
    }, P = {
        key: 1
    }, E = {
        class: "step-name"
    }, F = {
        class: "next-icon"
    }, q = {
        class: "btns-box"
    }, Z = Dt({
        __name: "EditProject",
        props: {
            defaultId: {
                type: String,
                default: ""
            }
        },
        emits: [ "submitNow" ],
        setup($, {
            emit: tt
        }) {
            const f = ut(), rt = pt(), at = ft(), S = yt(), d = n(() => t(at.currentRoute)), _t = n(() => t(d).path.indexOf("/neu/") >= 0 || t(d).path.indexOf("/private/") >= 0 || t(d).path.indexOf("/public/") >= 0), et = tt, J = $, v = n(() => [ "项目信息", "项目任务", "项目资料", ...t(r).environment === 15 ? [ "工程资源" ] : [] ]), ot = n(() => t(d).path.indexOf("/neu/") >= 0), _ = m(0), k = n(() => J.defaultId === "create"), lt = n(() => t(k) ? "新建" : "编辑"), r = m({
                id: "",
                name: "",
                description: null,
                environment: 0,
                sourceFrom: 1,
                isNeu: !1,
                pipelineSaveReqVo: {}
            }), g = m(), i = m(), D = m(), C = m(!1), ct = () => {
                var a;
                r.value = {
                    id: "",
                    name: "",
                    description: null,
                    environment: 0,
                    sourceFrom: 1,
                    isNeu: !1,
                    pipelineSaveReqVo: {}
                }, (a = g.value) == null || a.resetForm();
            };
            function U(a = y) {
                var o;
                t(_) === 1 && ((o = t(i)) == null ? void 0 : o.rightStatus) !== 0 ? X.confirm("当前页面您有未保存的更改，返回上一步，此页面将丢失这些更改。", "提示", {
                    confirmButtonText: "保存并返回",
                    cancelButtonText: "不保存返回",
                    customClass: "neu-message-box"
                }).then(O => {
                    var I;
                    (I = t(i)) == null || I.handleSaveTask(a);
                }).catch(() => {
                    a && a();
                }) : a && a();
            }
            function y(a = 0) {
                if (a === 1) {
                    if (t(_) === t(v).length - 1) return;
                    _.value += 1;
                } else {
                    if (t(_) === 0) return;
                    _.value -= 1;
                }
            }
            async function it() {
                if (t(r).environment === 15 && await D.value.projectResult(), S.getProjectBaseUrl !== "exp") try {
                    await X.confirm("请确保所有信息准确无误后再继续，完成后该项目资源可发布给学生", "提示", {
                        confirmButtonText: "确定完成",
                        cancelButtonText: "继续编辑",
                        customClass: "neu-message-box"
                    }), await Et({
                        id: r.value.id,
                        status: 2
                    }), x();
                } catch {} else x();
            }
            function x() {
                U(() => {
                    et("submitNow", !1);
                });
            }
            return ht(() => {
                _t.value ? S.setInProject(!1) : S.setInProject(!0), (async () => {
                    if (ct(), !t(k)) {
                        C.value = !0;
                        try {
                            const a = await Y(J.defaultId);
                            a.environment == 15 && (a.pipelineSaveReqVo = JSON.parse(JSON.stringify(a.pipelineInfoRespVo))), 
                            r.value = a;
                        } finally {
                            C.value = !1;
                        }
                    }
                })();
            }), (a, o) => {
                const O = xt, I = St, w = It, st = bt, nt = wt;
                return M((e(), c(st, {
                    class: "cont-box relative !px-0px",
                    title: t(lt) + "实践项目",
                    onRouterBack: x
                }, {
                    default: u(() => [ p("div", z, [ (e(!0), T(Q, null, dt(t(v), (s, l) => (e(), 
                    T(Q, {
                        key: s + l
                    }, [ p("div", {
                        class: vt([ "step-item", t(_) === l ? "is-active" : "", t(_) > l ? "is-finished" : "" ])
                    }, [ p("div", B, [ t(_) > l ? (e(), c(O, {
                        key: 0,
                        icon: "ep:check",
                        size: 16,
                        class: "icon-check"
                    })) : (e(), T("span", P, W(l + 1), 1)) ]), p("div", E, W(s), 1) ], 2), M(p("div", F, [ V(O, {
                        icon: "ep:arrow-right",
                        size: 8,
                        class: "icon-box"
                    }) ], 512), [ [ kt, l !== t(v).length - 1 ] ]) ], 64))), 128)) ]), V(I, {
                        "outer-height": 134,
                        noPadding: !0
                    }, {
                        default: u(() => [ t(_) === 0 ? (e(), c(Ot, {
                            key: 0,
                            ref_key: "firstFormRef",
                            ref: g,
                            modelValue: t(r),
                            "onUpdate:modelValue": o[0] || (o[0] = s => gt(r) ? r.value = s : null),
                            isCreate: t(k)
                        }, null, 8, [ "modelValue", "isCreate" ])) : h("", !0), t(_) === 1 ? (e(), 
                        c(Tt, {
                            key: 1,
                            ref_key: "secondFormRef",
                            ref: i,
                            projectId: t(r).id,
                            environment: t(r).environment,
                            codeRepository: t(r).editor
                        }, null, 8, [ "projectId", "environment", "codeRepository" ])) : h("", !0), t(_) === 2 ? (e(), 
                        c(zt, {
                            key: 2,
                            projectId: t(r).id,
                            pageType: "create",
                            class: "m-t-5",
                            style: {
                                padding: "20px"
                            }
                        }, null, 8, [ "projectId" ])) : h("", !0), t(_) === 3 ? (e(), 
                        c(qt, {
                            key: 3,
                            ref_key: "ProjectEngineeringRef",
                            ref: D,
                            projectId: t(r).id,
                            style: {
                                padding: "10px 20px"
                            }
                        }, null, 8, [ "projectId" ])) : h("", !0) ]),
                        _: 1
                    }), p("div", q, [ V(w, {
                        size: "default",
                        onClick: o[1] || (o[1] = s => x())
                    }, {
                        default: u(() => [ j("取消") ]),
                        _: 1
                    }), t(_) !== 0 ? (e(), c(w, {
                        key: 0,
                        size: "default",
                        onClick: o[2] || (o[2] = s => U())
                    }, {
                        default: u(() => [ j("上一步") ]),
                        _: 1
                    })) : h("", !0), t(_) !== t(v).length - 1 ? (e(), c(w, {
                        key: 1,
                        size: "default",
                        type: "primary",
                        onClick: o[3] || (o[3] = s => async function() {
                            var l, A, G, H, K, L;
                            switch (t(_)) {
                              case 0:
                                try {
                                    if (!await t(g).validate()) return;
                                    t(k) && await f.confirm("请确认当前实验环境是否正确，确定后不可再次修改！");
                                    const R = await t(g).getCoverEid();
                                    r.value.isNeu = ot.value;
                                    const N = await Pt({
                                        ...r.value,
                                        coverEid: R,
                                        folderId: rt.query.folderId || r.value.folderId
                                    });
                                    f.success("操作成功");
                                    const b = await Y(N);
                                    b.environment == 15 && (b.pipelineSaveReqVo = JSON.parse(JSON.stringify(b.pipelineInfoRespVo))), 
                                    r.value = b, y(1), await ((A = (l = t(i)) == null ? void 0 : l.initTasks) == null ? void 0 : A.call(l));
                                } catch {}
                                break;

                              case 1:
                                let mt = (G = t(i)) == null ? void 0 : G.treeData.map(R => R.classify === 1 ? (R.children || []).map(N => N.classify).indexOf(2) >= 0 ? 2 : 1 : 2);
                                if (((K = (H = t(i)) == null ? void 0 : H.errEvaluationTaskIds) == null ? void 0 : K.length) > 0) f.warning("您当前有未完成评测设置的任务，请完成后继续操作！"); else if (mt.indexOf(2) < 0) f.warning("请至少创建一个任务！"); else if (((L = t(i)) == null ? void 0 : L.rightStatus) !== 0) try {
                                    await f.confirm("您当前正在新建/编辑任务，请确认是否放弃当前任务的新建/编辑！"), 
                                    y(1);
                                } catch {} else y(1);
                                break;

                              default:
                                y(1);
                            }
                        }())
                    }, {
                        default: u(() => [ j("下一步") ]),
                        _: 1
                    })) : (e(), c(w, {
                        key: 2,
                        size: "default",
                        type: "primary",
                        onClick: it
                    }, {
                        default: u(() => [ j("完成") ]),
                        _: 1
                    })) ]) ]),
                    _: 1
                }, 8, [ "title" ])), [ [ nt, t(C) ] ]);
            };
        }
    }, [ [ "__scopeId", "data-v-9408b8a9" ] ]);
});

export {
    $r as __tla,
    Z as default
};