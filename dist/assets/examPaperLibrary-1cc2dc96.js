import {
    _ as Ie,
    __tla as Te
} from "./index-71666e05.js";

import {
    _ as je,
    __tla as Oe
} from "./ContentPage-f6bcc98e.js";

import {
    _ as Ue,
    __tla as Qe
} from "./index-e2094cc0.js";

import {
    _ as qe,
    __tla as He
} from "./index-c4ca0ced.js";

import {
    _ as Ve,
    __tla as Ge
} from "./index-8b41572c.js";

import {
    d as We,
    u as Je,
    U as ne,
    e as ie,
    h as _e,
    r as i,
    p as Ke,
    bE as Xe,
    f as Ye,
    dW as T,
    o as n,
    c as k,
    a as l,
    k as r,
    l as o,
    t as d,
    v as y,
    D as b,
    F as Ze,
    y as $e,
    B as x,
    C as g,
    m as ea,
    _ as aa,
    J as ta,
    ad as ra,
    K as la,
    ae as oa,
    __tla as sa
} from "./index-6c08ea4c.js";

import {
    _ as na,
    __tla as ia
} from "./index-1024512a.js";

import {
    _ as _a,
    __tla as ca
} from "./addFolder.vue_vue_type_script_setup_true_lang-2933732f.js";

import {
    d as da,
    __tla as ma
} from "./formatTime-de6f1520.js";

import {
    __tla as pa
} from "./file-e038b35d.js";

import {
    b as ce,
    a as ua,
    c as fa,
    d as de,
    t as me,
    e as ha,
    f as ya,
    __tla as ga
} from "./examPaperLibrary-5d47fe72.js";

import wa, {
    __tla as va
} from "./moveDialog-5c6d7302.js";

import ka, {
    __tla as ba
} from "./libraryPreview-b159731a.js";

import {
    a as xa,
    b as Ca,
    E as Na,
    __tla as Da
} from "./index-5adb716b.js";

import {
    _ as Sa
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as za
} from "./index-993301ca.js";

import "./tree-05ea8e09.js";

import {
    __tla as La
} from "./DeptTag-1be092ce.js";

import {
    __tla as Aa
} from "./index-ef4d146e.js";

import "./validate-b72f006c.js";

import {
    __tla as Fa
} from "./el-drawer-fca4d971.js";

import {
    __tla as Ra
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import "./color-a8b4eb58.js";

import {
    __tla as Ea
} from "./dict-c5825220.js";

import {
    __tla as Ma
} from "./largeQuestionPreview-0d03e5d2.js";

import {
    __tla as Pa
} from "./questionPreview-3c0f3206.js";

import {
    __tla as Ba
} from "./type1-bb9ab50e.js";

import {
    __tla as Ia
} from "./type2-f7593207.js";

import {
    __tla as Ta
} from "./type3-f0157d42.js";

import {
    __tla as ja
} from "./type4-e194cfc5.js";

import {
    __tla as Oa
} from "./type5-5cfc2694.js";

import {
    __tla as Ua
} from "./type6-f24b6333.js";

import {
    __tla as Qa
} from "./type7-6a71ebde.js";

import {
    __tla as qa
} from "./video-1d0dc730.js";

import {
    __tla as Ha
} from "./type20-1bb6de92.js";

import {
    __tla as Va
} from "./type30-1635403c.js";

import {
    __tla as Ga
} from "./myQuestionBank-a9dcc9db.js";

import {
    __tla as Wa
} from "./chooseTags-11285796.js";

import {
    __tla as Ja
} from "./questionBank-6fe58de9.js";

import {
    __tla as Ka
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Xa
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import "./editEditor.vue_vue_type_style_index_0_scoped_bf777343_lang-f0d79ba2.js";

import {
    __tla as Ya
} from "./viewDatabase.vue_vue_type_script_setup_true_lang-a51e8548.js";

import {
    __tla as Za
} from "./sqlDetail-6033fcff.js";

import {
    __tla as $a
} from "./selectCourseResourcePackageQuestion.vue_vue_type_style_index_0_scoped_270afb37_lang-ab43f27d.js";

let pe, et = Promise.all([ (() => {
    try {
        return Te;
    } catch {}
})(), (() => {
    try {
        return Oe;
    } catch {}
})(), (() => {
    try {
        return Qe;
    } catch {}
})(), (() => {
    try {
        return He;
    } catch {}
})(), (() => {
    try {
        return Ge;
    } catch {}
})(), (() => {
    try {
        return sa;
    } catch {}
})(), (() => {
    try {
        return ia;
    } catch {}
})(), (() => {
    try {
        return ca;
    } catch {}
})(), (() => {
    try {
        return ma;
    } catch {}
})(), (() => {
    try {
        return pa;
    } catch {}
})(), (() => {
    try {
        return ga;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return Da;
    } catch {}
})(), (() => {
    try {
        return za;
    } catch {}
})(), (() => {
    try {
        return La;
    } catch {}
})(), (() => {
    try {
        return Aa;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Ra;
    } catch {}
})(), (() => {
    try {
        return Ea;
    } catch {}
})(), (() => {
    try {
        return Ma;
    } catch {}
})(), (() => {
    try {
        return Pa;
    } catch {}
})(), (() => {
    try {
        return Ba;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return Ta;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return Oa;
    } catch {}
})(), (() => {
    try {
        return Ua;
    } catch {}
})(), (() => {
    try {
        return Qa;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Ha;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Ga;
    } catch {}
})(), (() => {
    try {
        return Wa;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Ka;
    } catch {}
})(), (() => {
    try {
        return Xa;
    } catch {}
})(), (() => {
    try {
        return Ya;
    } catch {}
})(), (() => {
    try {
        return Za;
    } catch {}
})(), (() => {
    try {
        return $a;
    } catch {}
})() ]).then(async () => {
    let j, O, U, Q, q, H, V, G, W, J, K, X, Y;
    j = {
        key: 0
    }, O = {
        class: "top-box"
    }, U = {
        key: 0,
        class: "right btns-box"
    }, Q = {
        class: "file-path"
    }, q = [ "onClick" ], H = {
        key: 1,
        class: "path-item stop"
    }, V = [ "onClick" ], G = [ "title" ], W = {
        style: {
            "max-width": "100px",
            overflow: "hidden",
            "text-overflow": "ellipsis",
            "white-space": "nowrap",
            display: "inline-block"
        }
    }, J = {
        class: "items-left flex justify-left"
    }, K = {
        class: "neu-table-more"
    }, X = {
        class: "bottom-box"
    }, Y = {
        class: "page-empty w-100%"
    }, pe = Sa(We({
        name: "PrivateExamPaperLibrary",
        __name: "examPaperLibrary",
        setup(at) {
            const ue = Je(), _ = ne({
                id: 0,
                folderName: "根目录",
                release: 1
            }), L = ie(() => _e().isTeacher), D = i(!1), Z = i({}), A = i(), S = i(), F = i(), R = i(), E = i(), $ = i([]);
            _e();
            const p = Ke(), C = i([]), fe = ie(() => []), z = i([]), w = i([]), ee = i(10);
            let ae = i(10);
            const u = ne({
                release: "",
                condition: "",
                pageNumber: 1,
                pageSize: 10
            }), he = i(!1);
            Xe(() => {
                v(_.id);
            }), Ye(() => {
                v("", !0), ce({
                    id: T(_.id),
                    release: 1
                }).then(a => {
                    C.value.push(...a);
                });
            });
            const te = a => {
                a.folder ? (S.value.resetParamsFile(), _.id = a.id ?? "", _.folderName = a.name, 
                v(_.id), re(_.id)) : fa(a.id).then(e => {
                    Z.value = e, D.value = !0;
                });
            }, re = (a = "") => {
                ce({
                    id: T(a),
                    release: 1
                }).then(e => {
                    C.value = e;
                });
            }, M = a => {
                switch (a) {
                  case "addFolder":
                    A.value.openDialog({
                        title: "新建文件夹",
                        type: "add",
                        fatherObj: _
                    });
                    break;

                  case "tagManagement":
                    ue.push({
                        name: "LabelManagement",
                        params: {
                            subassembly: "paperLabel"
                        }
                    });
                }
            };
            function ye({
                row: a,
                column: e,
                rowIndex: c,
                columnIndex: s
            }) {
                return (e.type === "expand" ? "is-folder" : "is-question") + " pointer";
            }
            const v = (a = "", e = !1) => {
                let c = {
                    parentId: T(a),
                    ...u,
                    pageNumber: u.pageNumber - 1
                };
                ua(c).then(s => {
                    z.value = s.pageList.content, ee.value = s.pageList.totalElements, 
                    e && (ae.value = s.pageList.totalElements), $.value = [];
                });
            };
            function ge(a) {
                re(), u.condition = a.condition || "", u.release = a.release || "", 
                v();
            }
            const we = () => {
                _.id = "0", S.value && S.value.resetParamsFile();
            }, P = async (a, e) => {
                switch (a) {
                  case "handlePublic":
                    await p.confirm("资源公开后将显示在校本资源库里，所有人均可查看和使用，且公开后该资源不可再修改或删除， 确定公开吗？", "提示");
                    let c = [];
                    w.value.forEach(f => {
                        c.push({
                            folder: f.folder,
                            id: f.id
                        });
                    }), me(c).then(f => {
                        N(), p.success("公开成功");
                    });
                    break;

                  case "handleMove":
                    let s = await de(1);
                    E.value.openDialog({
                        title: "移动到",
                        treeList: s,
                        ids: [ e.id ],
                        release: 1
                    });
                    break;

                  case "handleEdit":
                    e.folder && A.value.openDialog({
                        title: "编辑文件夹",
                        type: "edit",
                        editObject: e,
                        fatherObj: _
                    });
                    break;

                  case "handleDownloadA3":
                    await le(e, 1);
                    break;

                  case "handleDownloadA4":
                    await le(e, 2);
                    break;

                  case "handleDelete":
                    await ke(e);
                }
            }, le = (a, e) => {
                let c = {
                    paperId: a.id,
                    paperType: e
                };
                downloadTestPaperByIdApi(c).then(s => {
                    s.code && s.code === 500 || fileObject.storageFile(s, s.fileName || "试卷.docx");
                });
            };
            function ve(a, e, c, s) {
                return c || "--";
            }
            const ke = async a => {
                await p.delConfirm("确定删除该资源吗？删除后不可恢复！", "提示"), ha({
                    id: a.id,
                    folder: a.folder
                }).then(() => {
                    N(), p.success("操作成功");
                });
            };
            function be(a) {
                w.value = [ ...a ], w.value.length === z.value.length ? R.value.checkBox = !0 : R.value.checkBox = !1;
            }
            const xe = async () => {
                await p.delConfirm("确定删除这些资源吗？删除后不可恢复！", "提示");
                let a = [];
                w.value.map(e => {
                    a.push({
                        id: e.id,
                        folder: e.folder
                    });
                }), ya(a).then(() => {
                    p.success("操作成功"), N();
                });
            }, Ce = async () => {
                await p.confirm("资源公开后将显示在校本资源库里，所有人均可查看和使用，且公开后该资源不可再修改或删除， 确定要公开这些资源吗？", "提示");
                let a = [];
                w.value.forEach(e => {
                    a.push({
                        folder: e.folder,
                        id: e.id
                    });
                }), me(a).then(e => {
                    N(), p.success("公开成功");
                });
            }, Ne = async () => {
                let a = await de(1);
                E.value.openDialog({
                    title: "移动到",
                    treeList: a,
                    ids: w.value.map(e => e.id),
                    release: 1
                });
            }, De = async () => {
                await p.confirm("确定下载这些资源吗？", "提示");
            }, Se = a => {
                a ? F.value.toggleAllSelection() : F.value.clearSelection();
            }, N = () => {
                v(_.id);
            }, ze = () => {
                u.page = 1, v(_.id, !0);
            };
            return (a, e) => {
                const c = na, s = aa, f = ta, h = ra, Le = la, B = xa, Ae = Ca, Fe = Na, Re = oa, Ee = Ve, Me = qe, Pe = Ue, oe = je, Be = Ie;
                return n(), k("div", null, [ l(ae) > 0 ? (n(), k("div", j, [ r(oe, {
                    class: "cont-box"
                }, {
                    default: o(() => [ d("div", O, [ r(c, {
                        ref_key: "ComSearchRef",
                        ref: S,
                        keywordsInfo: {
                            label: "试卷名称/试卷标签/文件夹名称",
                            key: "condition"
                        },
                        searchList: l(fe),
                        class: "left",
                        onHandleSearch: ge,
                        onHandleReset: we
                    }, null, 8, [ "searchList" ]), l(L) ? b("", !0) : (n(), k("div", U, [ r(f, {
                        plain: "",
                        size: "large",
                        type: "primary",
                        onClick: e[0] || (e[0] = t => M("addFolder"))
                    }, {
                        default: o(() => [ r(s, {
                            icon: "ep:plus",
                            svgClass: "mr-5px"
                        }), y(" 新建文件夹 ") ]),
                        _: 1
                    }), r(f, {
                        plain: "",
                        size: "large",
                        type: "primary",
                        onClick: e[1] || (e[1] = t => M("tagManagement"))
                    }, {
                        default: o(() => [ r(s, {
                            icon: "svg-icon:tagManagement",
                            svgClass: "mr-5px"
                        }), y(" 标签管理 ") ]),
                        _: 1
                    }) ])) ]), d("div", Q, [ (n(!0), k(Ze, null, $e(l(C), (t, m) => (n(), 
                    k("div", {
                        key: t.id,
                        style: {
                            "max-width": "120px",
                            overflow: "hidden",
                            "white-space": "nowrap",
                            "text-overflow": "ellipsis"
                        }
                    }, [ m < l(C).length - 1 ? (n(), k("span", {
                        key: 0,
                        class: "path-item",
                        onClick: I => {
                            return (se = t).folder = !0, void te(se);
                            var se;
                        }
                    }, x(t.folderName), 9, q)) : (n(), k("span", H, x(t.folderName), 1)), m < l(C).length - 1 ? (n(), 
                    g(s, {
                        key: 2,
                        size: 10,
                        icon: "ep:arrow-right-bold",
                        style: {
                            margin: "0 10px"
                        }
                    })) : b("", !0) ]))), 128)) ]), r(Ee, {
                        class: "center-box",
                        "no-pager": !1,
                        "outer-height": 102
                    }, {
                        default: o(() => [ r(Re, {
                            ref_key: "ResourceTableRef",
                            ref: F,
                            "cell-class-name": ye,
                            data: l(z),
                            "expand-row-keys": l($),
                            "row-key": "id",
                            "header-row-class-name": "system-header",
                            height: "calc(100%)",
                            onSelectionChange: be
                        }, {
                            default: o(() => [ r(h, {
                                type: "selection",
                                width: "50"
                            }), r(h, {
                                key: "folderName",
                                label: "试卷名称/文件夹名称",
                                "min-width": "180px",
                                prop: "folderName"
                            }, {
                                default: o(t => [ d("div", {
                                    class: "file-name",
                                    onClick: m => te(t.row)
                                }, [ t.row.folder ? (n(), g(s, {
                                    key: 0,
                                    size: 18,
                                    icon: "svg-icon:folder",
                                    style: {
                                        "margin-right": "10px",
                                        "flex-shrink": "0"
                                    }
                                })) : (n(), g(s, {
                                    key: 1,
                                    size: 18,
                                    icon: "svg-icon:paper",
                                    style: {
                                        "margin-right": "10px",
                                        "flex-shrink": "0"
                                    }
                                })), d("span", {
                                    class: "file-name__span",
                                    title: t.row.name
                                }, x(t.row.name), 9, G) ], 8, V) ]),
                                _: 1
                            }), r(h, {
                                label: "题量",
                                prop: "paperScore",
                                width: "100"
                            }, {
                                default: o(t => [ d("span", null, x(t.row.paperQuestionQty || "--"), 1) ]),
                                _: 1
                            }), r(h, {
                                align: "left",
                                label: "总分",
                                prop: "paperScore",
                                width: "100"
                            }, {
                                default: o(t => [ d("span", null, x(t.row.paperScore || "--"), 1) ]),
                                _: 1
                            }), r(h, {
                                formatter: ve,
                                label: "所在文件夹",
                                prop: "belongToFolderName",
                                width: "100"
                            }, {
                                default: o(t => {
                                    var m;
                                    return [ r(Le, {
                                        class: "item",
                                        effect: "dark",
                                        content: (m = t.row.ancestorsFolderName) == null ? void 0 : m.replace(/,/g, "/"),
                                        placement: "top"
                                    }, {
                                        default: o(() => {
                                            var I;
                                            return [ d("span", W, x((I = t.row.belongToFolderName) == null ? void 0 : I.split(",").slice(-1)[0]), 1) ];
                                        }),
                                        _: 2
                                    }, 1032, [ "content" ]) ];
                                }),
                                _: 1
                            }), r(h, {
                                label: "公开人",
                                prop: "publisherName",
                                width: "100"
                            }), r(h, {
                                label: "公开时间",
                                prop: "publisherTime",
                                formatter: l(da),
                                width: "170"
                            }, null, 8, [ "formatter" ]), l(L) ? b("", !0) : (n(), 
                            g(h, {
                                key: 0,
                                fixed: "right",
                                label: "操作",
                                width: "160"
                            }, {
                                default: o(t => [ d("div", J, [ r(f, {
                                    link: "",
                                    size: "small",
                                    type: "primary",
                                    onClick: m => P("handleMove", t.row)
                                }, {
                                    default: o(() => [ y(" 移动 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), r(f, {
                                    type: "primary",
                                    size: "small",
                                    link: "",
                                    onClick: m => P("handleEdit", t.row)
                                }, {
                                    default: o(() => [ y(" 编辑 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), r(Fe, {
                                    style: {
                                        "background-color": "transparent"
                                    },
                                    trigger: "click",
                                    onCommand: m => P(m, t.row)
                                }, {
                                    dropdown: o(() => [ r(Ae, null, {
                                        default: o(() => [ r(B, {
                                            command: "handleDelete"
                                        }, {
                                            default: o(() => [ y(" 删除 ") ]),
                                            _: 1
                                        }), t.row.folder ? b("", !0) : (n(), g(B, {
                                            key: 0,
                                            command: "handleDownloadA3"
                                        }, {
                                            default: o(() => [ y(" 下载（A3格式） ") ]),
                                            _: 1
                                        })), t.row.folder ? b("", !0) : (n(), g(B, {
                                            key: 1,
                                            command: "handleDownloadA4"
                                        }, {
                                            default: o(() => [ y(" 下载（A4格式） ") ]),
                                            _: 1
                                        })) ]),
                                        _: 2
                                    }, 1024) ]),
                                    default: o(() => [ d("div", K, [ r(s, {
                                        size: 10,
                                        icon: "svg-icon:more"
                                    }) ]) ]),
                                    _: 2
                                }, 1032, [ "onCommand" ]) ]) ]),
                                _: 1
                            })) ]),
                            _: 1
                        }, 8, [ "data", "expand-row-keys" ]) ]),
                        _: 1
                    }), d("div", X, [ r(Me, {
                        limit: l(u).pageSize,
                        "onUpdate:limit": e[2] || (e[2] = t => l(u).pageSize = t),
                        page: l(u).pageNumber,
                        "onUpdate:page": e[3] || (e[3] = t => l(u).pageNumber = t),
                        total: l(ee),
                        onPagination: e[4] || (e[4] = t => v())
                    }, null, 8, [ "limit", "page", "total" ]) ]), r(Pe, {
                        ref_key: "SelectionButtonGroupRef",
                        ref: R,
                        btnList: [ "delete", "move", "download" ],
                        checkBox: l(he),
                        "page-list": l(z),
                        "select-list": l(w),
                        subject: "文件/文件夹",
                        onDelete: xe,
                        onDownload: De,
                        onMove: Ne,
                        onShare: Ce,
                        onSelectAll: Se
                    }, null, 8, [ "checkBox", "page-list", "select-list" ]) ]),
                    _: 1
                }) ])) : (n(), g(oe, {
                    key: 1,
                    class: "cont-box"
                }, {
                    default: o(() => [ d("div", Y, [ r(Be, {
                        msg: "暂无资源",
                        type: "resource"
                    }), l(L) ? b("", !0) : (n(), g(f, {
                        key: 0,
                        size: "large",
                        type: "primary",
                        onClick: e[5] || (e[5] = t => M("addFolder"))
                    }, {
                        default: o(() => [ y(" 新建文件夹 "), r(s, {
                            icon: "ep:plus",
                            svgClass: "ml5"
                        }) ]),
                        _: 1
                    })) ]) ]),
                    _: 1
                })), r(_a, {
                    ref_key: "AddFolderRef",
                    ref: A,
                    onRefresh: ze
                }, null, 512), r(wa, {
                    ref_key: "MoveDialogRef",
                    ref: E,
                    onRefresh: N
                }, null, 512), r(ka, {
                    modelValue: l(D),
                    "onUpdate:modelValue": e[6] || (e[6] = t => ea(D) ? D.value = t : null),
                    form: l(Z),
                    "is-edit": !1
                }, null, 8, [ "modelValue", "form" ]) ]);
            };
        }
    }), [ [ "__scopeId", "data-v-33960be4" ] ]);
});

export {
    et as __tla,
    pe as default
};