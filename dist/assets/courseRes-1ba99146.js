import {
    _ as qe,
    __tla as Qe
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    _ as Xe,
    __tla as Ye
} from "./index-71666e05.js";

import {
    _ as Ze,
    __tla as $e
} from "./ContentPage-f6bcc98e.js";

import {
    _ as ea,
    __tla as aa
} from "./index-e2094cc0.js";

import {
    _ as ta,
    __tla as ra
} from "./index-c4ca0ced.js";

import {
    _ as la,
    __tla as oa
} from "./index-8b41572c.js";

import {
    u as sa,
    T as ia,
    e as U,
    r as c,
    h as na,
    p as ca,
    U as pa,
    o as t,
    c as s,
    a as i,
    k as r,
    l as o,
    t as d,
    C as k,
    v as g,
    D as b,
    F as B,
    y as _a,
    B as u,
    bB as Ne,
    E as da,
    _ as ua,
    J as ma,
    ad as fa,
    K as ya,
    ae as ha,
    R as ka,
    S as ga,
    __tla as va
} from "./index-6c08ea4c.js";

import {
    _ as wa,
    __tla as ba
} from "./index-1024512a.js";

import {
    _ as xa
} from "./courseIcon-6fd2663f.js";

import Ca, {
    __tla as Na
} from "./addFolder-cb858140.js";

import Pa, {
    __tla as Ra
} from "./moveDialog-777b008a.js";

import Sa, {
    __tla as Ia
} from "./addStep1-a92bd891.js";

import za, {
    __tla as Ta
} from "./settingTabs-341d1d56.js";

import Da, {
    __tla as ja
} from "./authorizationInfo-5c30638b.js";

import {
    d as Pe,
    __tla as Fa
} from "./formatTime-de6f1520.js";

import {
    h as La,
    __tla as Aa
} from "./file-e038b35d.js";

import {
    g as Ea,
    r as Oa,
    b as D,
    c as Ma,
    __tla as Ua
} from "./list-6e502bc8.js";

import {
    _ as Ba
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Wa
} from "./index.es-14d10e28.js";

import {
    __tla as Ga
} from "./project-file-a2b4fd07.js";

import {
    __tla as Ja
} from "./index-993301ca.js";

import "./tree-05ea8e09.js";

import {
    __tla as Ka
} from "./DeptTag-1be092ce.js";

import {
    __tla as Va
} from "./index-ef4d146e.js";

import "./validate-b72f006c.js";

import {
    __tla as Ha
} from "./Editor-ef737d2a.js";

import {
    __tla as qa
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Qa
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

import {
    __tla as Xa
} from "./UploadCover-f16f2b2c.js";

import {
    __tla as Ya
} from "./el-image-0d184777.js";

import {
    __tla as Za
} from "./el-image-viewer-2c0d56e4.js";

import {
    __tla as $a
} from "./throttle-1adeb119.js";

import {
    __tla as et
} from "./resApi-8ab67bac.js";

import {
    __tla as at
} from "./list-724ebf74.js";

import "./sortable.esm-60ca6365.js";

let Re, tt = Promise.all([ (() => {
    try {
        return Qe;
    } catch {}
})(), (() => {
    try {
        return Ye;
    } catch {}
})(), (() => {
    try {
        return $e;
    } catch {}
})(), (() => {
    try {
        return aa;
    } catch {}
})(), (() => {
    try {
        return ra;
    } catch {}
})(), (() => {
    try {
        return oa;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return ba;
    } catch {}
})(), (() => {
    try {
        return Na;
    } catch {}
})(), (() => {
    try {
        return Ra;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return Ta;
    } catch {}
})(), (() => {
    try {
        return ja;
    } catch {}
})(), (() => {
    try {
        return Fa;
    } catch {}
})(), (() => {
    try {
        return Aa;
    } catch {}
})(), (() => {
    try {
        return Ua;
    } catch {}
})(), (() => {
    try {
        return Wa;
    } catch {}
})(), (() => {
    try {
        return Ga;
    } catch {}
})(), (() => {
    try {
        return Ja;
    } catch {}
})(), (() => {
    try {
        return Ka;
    } catch {}
})(), (() => {
    try {
        return Va;
    } catch {}
})(), (() => {
    try {
        return Ha;
    } catch {}
})(), (() => {
    try {
        return qa;
    } catch {}
})(), (() => {
    try {
        return Qa;
    } catch {}
})(), (() => {
    try {
        return Xa;
    } catch {}
})(), (() => {
    try {
        return Ya;
    } catch {}
})(), (() => {
    try {
        return Za;
    } catch {}
})(), (() => {
    try {
        return $a;
    } catch {}
})(), (() => {
    try {
        return et;
    } catch {}
})(), (() => {
    try {
        return at;
    } catch {}
})() ]).then(async () => {
    let W, G, J, K, V, H, q, Q, X, Y, Z, $, ee, ae, te, re, le, oe, se, ie, ne, ce, pe, _e, de, ue, me;
    W = {
        id: "courseResList"
    }, G = {
        key: 0,
        id: "publishPkgList"
    }, J = {
        class: "top-box"
    }, K = {
        class: "right btns-box header-btns"
    }, V = {
        class: "file-path"
    }, H = [ "onClick" ], q = {
        key: 1,
        class: "path-item stop"
    }, Q = {
        class: "file-name"
    }, X = {
        key: 1,
        src: xa,
        alt: "",
        style: {
            width: "18px",
            "flex-shrink": "0",
            "margin-right": "10px"
        }
    }, Y = [ "title", "onClick" ], Z = {
        key: 2,
        class: "file-tag",
        style: {
            "margin-left": "7px"
        }
    }, $ = [ (P => (ka("data-v-69dda4c3"), P = P(), ga(), P))(() => d("span", null, "NEU", -1)) ], 
    ee = {
        key: 0
    }, ae = {
        key: 1
    }, te = {
        key: 0
    }, re = {
        key: 1
    }, le = {
        key: 0
    }, oe = {
        key: 1
    }, se = {
        style: {
            display: "flex",
            "align-items": "center"
        }
    }, ie = {
        style: {
            "max-width": "225px",
            overflow: "hidden",
            "text-overflow": "ellipsis",
            "white-space": "nowrap",
            display: "inline-block"
        }
    }, ne = {
        key: 0
    }, ce = {
        key: 1
    }, pe = {
        key: 0
    }, _e = {
        key: 1
    }, de = {
        class: "items-left flex justify-left"
    }, ue = {
        class: "bottom-box"
    }, me = {
        class: "page-empty w-100%"
    }, Re = Ba({
        __name: "courseRes",
        setup(P) {
            const j = sa(), Se = ia(), x = U(() => y.value && y.value.length > 0 ? y.value[y.value.length - 1] : {
                id: "0",
                pkgName: "根目录",
                pkgType: 0,
                pkgDesc: "根目录",
                pvtParentId: "",
                pvtAncestorId: "",
                pubParentId: "",
                pubAncestorId: "",
                release: 1,
                pkgRelease: 1,
                creatorName: "",
                updaterName: "",
                children: []
            }), F = c(), R = c(), Ie = c(), L = c(), fe = c(), ze = c(), A = c(), ye = c(), he = c(), Te = na(), f = ca(), S = U(() => Te.getUser.curIdentity == 4), De = U(() => [ {
                label: "资源来源",
                key: "pkgSource",
                type: "list",
                options: [ {
                    label: "本校",
                    value: 0
                }, {
                    label: "NEU（东软）",
                    value: 1
                } ]
            } ]), I = c([]), z = c([]), y = c([]), ke = c(0), C = c(0), n = pa({
                pubParentId: "0",
                pkgName: "",
                pkgSource: "",
                pageNo: 1,
                pageSize: 10
            }), ge = a => {
                switch (a) {
                  case "addpkg":
                    we({
                        type: "add",
                        row: {}
                    });
                    break;

                  case "addFolder":
                    F.value.openDialog({
                        title: "新建文件夹",
                        fatherObj: x,
                        type: "add"
                    });
                }
            };
            function ve(a) {
                return a == null || a === "" || Array.isArray(a) && a.length === 0 || typeof a == "object" && Object.keys(a).length === 0;
            }
            function je(a) {
                n.pageNo = 1, n.pkgName = a.pkgName ?? "", n.pkgSource = a.pkgSource ?? "", 
                ve(n.pkgName) && ve(n.pkgSource) ? n.pubParentId = x.value.id : n.pubParentId = "", 
                v(), E("0");
            }
            const v = () => {
                Ea({
                    ...n,
                    tenantId: Ne()
                }).then(a => {
                    var l;
                    (l = R.value) == null || l.clearSelection(), I.value = a.records, 
                    I.value.forEach(w => {
                        w.release = w.pkgRelease;
                    }), ke.value = a.total, C.value = C.value === 0 ? a.total : C.value;
                });
            }, we = ({
                type: a,
                row: l
            }) => {
                A.value.open({
                    type: a,
                    row: l,
                    fatherObj: x.value
                });
            }, Fe = a => {
                a.operate == "cancel" || (v(), ye.value.open(a.courseResId));
            }, E = a => {
                Oa({
                    id: a,
                    release: 1
                }).then(l => {
                    y.value = l;
                });
            }, O = async (a, l) => {
                switch (a) {
                  case "handlePublic":
                    await f.confirm("资源公开后将显示在校本资源库里，所有人均可查看和使用，且公开后该资源不可再修改或删除， 确定公开吗？", "提示"), 
                    D({
                        release: 1
                    }, [ l.id ]).then(() => {
                        f.success("公开成功"), v();
                    });
                    break;

                  case "handleMove":
                    L.value.openDialog({
                        title: "移动到",
                        moveList: [ l.id ]
                    });
                    break;

                  case "handleDownLoad":
                    await La(l.eid, l.resName);
                    break;

                  case "handleDel":
                    await f.delConfirm("确定删除该资源吗？删除后校本资源库中将不再显示！", "提示"), D({
                        release: 0
                    }, [ l.id ]).then(() => {
                        f.success("删除成功"), N();
                    });
                    break;

                  case "handleEdit":
                    F.value.openDialog({
                        title: "编辑文件夹",
                        editObject: l,
                        fatherObj: x,
                        type: "edit"
                    });
                    break;

                  case "handleEditRes":
                    we({
                        type: "edit",
                        row: l
                    });
                    break;

                  case "copy":
                    break;

                  case "manage":
                    var w = null;
                    Se.name == "PrivateCourseRes" && (w = "PrivateCourseResManage"), 
                    j.push({
                        name: w,
                        params: {
                            id: l.id
                        }
                    });
                }
            };
            function Le(a) {
                z.value = [ ...a ];
            }
            const be = async a => {
                await f.delConfirm("确定删除该资源吗？删除后校本资源库中将不再显示！", "提示"), D({
                    release: 0
                }, [ a ]).then(() => {
                    f.success("删除成功"), N();
                });
            }, Ae = async () => {
                await f.delConfirm("确定删除该资源吗？删除后校本资源库中将不再显示！", "提示"), D({
                    release: 0
                }, z.value.map(a => a.id)).then(() => {
                    f.success("删除成功"), N();
                });
            }, Ee = async () => {
                L.value.openDialog({
                    title: "移动到",
                    moveList: z.value.map(a => a.id)
                });
            }, Oe = a => {
                a ? R.value.toggleAllSelection() : R.value.clearSelection();
            }, xe = a => {
                n.pubParentId = a.id, n.pageNo = 1, E(a.id), v();
            }, N = () => {
                n.pageNo = 1, v();
            }, Me = a => {
                A.value.open({
                    type: "edit",
                    row: {
                        id: a
                    },
                    fatherObj: x.value
                });
            };
            return E("0"), v(), (a, l) => {
                const w = wa, T = ua, h = ma, m = fa, Ue = ya, Be = ha, We = la, Ge = ta, Je = ea, Ce = Ze, Ke = Xe, Ve = qe;
                return t(), s("div", W, [ i(C) && i(C) > 0 ? (t(), s("div", G, [ r(Ce, {
                    class: "cont-box"
                }, {
                    default: o(() => [ d("div", J, [ r(w, {
                        ref_key: "ComSearchRef",
                        ref: fe,
                        searchList: i(De),
                        keywordsInfo: {
                            label: "资源名称/编号/面向对象/资源方向/文件夹名称",
                            key: "pkgName"
                        },
                        onHandleSearch: je,
                        class: "left"
                    }, null, 8, [ "searchList" ]), d("div", K, [ i(S) ? b("", !0) : (t(), 
                    k(h, {
                        key: 0,
                        type: "primary",
                        size: "large",
                        plain: "",
                        onClick: l[0] || (l[0] = e => ge("addFolder")),
                        style: {
                            "margin-left": "12px"
                        }
                    }, {
                        default: o(() => [ r(T, {
                            icon: "svg-icon:add_folder",
                            class: "mr-5px"
                        }), g(" 新建文件夹 ") ]),
                        _: 1
                    })) ]) ]), d("div", V, [ (t(!0), s(B, null, _a(i(y), (e, _) => (t(), 
                    s("div", {
                        key: e.id,
                        style: {
                            "max-width": "120px",
                            overflow: "hidden",
                            "white-space": "nowrap",
                            "text-overflow": "ellipsis"
                        }
                    }, [ _ < i(y).length - 1 ? (t(), s("span", {
                        key: 0,
                        class: "path-item",
                        onClick: p => xe(e)
                    }, u(e.pkgName), 9, H)) : (t(), s("span", q, u(e.pkgName), 1)), _ < i(y).length - 1 ? (t(), 
                    k(T, {
                        key: 2,
                        icon: "ep:arrow-right-bold",
                        size: 10,
                        style: {
                            margin: "0 10px"
                        }
                    })) : b("", !0) ]))), 128)) ]), r(We, {
                        class: "center-box",
                        "no-pager": !1,
                        "outer-height": 102
                    }, {
                        default: o(() => [ r(Be, {
                            ref_key: "ResourceTableRef",
                            ref: R,
                            data: i(I),
                            style: {
                                height: "100%"
                            },
                            "header-row-class-name": "system-header",
                            onSelectionChange: Le,
                            "row-key": "id"
                        }, {
                            default: o(() => [ i(S) ? b("", !0) : (t(), k(m, {
                                key: 0,
                                type: "selection",
                                width: "50"
                            })), r(m, {
                                label: "资源包名称/文件夹名称",
                                prop: "pkgName",
                                fixed: "",
                                width: "350px"
                            }, {
                                default: o(e => [ d("div", Q, [ e.row.pkgType == 0 ? (t(), 
                                k(T, {
                                    key: 0,
                                    icon: "svg-icon:folder",
                                    size: 18,
                                    style: {
                                        "margin-right": "10px",
                                        "flex-shrink": "0"
                                    }
                                })) : (t(), s("img", X)), d("span", {
                                    class: "file-name__span",
                                    title: e.row.resName,
                                    onClick: _ => (p => {
                                        if (p.pkgType == 0) fe.value.resetParamsFile(), 
                                        n.pkgName = "", n.pkgSource = "", xe(p); else if (p.neuPkgId) Ma({
                                            tenantId: Ne(),
                                            pkgProductionCode: p.pkgProductionCode
                                        }).then(M => {
                                            if (M) {
                                                const {
                                                    href: He
                                                } = j.resolve({
                                                    name: "PublishCourseResPreview",
                                                    params: {
                                                        id: p.id
                                                    }
                                                });
                                                window.open(He, "_blank");
                                            } else da.alert("该资源包授权已过期", {
                                                confirmButtonText: "确定"
                                            });
                                        }); else {
                                            const {
                                                href: M
                                            } = j.resolve({
                                                name: "PublishCourseResPreview",
                                                params: {
                                                    id: p.id
                                                }
                                            });
                                            window.open(M, "_blank");
                                        }
                                    })(e.row)
                                }, u(e.row.pkgName), 9, Y), e.row.neuPkgId ? (t(), 
                                s("div", Z, $)) : b("", !0) ]) ]),
                                _: 1
                            }), r(m, {
                                label: "资源包编号",
                                width: "180px",
                                "show-overflow-tooltip": ""
                            }, {
                                default: o(e => [ e.row.pkgType == 0 ? (t(), s("div", ee, "--")) : (t(), 
                                s("div", ae, u(e.row.pkgCode), 1)) ]),
                                _: 1
                            }), r(m, {
                                label: "面相对象",
                                width: "120px",
                                "show-overflow-tooltip": ""
                            }, {
                                default: o(e => [ e.row.pkgType == 0 ? (t(), s("div", te, "--")) : (t(), 
                                s("div", re, u(e.row.courseObject), 1)) ]),
                                _: 1
                            }), r(m, {
                                label: "专业方向",
                                width: "120px",
                                "show-overflow-tooltip": ""
                            }, {
                                default: o(e => [ e.row.pkgType == 0 ? (t(), s("div", le, "--")) : (t(), 
                                s("div", oe, u(e.row.pkgDirection), 1)) ]),
                                _: 1
                            }), r(m, {
                                label: "所在文件夹",
                                prop: "fileFolder",
                                "min-width": "100"
                            }, {
                                default: o(e => {
                                    var _;
                                    return [ d("div", se, [ r(Ue, {
                                        class: "item",
                                        effect: "dark",
                                        content: (_ = e.row.folderPath) == null ? void 0 : _.replace(/,/g, "/"),
                                        placement: "top"
                                    }, {
                                        default: o(() => {
                                            var p;
                                            return [ d("span", ie, u((p = e.row.folderPath) == null ? void 0 : p.split(",").slice(-1)[0]), 1) ];
                                        }),
                                        _: 2
                                    }, 1032, [ "content" ]) ]) ];
                                }),
                                _: 1
                            }), r(m, {
                                label: "公开人",
                                width: "120px",
                                "show-overflow-tooltip": ""
                            }, {
                                default: o(e => [ e.row.pkgType == 0 ? (t(), s("div", ne, u(e.row.creatorName), 1)) : (t(), 
                                s("div", ce, u(e.row.updaterName), 1)) ]),
                                _: 1
                            }), r(m, {
                                label: "公开时间",
                                width: "160px",
                                "show-overflow-tooltip": ""
                            }, {
                                default: o(e => [ e.row.pkgType == 0 ? (t(), s("div", pe, u(i(Pe)(e.row, e.row, e.row.createTime)), 1)) : (t(), 
                                s("div", _e, u(i(Pe)(e.row, e.row, e.row.updateTime)), 1)) ]),
                                _: 1
                            }), i(S) ? b("", !0) : (t(), k(m, {
                                key: 1,
                                label: "操作",
                                width: "150",
                                fixed: "right"
                            }, {
                                default: o(e => [ d("div", de, [ e.row.pkgType == 0 ? (t(), 
                                s(B, {
                                    key: 0
                                }, [ r(h, {
                                    link: "",
                                    size: "small",
                                    type: "primary",
                                    onClick: _ => O("handleEdit", e.row)
                                }, {
                                    default: o(() => [ g(" 编辑 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), r(h, {
                                    link: "",
                                    size: "small",
                                    type: "primary",
                                    onClick: _ => O("handleMove", e.row)
                                }, {
                                    default: o(() => [ g(" 移动 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), r(h, {
                                    link: "",
                                    size: "small",
                                    type: "danger",
                                    onClick: _ => be(e.row.id)
                                }, {
                                    default: o(() => [ g(" 删除 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]) ], 64)) : (t(), s(B, {
                                    key: 1
                                }, [ r(h, {
                                    link: "",
                                    size: "small",
                                    type: "primary",
                                    onClick: _ => O("handleMove", e.row)
                                }, {
                                    default: o(() => [ g(" 移动 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]), e.row.neuPkgId ? (t(), 
                                k(h, {
                                    key: 0,
                                    link: "",
                                    size: "small",
                                    type: "primary",
                                    onClick: _ => {
                                        return p = e.row, void he.value.open(p);
                                        var p;
                                    }
                                }, {
                                    default: o(() => [ g(" 授权信息 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ])) : b("", !0), r(h, {
                                    link: "",
                                    size: "small",
                                    type: "danger",
                                    onClick: _ => be(e.row.id)
                                }, {
                                    default: o(() => [ g(" 删除 ") ]),
                                    _: 2
                                }, 1032, [ "onClick" ]) ], 64)) ]) ]),
                                _: 1
                            })) ]),
                            _: 1
                        }, 8, [ "data" ]) ]),
                        _: 1
                    }), d("div", ue, [ r(Ge, {
                        total: i(ke),
                        page: i(n).pageNo,
                        "onUpdate:page": l[1] || (l[1] = e => i(n).pageNo = e),
                        limit: i(n).pageSize,
                        "onUpdate:limit": l[2] || (l[2] = e => i(n).pageSize = e),
                        onPagination: v
                    }, null, 8, [ "total", "page", "limit" ]) ]), r(Je, {
                        ref_key: "SelectionButtonGroupRef",
                        ref: Ie,
                        "select-list": i(z),
                        "page-list": i(I),
                        btnList: [ "delete", "move" ],
                        subject: "文件/文件夹",
                        onDelete: Ae,
                        onMove: Ee,
                        onSelectAll: Oe
                    }, null, 8, [ "select-list", "page-list" ]) ]),
                    _: 1
                }) ])) : (t(), k(Ce, {
                    key: 1,
                    class: "cont-box"
                }, {
                    default: o(() => [ d("div", me, [ r(Ke, {
                        type: "resource",
                        msg: "暂无资源"
                    }), i(S) ? b("", !0) : (t(), k(h, {
                        key: 0,
                        type: "primary",
                        size: "large",
                        onClick: l[3] || (l[3] = e => ge("addFolder"))
                    }, {
                        default: o(() => [ r(T, {
                            icon: "svg-icon:add_folder",
                            class: "mr-5px"
                        }), g(" 新建文件夹 ") ]),
                        _: 1
                    })) ]) ]),
                    _: 1
                })), r(Ca, {
                    ref_key: "AddFolderRef",
                    ref: F,
                    onRefresh: N,
                    storeWay: 1
                }, null, 512), r(Pa, {
                    ref_key: "MoveDialogRef",
                    ref: L,
                    onRefresh: N,
                    storeWay: 1
                }, null, 512), r(Ve, {
                    ref_key: "ResourcePreviewRef",
                    ref: ze
                }, null, 512), r(Sa, {
                    ref_key: "addStep1Ref",
                    ref: A,
                    onRefresh: Fe
                }, null, 512), r(za, {
                    ref_key: "settingTabsRef",
                    ref: ye,
                    onBack: Me
                }, null, 512), r(Da, {
                    ref_key: "authorizationInfoRef",
                    ref: he
                }, null, 512) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-69dda4c3" ] ]);
});

export {
    tt as __tla,
    Re as default
};