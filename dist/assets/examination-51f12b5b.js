import {
    _ as re,
    __tla as ie
} from "./index-c4ca0ced.js";

import {
    p as oe,
    r as n,
    U as ne,
    f as se,
    j as ce,
    o as d,
    c as y,
    t as r,
    k as v,
    a as o,
    F as me,
    y as ue,
    z as D,
    B as b,
    D as C,
    A as R,
    l as F,
    C as Ma,
    v as Da,
    H as Ra,
    G as _e,
    m as Pa,
    E as de,
    n as ve,
    _ as pe,
    K as fe,
    J as he,
    R as Se,
    S as ye,
    __tla as be
} from "./index-6c08ea4c.js";

import {
    _ as ge,
    __tla as xe
} from "./DictTag.vue_vue_type_script_lang-bb90acfe.js";

import {
    _ as ke,
    __tla as Ie
} from "./index-1024512a.js";

import Ne, {
    __tla as we
} from "./markingSetting-4fb8b58c.js";

import Te, {
    __tla as je
} from "./testPaperMarking-b9cba0bc.js";

import {
    r as Ce,
    g as P,
    m as U,
    b as Fe,
    s as He,
    l as Oe,
    a as Be,
    c as Le,
    __tla as ze
} from "./markingCenter-690f9b44.js";

import Me, {
    __tla as De
} from "./progressBar-2f4ab3cc.js";

import {
    D as Re,
    __tla as Pe
} from "./dict-c5825220.js";

import {
    f as Ua,
    __tla as Ue
} from "./formatTime-de6f1520.js";

import {
    _ as qe
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as Ae
} from "./index-993301ca.js";

import "./color-a8b4eb58.js";

import "./tree-05ea8e09.js";

import {
    __tla as Ke
} from "./DeptTag-1be092ce.js";

import {
    __tla as Ve
} from "./index-ef4d146e.js";

import {
    __tla as Ee
} from "./el-drawer-fca4d971.js";

import {
    __tla as Qe
} from "./el-link-8197297a.js";

import {
    __tla as Ge
} from "./largeQuestionPreview-20dd6ad1.js";

import {
    __tla as $e
} from "./markCounterByQuestion-78d7029b.js";

import {
    __tla as Je
} from "./questionMark-832136d5.js";

import {
    __tla as Xe
} from "./type1-d2f1fe5f.js";

import {
    __tla as We
} from "./type2-23e73879.js";

import {
    __tla as Ye
} from "./type3-99183189.js";

import {
    __tla as Ze
} from "./type4-8e8aae4d.js";

import {
    __tla as at
} from "./type5-c77ba902.js";

import "./keyboardDisable-3c8e0d58.js";

import {
    __tla as et
} from "./type6-10786b18.js";

import {
    __tla as tt
} from "./type7-6d90f77a.js";

import {
    __tla as lt
} from "./index-bbb36ead.js";

import {
    __tla as rt
} from "./file-e038b35d.js";

import {
    __tla as it
} from "./type20-1c61a004.js";

import {
    __tla as ot
} from "./myQuestionBank-a9dcc9db.js";

import {
    __tla as nt
} from "./type30-727e9366.js";

import "./el-collapse-transition-4ed993c7.js";

import {
    __tla as st
} from "./sqlDetail-4b79b2e5.js";

let qa, ct = Promise.all([ (() => {
    try {
        return ie;
    } catch {}
})(), (() => {
    try {
        return be;
    } catch {}
})(), (() => {
    try {
        return xe;
    } catch {}
})(), (() => {
    try {
        return Ie;
    } catch {}
})(), (() => {
    try {
        return we;
    } catch {}
})(), (() => {
    try {
        return je;
    } catch {}
})(), (() => {
    try {
        return ze;
    } catch {}
})(), (() => {
    try {
        return De;
    } catch {}
})(), (() => {
    try {
        return Pe;
    } catch {}
})(), (() => {
    try {
        return Ue;
    } catch {}
})(), (() => {
    try {
        return Ae;
    } catch {}
})(), (() => {
    try {
        return Ke;
    } catch {}
})(), (() => {
    try {
        return Ve;
    } catch {}
})(), (() => {
    try {
        return Ee;
    } catch {}
})(), (() => {
    try {
        return Qe;
    } catch {}
})(), (() => {
    try {
        return Ge;
    } catch {}
})(), (() => {
    try {
        return $e;
    } catch {}
})(), (() => {
    try {
        return Je;
    } catch {}
})(), (() => {
    try {
        return Xe;
    } catch {}
})(), (() => {
    try {
        return We;
    } catch {}
})(), (() => {
    try {
        return Ye;
    } catch {}
})(), (() => {
    try {
        return Ze;
    } catch {}
})(), (() => {
    try {
        return at;
    } catch {}
})(), (() => {
    try {
        return et;
    } catch {}
})(), (() => {
    try {
        return tt;
    } catch {}
})(), (() => {
    try {
        return lt;
    } catch {}
})(), (() => {
    try {
        return rt;
    } catch {}
})(), (() => {
    try {
        return it;
    } catch {}
})(), (() => {
    try {
        return ot;
    } catch {}
})(), (() => {
    try {
        return nt;
    } catch {}
})(), (() => {
    try {
        return st;
    } catch {}
})() ]).then(async () => {
    let u, q, A, K, V, E, Q, G, $, J, X, W, Y, Z, aa, ea, ta, la, ra, ia, oa, na, sa, ca, ma, ua, _a, da, va, pa, fa, ha, Sa, ya, ba, ga, xa;
    u = w => (Se("data-v-6f080e32"), w = w(), ye(), w), q = {
        class: "examination_container"
    }, A = {
        class: "search_box"
    }, K = {
        class: "data-list px-5"
    }, V = [ "onClick" ], E = {
        class: "item-title"
    }, Q = {
        class: "item-status"
    }, G = {
        class: "open-btn"
    }, $ = {
        class: "item-info"
    }, J = {
        class: "info-item"
    }, X = u(() => r("span", {
        class: "info-item-label"
    }, "开始时间：", -1)), W = {
        class: "info-item-value"
    }, Y = {
        class: "info-item"
    }, Z = u(() => r("span", {
        class: "info-item-label"
    }, "结束时间：", -1)), aa = {
        class: "info-item-value"
    }, ea = {
        class: "info-item"
    }, ta = u(() => r("span", {
        class: "info-item-label"
    }, "试卷满分：", -1)), la = {
        class: "info-item-value"
    }, ra = {
        key: 0,
        class: "info-item"
    }, ia = u(() => r("span", {
        class: "info-item-label"
    }, "关联课程：", -1)), oa = {
        class: "info-item-value"
    }, na = {
        class: D([ "item-info mb5" ])
    }, sa = {
        class: "info-item"
    }, ca = u(() => r("span", {
        class: "info-item-label"
    }, "排考人：", -1)), ma = {
        class: "info-item-value"
    }, ua = {
        class: "neu-thumbnailDisplay item-value-width"
    }, _a = {
        class: "info-item"
    }, da = u(() => r("span", {
        class: "info-item-label"
    }, "阅卷人范围：", -1)), va = {
        class: "info-item-value"
    }, pa = {
        class: "neu-thumbnailDisplay item-value-width"
    }, fa = u(() => r("br", null, null, -1)), ha = {
        class: "footerContainer"
    }, Sa = {
        class: "btns-list"
    }, ya = {
        class: "progressBarContainer"
    }, ba = {
        key: 0,
        class: "empty-box"
    }, ga = [ u(() => r("div", {
        class: "empty-image"
    }, null, -1)) ], xa = {
        class: "pagination"
    }, qa = qe({
        __name: "examination",
        setup(w) {
            const Aa = oe(), H = n(0), O = n(""), Ka = n(null), I = n([]), g = n([]), ka = n(""), B = n(0), L = n(""), z = n(null), m = n(!1), p = n(!1), Ia = n({}), N = n({
                searchText: "",
                status: "",
                dateTime: [ "", "" ]
            }), i = n({
                examName: "",
                nickName: "",
                number: "",
                examId: "",
                candidateId: "",
                multiSelectionHalfScoreSwitch: ""
            }), c = n({
                finalScore: 0,
                objectiveScore: 0
            }), T = n("0"), S = n([]), _ = ne({
                pageNum: 1,
                pageSize: 10
            }), f = n({}), Va = n([ {
                label: "阅卷状态",
                key: "status",
                type: "list",
                options: [ {
                    label: "全部",
                    value: ""
                }, {
                    label: "阅卷中",
                    value: "1"
                }, {
                    label: "已完成",
                    value: "2"
                }, {
                    label: "已公布成绩",
                    value: "3"
                } ]
            }, {
                label: "考试时间",
                key: "dateTime",
                type: "datetimerange"
            } ]), Na = a => g.value.indexOf(a == null ? void 0 : a.id) >= 0, Ea = a => {
                if (!c.value || !Object.keys(c.value).length) return;
                let t = {
                    ...c.value
                }, e = a.newCandidateScore - a.oldCandidateScore;
                a.type === 1 && (t.objectiveScore = Math.max(0, parseFloat(t.objectiveScore || "0") + e), 
                t.objectiveScore = parseFloat(t.objectiveScore.toFixed(1))), t.finalScore = Math.max(0, parseFloat(t.finalScore || "0") + e), 
                t.finalScore = parseFloat(t.finalScore.toFixed(1)), isNaN(t.finalScore) && (t.finalScore = 0), 
                c.value = t;
            }, wa = a => a.length > 0 ? a.map(t => t.userName).join("、") : "--", Qa = a => {
                let t = S.value.findIndex(e => e.id == a);
                t != -1 && (S.value[t].questionStatus = "1");
            }, Ga = a => {
                p.value = a;
            }, Ta = a => {
                [ "3" ].includes(a.markStatus) ? (L.value = "阅卷详情", B.value = 1) : (L.value = "阅卷列表", 
                B.value = 0), Ce({
                    examId: a.id
                }).then(t => {
                    t ? (Ia.value.examId = a.id || "", z.value.handleOpen()) : Aa.warning("您已被排考人从阅卷人员范围中移除，暂无阅卷权限！");
                });
            }, $a = a => {
                p.value = a;
                let t = {
                    volumeFlag: p.value,
                    paperId: O.value
                };
                P({
                    id: t.paperId
                }).then(e => {
                    c.value.finalScore = e.finalScore ? parseFloat(e.finalScore.toFixed(1)) : 0, 
                    c.value.objectiveScore = e.objectiveScore ? parseFloat(e.objectiveScore.toFixed(1)) : 0;
                }), U(t).then(e => {
                    f.value = {
                        ...e
                    }, i.value.examName = f.value.examName, i.value.multiSelectionHalfScoreSwitch = e == null ? void 0 : e.multiSelectionHalfScoreSwitch;
                });
            }, ja = a => {
                T.value = "0", O.value = a.paperId || a.id, i.value.nickName = a.nickName, 
                i.value.number = a.number, i.value.examId = a.examId, i.value.candidateId = a.candidateId, 
                i.value.paperId = a.paperId || a.id;
                let t = {
                    volumeFlag: p.value,
                    paperId: a.paperId || a.id
                };
                P({
                    id: t.paperId
                }).then(e => {
                    c.value.finalScore = e.finalScore ? parseFloat(e.finalScore.toFixed(1)) : 0, 
                    c.value.objectiveScore = e.objectiveScore ? parseFloat(e.objectiveScore.toFixed(1)) : 0;
                }), U(t).then(e => {
                    f.value = {
                        ...e
                    }, i.value.examName = f.value.examName, i.value.multiSelectionHalfScoreSwitch = e == null ? void 0 : e.multiSelectionHalfScoreSwitch, 
                    m.value || (m.value = !0);
                });
            }, Ja = a => {
                T.value = "3", O.value = a.paperId || a.id, i.value.nickName = a.nickName || "", 
                i.value.number = a.number || "", i.value.examId = a.examId || "", 
                i.value.candidateId = a.candidateId || "";
                let t = {
                    volumeFlag: !0,
                    paperId: a.paperId || a.id
                };
                P({
                    id: t.paperId
                }).then(e => {
                    c.value.finalScore = e.finalScore, c.value.objectiveScore = e.objectiveScore;
                }), U(t).then(e => {
                    f.value = {
                        ...e
                    }, i.value.examName = f.value.examName || "", i.value.multiSelectionHalfScoreSwitch = e == null ? void 0 : e.multiSelectionHalfScoreSwitch, 
                    m.value || (m.value = !0);
                });
            }, Ca = a => new Promise((t, e) => {
                Be(a).then(s => {
                    var h;
                    S.value = s || [];
                    let x = {
                        paperId: a.id || ((h = S.value[0]) == null ? void 0 : h.id),
                        questionNO: a.questionNO,
                        examId: a.examId
                    };
                    Le(x).then(k => {
                        f.value = k || [], m.value || (m.value = !0), t();
                    }).catch(k => {
                        e(k);
                    });
                }).catch(s => {
                    e(s);
                });
            }), Xa = async a => {
                var t, e;
                T.value = "1", ka.value = a.questionNO, await Fe({
                    examId: a.examId
                }).then(s => {
                    var x, h;
                    i.value.examName = (s == null ? void 0 : s.examName) || "", 
                    i.value.multiSelectionHalfScoreSwitch = (h = (x = s == null ? void 0 : s.examSetting) == null ? void 0 : x.otherSetting) == null ? void 0 : h.multiSelectionHalfScoreSwitch;
                }), await Ca(a), i.value.number = ((t = S.value[0]) == null ? void 0 : t.number) || "", 
                i.value.nickName = ((e = S.value[0]) == null ? void 0 : e.nickName) || "", 
                i.value.examId = a.examId || "";
            }, Wa = a => {
                let t = {
                    examId: a.examId,
                    candidateId: a.candidateId
                };
                He(t).then(e => {
                    e ? ja(e) : de.alert("暂无下一套卷", "系统提示", {
                        confirmButtonText: "确定",
                        customClass: "neu-message-box"
                    }).then(s => {
                        ve(() => {
                            Fa();
                        });
                    });
                });
            }, Ya = async a => {
                await Ca({
                    ...a,
                    questionNO: ka.value
                }), i.value.number = a.number || "", i.value.nickName = a.nickName || "";
            }, Za = () => {
                z.value.getTableList(), p.value = !1;
            }, Fa = () => {
                m.value = !1;
            }, ae = a => {
                _.pageNum = a.page, _.pageSize = a.limit, j();
            };
            function ee(a) {
                N.value.searchText = a.searchText, N.value.status = a.status, N.value.dateTime = a.dateTime, 
                j();
            }
            const j = () => {
                let a = N.value.dateTime || [], t = {
                    ...N.value,
                    startTime: a[0] || "",
                    endTime: a[1] || "",
                    pageNum: _.pageNum > 0 ? _.pageNum - 1 : 0,
                    pageSize: _.pageSize
                };
                Oe(t).then(e => {
                    var s;
                    I.value = e.content || [], H.value = e.totalElements || 0, g.value = I.value.length > 0 ? [ (s = I.value[0]) == null ? void 0 : s.id ] : [];
                });
            };
            return se(() => {
                j();
            }), (a, t) => {
                const e = ke, s = ge, x = pe, h = fe, k = he, te = re, Ha = ce("show-tip");
                return d(), y("div", q, [ r("div", A, [ v(e, {
                    ref_key: "searchKRef",
                    ref: Ka,
                    searchList: o(Va),
                    inDialog: !0,
                    keywordsInfo: {
                        label: "考试名称/课程名称/课程代码",
                        key: "searchText"
                    },
                    onHandleSearch: ee
                }, null, 8, [ "searchList" ]) ]), r("div", K, [ (d(!0), y(me, null, ue(o(I), l => {
                    var Oa, Ba;
                    return d(), y("div", {
                        key: l == null ? void 0 : l.id,
                        class: D([ "data-item mb-5 pa-5", Na(l) ? "is-active" : "" ]),
                        onClick: La => {
                            return za = o(g).indexOf(l == null ? void 0 : l.id) >= 0, 
                            M = l == null ? void 0 : l.id, void (za ? g.value = g.value.filter(le => le !== M) : g.value.push(M));
                            var za, M;
                        }
                    }, [ r("div", E, b((l == null ? void 0 : l.examName) || "--"), 1), r("div", Q, [ v(s, {
                        type: o(Re).EXAM_MARKING_STATUS,
                        value: l.markStatus
                    }, null, 8, [ "type", "value" ]) ]), r("div", G, [ v(x, {
                        icon: "ep:arrow-up",
                        size: 14
                    }) ]), r("div", $, [ r("div", J, [ X, r("span", W, b(o(Ua)(l.startTime) || "--"), 1) ]), r("div", Y, [ Z, r("span", aa, b(o(Ua)(l.endTime) || "--"), 1) ]), r("div", ea, [ ta, r("span", la, b(l.paperScore || "0") + "分钟", 1) ]), l != null && l.course ? (d(), 
                    y("div", ra, [ ia, r("span", oa, b(`${(Oa = l == null ? void 0 : l.course) == null ? void 0 : Oa.courseName}(${(Ba = l == null ? void 0 : l.course) == null ? void 0 : Ba.courseCode})` || "--"), 1) ])) : C("", !0) ]), r("div", {
                        class: D(Na(l) ? "show-body" : "hide-body")
                    }, [ r("div", na, [ r("div", sa, [ ca, R((d(), y("span", ma, [ v(h, {
                        content: l.ownerName,
                        placement: "top",
                        "show-after": 300
                    }, {
                        default: F(() => [ r("span", ua, b(l.ownerName || "--"), 1) ]),
                        _: 2
                    }, 1032, [ "content" ]) ])), [ [ Ha ] ]) ]), r("div", _a, [ da, R((d(), 
                    y("span", va, [ v(h, {
                        content: wa(l.markerList || []),
                        placement: "top",
                        "show-after": 300
                    }, {
                        default: F(() => [ r("span", pa, b(wa(l.markerList || [])), 1) ]),
                        _: 2
                    }, 1032, [ "content" ]) ])), [ [ Ha ] ]) ]), fa ]), r("div", ha, [ r("div", Sa, [ [ "3" ].includes(l.markStatus) ? C("", !0) : (d(), 
                    Ma(k, {
                        key: 0,
                        type: "primary",
                        onClick: Ra(La => Ta(l), [ "stop" ])
                    }, {
                        default: F(() => [ Da("阅卷") ]),
                        _: 2
                    }, 1032, [ "onClick" ])), [ "3" ].includes(l.markStatus) ? (d(), 
                    Ma(k, {
                        key: 1,
                        onClick: Ra(La => Ta(l), [ "stop" ])
                    }, {
                        default: F(() => [ Da("详情") ]),
                        _: 2
                    }, 1032, [ "onClick" ])) : C("", !0) ]), r("div", ya, [ v(Me, {
                        progressBarRealNumber: l.markPaperTotal || 0,
                        progressBarTotal: l.paperTotal || 0
                    }, null, 8, [ "progressBarRealNumber", "progressBarTotal" ]) ]) ]) ], 2) ], 10, V);
                }), 128)), o(I).length === 0 ? (d(), y("div", ba, ga)) : C("", !0) ]), r("div", xa, [ R(v(te, {
                    limit: o(_).pageSize,
                    "onUpdate:limit": t[0] || (t[0] = l => o(_).pageSize = l),
                    page: o(_).pageNum,
                    "onUpdate:page": t[1] || (t[1] = l => o(_).pageNum = l),
                    total: o(H),
                    onPagination: ae
                }, null, 8, [ "limit", "page", "total" ]), [ [ _e, o(H) > 0 ] ]) ]), v(Ne, {
                    ref_key: "markingSettingRef",
                    ref: z,
                    markingState: o(B),
                    drawerTitle: o(L),
                    idObj: o(Ia),
                    onMarkByPerson: ja,
                    onMarkByQuestions: Xa,
                    onParticulars: Ja,
                    onMarkingSettingClose: j
                }, null, 8, [ "markingState", "drawerTitle", "idObj" ]), v(Te, {
                    modelValue: o(m),
                    "onUpdate:modelValue": t[2] || (t[2] = l => Pa(m) ? m.value = l : null),
                    form: o(f),
                    informationHeaderObj: o(i),
                    markQuestionsByStudentNumList: o(S),
                    markType: o(T),
                    scoreList: o(c),
                    showObjectiveItem: o(p),
                    "onUpdate:showObjectiveItem": t[3] || (t[3] = l => Pa(p) ? p.value = l : null),
                    onHandleBack: Fa,
                    onManualSettingsHaveBeenRead: Qa,
                    onHandleDrawerClose: Za,
                    onHandleNumListChange: Ya,
                    onSubmitAndContinue: Wa,
                    onShowObjectiveItemChange: Ga,
                    onComputedScore: Ea,
                    onSwitchChange: $a
                }, null, 8, [ "modelValue", "form", "informationHeaderObj", "markQuestionsByStudentNumList", "markType", "scoreList", "showObjectiveItem" ]) ]);
            };
        }
    }, [ [ "__scopeId", "data-v-6f080e32" ] ]);
});

export {
    ct as __tla,
    qa as default
};