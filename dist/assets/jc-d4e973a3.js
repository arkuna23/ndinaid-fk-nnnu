import {
    _ as $e,
    __tla as Ke
} from "./index.vue_vue_type_script_setup_true_name_ResourcePreview_lang-62b68757.js";

import {
    b0 as Le,
    e as Oe,
    u as Je,
    T as Qe,
    r as v,
    U as Ge,
    f as We,
    j as Xe,
    o as d,
    c as m,
    a as e,
    z as we,
    A as Ie,
    C as z,
    l as n,
    v as c,
    D as N,
    k as i,
    t as r,
    B as g,
    bo as ke,
    J as Ye,
    K as ea,
    av as aa,
    aw as la,
    _ as ta,
    P as sa,
    O as ia,
    bp as ra,
    bq as oa,
    Q as na,
    R as ua,
    S as da,
    __tla as pa
} from "./index-6c08ea4c.js";

import {
    _ as ma,
    __tla as ca
} from "./index-a34a73bc.js";

import {
    _ as ha,
    __tla as va
} from "./Editor-ef737d2a.js";

import {
    _ as De
} from "./editorIcon-5192f4b2.js";

import {
    g as Ne
} from "./file.data-794ea5d0.js";

import {
    p as Ve,
    q as ga,
    r as fa,
    __tla as _a
} from "./pkgManage-14933852.js";

import {
    q as Ue,
    h as ba,
    __tla as xa
} from "./file-e038b35d.js";

import {
    _ as ya
} from "./_plugin-vue_export-helper-1b428a4d.js";

import {
    __tla as wa
} from "./index.es-14d10e28.js";

import {
    __tla as Ia
} from "./project-file-a2b4fd07.js";

import "./file_题-23882218.js";

import {
    __tla as ka
} from "./Editor.vue_vue_type_style_index_1_scoped_83b80ee8_lang-964690b9.js";

import {
    __tla as Da
} from "./style.css_vue_type_style_index_0_src_true_lang-90967dd2.js";

let Re, Na = Promise.all([ (() => {
    try {
        return Ke;
    } catch {}
})(), (() => {
    try {
        return pa;
    } catch {}
})(), (() => {
    try {
        return ca;
    } catch {}
})(), (() => {
    try {
        return va;
    } catch {}
})(), (() => {
    try {
        return _a;
    } catch {}
})(), (() => {
    try {
        return xa;
    } catch {}
})(), (() => {
    try {
        return wa;
    } catch {}
})(), (() => {
    try {
        return Ia;
    } catch {}
})(), (() => {
    try {
        return ka;
    } catch {}
})(), (() => {
    try {
        return Da;
    } catch {}
})() ]).then(async () => {
    let p, H, j, C, P, A, E, F, M, S, Z, q, B, $, K, L, O, J, Q, G, W, X, Y, ee, ae, le, te, se, ie, re, oe, ne, ue, de, pe, me, ce, he;
    p = k => (ua("data-v-0da7dc4a"), k = k(), da(), k), H = {
        key: 0,
        style: {
            padding: "20px 30px 30px"
        }
    }, j = p(() => r("img", {
        src: De,
        alt: ""
    }, null, -1)), C = p(() => r("div", {
        class: "_title",
        style: {
            "margin-bottom": "10px"
        }
    }, "基本信息", -1)), P = {
        style: {
            "font-weight": "normal"
        }
    }, A = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 60px)"
        }
    }, E = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 60px)"
        }
    }, F = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 80px)"
        }
    }, M = {
        class: "jcjs ellipsis",
        style: {
            "max-width": "calc(100% - 80px)"
        }
    }, S = p(() => r("div", {
        class: "_title",
        style: {
            margin: "20px 0 10px 0"
        }
    }, "教材简介", -1)), Z = [ "innerHTML" ], q = {
        key: 2,
        style: {
            "padding-left": "20px"
        }
    }, B = p(() => r("div", {
        class: "_title",
        style: {
            margin: "20px 0 10px 0"
        }
    }, "教材链接", -1)), $ = [ "href" ], K = {
        key: 4,
        style: {
            "padding-left": "20px"
        }
    }, L = {
        key: 5,
        style: {
            margin: "20px 0"
        }
    }, O = p(() => r("div", {
        style: {
            "margin-bottom": "10px"
        },
        class: "_title"
    }, "教材附件", -1)), J = [ "src" ], Q = {
        key: 6,
        style: {
            margin: "20px 0"
        }
    }, G = [ p(() => r("div", {
        style: {
            "margin-bottom": "10px"
        },
        class: "_title"
    }, "教材附件", -1)), p(() => r("div", {
        style: {
            "padding-left": "20px"
        }
    }, "无", -1)) ], W = {
        key: 1,
        class: "neu-no-data",
        style: {
            height: "500px"
        }
    }, X = p(() => r("p", {
        class: ""
    }, "暂无数据", -1)), Y = p(() => r("img", {
        src: De,
        alt: ""
    }, null, -1)), ee = {
        key: 1,
        class: "height_box"
    }, ae = {
        style: {
            padding: "0 30px"
        }
    }, le = p(() => r("div", {
        style: {
            display: "block",
            width: "100%",
            height: "20px"
        }
    }, null, -1)), te = p(() => r("div", {
        class: "title_editor"
    }, "教材简介", -1)), se = {
        style: {
            width: "100%"
        }
    }, ie = p(() => r("div", {
        style: {
            width: "100%",
            height: "1px"
        }
    }, null, -1)), re = p(() => r("div", {
        style: {
            width: "100%",
            height: "20px"
        }
    }, null, -1)), oe = {
        key: 0,
        class: "title_editor"
    }, ne = [ "src" ], ue = {
        key: 1,
        class: "title_editor"
    }, de = {
        key: 2,
        style: {
            width: "100%"
        }
    }, pe = p(() => r("div", {
        class: "title_editor",
        style: {
            margin: "5px 0 0 0"
        }
    }, "是否允许下载附件", -1)), me = {
        style: {
            "padding-left": "20px"
        }
    }, ce = p(() => r("div", {
        style: {
            height: "40px"
        }
    }, null, -1)), he = {
        style: {
            position: "absolute",
            bottom: "0px",
            width: "100%",
            "text-align": "center",
            "box-shadow": "0px -1px 0px 0px #DFDFDF",
            height: "70px",
            "line-height": "70px",
            "background-color": "#fff"
        }
    }, Re = ya({
        __name: "jc",
        emits: [ "isShowTipFun" ],
        setup(k, {
            emit: Va
        }) {
            const V = Le("basicInformation"), U = Oe(() => b.name.includes("Manage"));
            Je();
            const b = Qe(), ve = v(), R = v(), x = v(!1), t = v({
                materialDes: "",
                resourceId: "",
                isDownload: 0
            }), a = v({
                materialDes: null,
                resourceId: null,
                newResourceId: null,
                showNewResourceId: !1,
                isDownload: 0
            }), o = v({
                materialName: "",
                isbn: "",
                author: "",
                publishingHouse: "",
                publishingInfo: "",
                materialUrl: "",
                materialDesTxt: ""
            }), ge = v(), Te = Ge({
                materialName: [ {
                    max: 50,
                    message: "教材名称最多50位字符",
                    trigger: "blur"
                } ],
                isbn: [ {
                    max: 30,
                    message: "ISBN最多30位字符",
                    trigger: "blur"
                } ],
                author: [ {
                    max: 50,
                    message: "作者最多50位字符",
                    trigger: "blur"
                } ],
                publishingHouse: [ {
                    max: 50,
                    message: "出版社最多50位字符",
                    trigger: "blur"
                } ],
                publishingInfo: [ {
                    max: 50,
                    message: "版次信息最多50位字符",
                    trigger: "blur"
                } ],
                materialUrl: [ {
                    pattern: /^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/,
                    message: "教材链接不正确",
                    trigger: "blur"
                } ],
                materialDesTxt: [ {
                    max: 2e3,
                    message: "教材简介最多2000位字符",
                    trigger: "change"
                } ]
            }), y = v("preview"), fe = () => {
                y.value = "editor", Ve({
                    id: b.params.id
                }).then(l => {
                    if (!(l = l && l[0])) return !1;
                    a.value = l, o.value.materialName = l.materialName, o.value.isbn = l.isbn, 
                    o.value.author = l.author, o.value.publishingHouse = l.publishingHouse, 
                    o.value.publishingInfo = l.publishingInfo, o.value.materialUrl = l.materialUrl, 
                    o.value.materialDesTxt = "", l.resourceId ? Ue(l.resourceId).then(s => {
                        a.value.fileInfo = s, a.value.fileInfo.resType = 3, a.value.resName = s.objectKey || s.name;
                        var h = a.value.resName.lastIndexOf(".");
                        a.value.resExt = "." + a.value.resName.substring(h + 1), 
                        a.value.newResourceId = !1, a.value.showNewResourceId = !1;
                    }) : (a.value.resourceId = null, a.value.newResourceId = null, 
                    a.value.showNewResourceId = !1, a.value.isDownload = 0);
                });
            }, _e = l => {
                ve.value.operation(l.fileInfo);
            }, ze = () => {
                a.value.resourceId = null;
            }, He = () => {
                ge.value.validate(l => {
                    l && (x.value = !0, a.value.showNewResourceId ? R.value.submitFile() : be());
                });
            }, be = l => {
                l && l.length && (a.value.newResourceId = l[0].eid), a.value && a.value.id ? ga({
                    id: a.value.id,
                    neuPkgId: b.params.id,
                    materialDes: a.value.materialDes == "<p><br></p>" ? "" : a.value.materialDes,
                    isDownload: a.value.isDownload,
                    resourceId: a.value.newResourceId ? a.value.newResourceId : a.value.resourceId || "",
                    ...o.value
                }).then(s => {
                    ke({
                        message: "操作成功",
                        type: "success"
                    }), window.setTimeout(() => {
                        y.value = "preview", D(), x.value = !1;
                    }, 500);
                }).catch(s => {
                    x.value = !1;
                }) : fa({
                    neuPkgId: b.params.id,
                    resPkgId: b.params.id,
                    resRootPkgId: V.value.neuPkgId,
                    resIsNeu: V.value && V.value.neuPkgId ? 1 : 0,
                    materialDes: a.value.materialDes == "<p><br></p>" ? "" : a.value.materialDes,
                    isDownload: a.value.isDownload,
                    resourceId: a.value.newResourceId ? a.value.newResourceId : a.value.resourceId || "",
                    ...o.value
                }).then(s => {
                    ke({
                        message: "操作成功",
                        type: "success"
                    }), window.setTimeout(() => {
                        y.value = "preview", D(), x.value = !1;
                    }, 500);
                }).catch(s => {
                    x.value = !1;
                });
            }, je = () => {
                a.value.showNewResourceId = !0;
            }, Ce = () => {
                R.value.cancelUpload(), a.value.showNewResourceId = !1;
            }, Pe = () => {
                a.value.showNewResourceId = !1;
            }, D = () => {
                Ve({
                    id: b.params.id
                }).then(l => {
                    if ((l = l && l[0]) && !l.author && !l.isbn && !l.materialDes && !l.materialName && !l.materialUrl && !l.publishingHouse && !l.publishingInfo && !l.resourceId) return t.value = null, 
                    !1;
                    t.value = l, l && l.resourceId && Ue(l.resourceId).then(s => {
                        t.value.fileInfo = s, t.value.fileInfo.resType = 3, t.value.resName = s.objectKey || s.name;
                        var h = t.value.resName.lastIndexOf(".");
                        t.value.resExt = "." + t.value.resName.substring(h + 1);
                    });
                });
            }, Ae = () => {
                y.value = "preview", a.value = {
                    materialDes: null,
                    resourceId: null,
                    newResourceId: null,
                    showNewResourceId: !1,
                    isDownload: 0
                }, o.value = {
                    materialName: "",
                    isbn: "",
                    author: "",
                    publishingHouse: "",
                    publishingInfo: "",
                    materialUrl: "",
                    materialDesTxt: ""
                }, D();
            };
            return We(() => {
                D();
            }), (l, s) => {
                const h = Ye, w = ea, I = aa, Ee = la, Fe = ta, f = sa, _ = ia, Me = ha, Se = ma, xe = ra, Ze = oa, qe = na, Be = $e, ye = Xe("hasPermi-none");
                return d(), m("div", {
                    id: "jc",
                    style: {
                        padding: "20px 0 0"
                    },
                    class: we("isManage" + e(U))
                }, [ e(y) == "preview" ? (d(), m("div", {
                    key: 0,
                    style: {
                        padding: "0 30px"
                    },
                    class: we({
                        height_box: e(t)
                    })
                }, [ e(t) ? (d(), m("div", H, [ e(U) ? Ie((d(), z(h, {
                    key: 0,
                    style: {
                        float: "right"
                    },
                    type: "primary",
                    onClick: fe
                }, {
                    default: n(() => [ j, c(" 编辑") ]),
                    _: 1
                })), [ [ ye, [ "teachmanager:teach-course-material:update" ] ] ]) : N("", !0), C, i(Ee, {
                    style: {
                        "font-size": "14px",
                        "padding-left": "20px"
                    }
                }, {
                    default: n(() => [ i(I, {
                        span: 24,
                        style: {
                            "margin-bottom": "10px",
                            "font-weight": "900"
                        }
                    }, {
                        default: n(() => [ c("教材名称： "), i(w, {
                            effect: "dark",
                            disabled: !e(t).materialName,
                            content: e(t).materialName,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: n(() => [ r("span", P, g(e(t).materialName || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), i(I, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: n(() => [ c("ISBN： "), i(w, {
                            effect: "dark",
                            disabled: !e(t).isbn,
                            content: e(t).isbn,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: n(() => [ r("span", A, g(e(t).isbn || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), i(I, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: n(() => [ c("作者： "), i(w, {
                            effect: "dark",
                            disabled: !e(t).author,
                            content: e(t).author,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: n(() => [ r("span", E, g(e(t).author || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), i(I, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: n(() => [ c("出版社： "), i(w, {
                            effect: "dark",
                            disabled: !e(t).publishingHouse,
                            content: e(t).publishingHouse,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: n(() => [ r("span", F, g(e(t).publishingHouse || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }), i(I, {
                        span: 6,
                        style: {
                            "font-weight": "900"
                        }
                    }, {
                        default: n(() => [ c("版次信息： "), i(w, {
                            effect: "dark",
                            disabled: !e(t).publishingInfo,
                            content: e(t).publishingInfo,
                            placement: "top",
                            enterable: !1
                        }, {
                            default: n(() => [ r("span", M, g(e(t).publishingInfo || "无"), 1) ]),
                            _: 1
                        }, 8, [ "disabled", "content" ]) ]),
                        _: 1
                    }) ]),
                    _: 1
                }), S, e(t).materialDes && e(t).materialDes != "<p><br></p>" ? (d(), 
                m("div", {
                    key: 1,
                    innerHTML: e(t).materialDes,
                    style: {
                        "padding-left": "20px",
                        "word-break": "break-all",
                        "white-space": "pre-wrap"
                    },
                    class: "editor-content-view wangEditorLinewrapPreView"
                }, null, 8, Z)) : (d(), m("div", q, "无")), B, e(t).materialUrl ? (d(), 
                m("a", {
                    key: 3,
                    href: e(t).materialUrl,
                    style: {
                        display: "block",
                        "padding-left": "20px",
                        "text-decoration": "none",
                        color: "#245FE6",
                        "font-size": "14px"
                    },
                    target: "_blank"
                }, g(e(t).materialUrl), 9, $)) : (d(), m("div", K, "无")), e(t).resourceId ? (d(), 
                m("div", L, [ O, r("img", {
                    src: e(Ne)(e(t).resName + e(t).resExt),
                    alt: "",
                    style: {
                        width: "24px",
                        "margin-right": "5px",
                        "margin-left": "20px",
                        position: "relative",
                        top: "5px"
                    }
                }, null, 8, J), r("span", {
                    class: "file-name__span",
                    onClick: s[0] || (s[0] = u => _e(e(t)))
                }, g(e(t).resName), 1), e(t).isDownload ? (d(), z(h, {
                    key: 0,
                    type: "primary",
                    plain: "",
                    round: "",
                    size: "small",
                    onClick: s[1] || (s[1] = u => {
                        return T = e(t), void ba(T.resourceId, T.resName);
                        var T;
                    })
                }, {
                    default: n(() => [ c("下载附件") ]),
                    _: 1
                })) : N("", !0) ])) : (d(), m("div", Q, G)) ])) : (d(), m("div", W, [ i(Fe, {
                    icon: "svg-icon:bg-no-data",
                    size: 200,
                    class: "",
                    style: {
                        height: "160px"
                    }
                }), X, e(U) ? Ie((d(), z(h, {
                    key: 0,
                    type: "primary",
                    style: {
                        "margin-top": "10px"
                    },
                    onClick: fe
                }, {
                    default: n(() => [ Y, c(" 编辑") ]),
                    _: 1
                })), [ [ ye, [ "teachmanager:teach-course-material:update" ] ] ]) : N("", !0) ])) ], 2)) : (d(), 
                m("div", ee, [ r("div", ae, [ i(qe, {
                    ref_key: "formRef",
                    ref: ge,
                    "label-position": "top",
                    "label-width": "90px",
                    inline: !0,
                    model: e(o),
                    rules: e(Te)
                }, {
                    default: n(() => [ i(_, {
                        prop: "materialName",
                        label: "教材名称"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).materialName,
                            "onUpdate:modelValue": s[2] || (s[2] = u => e(o).materialName = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), i(_, {
                        prop: "isbn",
                        label: "ISBN"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).isbn,
                            "onUpdate:modelValue": s[3] || (s[3] = u => e(o).isbn = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), le, i(_, {
                        prop: "author",
                        label: "作者"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).author,
                            "onUpdate:modelValue": s[4] || (s[4] = u => e(o).author = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), i(_, {
                        prop: "publishingHouse",
                        label: "出版社"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).publishingHouse,
                            "onUpdate:modelValue": s[5] || (s[5] = u => e(o).publishingHouse = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), i(_, {
                        prop: "publishingInfo",
                        label: "版次信息"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).publishingInfo,
                            "onUpdate:modelValue": s[6] || (s[6] = u => e(o).publishingInfo = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), te, r("div", se, [ i(Me, {
                        modelValue: e(a).materialDes,
                        "onUpdate:modelValue": s[7] || (s[7] = u => e(a).materialDes = u),
                        ltm: 10,
                        height: "150px",
                        text: e(o).materialDesTxt,
                        "onUpdate:text": s[8] || (s[8] = u => e(o).materialDesTxt = u)
                    }, null, 8, [ "modelValue", "text" ]) ]), ie, i(_, {
                        prop: "materialDesTxt",
                        label: ""
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).materialDesTxt,
                            "onUpdate:modelValue": s[9] || (s[9] = u => e(o).materialDesTxt = u),
                            style: {
                                display: "none"
                            }
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), re, i(_, {
                        prop: "materialUrl",
                        label: "教材链接"
                    }, {
                        default: n(() => [ i(f, {
                            modelValue: e(o).materialUrl,
                            "onUpdate:modelValue": s[10] || (s[10] = u => e(o).materialUrl = u),
                            clearable: ""
                        }, null, 8, [ "modelValue" ]) ]),
                        _: 1
                    }), e(a).resourceId ? (d(), m("div", oe, [ c("附件      "), r("img", {
                        src: e(Ne)(e(a).resName + e(a).resExt),
                        alt: "",
                        style: {
                            width: "24px",
                            "margin-right": "5px",
                            position: "relative",
                            top: "5px"
                        }
                    }, null, 8, ne), r("span", {
                        class: "file-name__span",
                        onClick: s[11] || (s[11] = u => _e(e(a)))
                    }, g(e(a).resName), 1), c("  "), r("span", {
                        style: {
                            color: "#E14635",
                            cursor: "pointer"
                        },
                        onClick: ze
                    }, "删除") ])) : (d(), m("div", ue, "附件")), r("div", null, [ i(Se, {
                        ref_key: "NeuUploadRef",
                        ref: R,
                        accept: ".doc,.docx,.ppt,.pptx,.pdf",
                        alert: "总文件大小不得超过50M",
                        limit: 1,
                        size: 50,
                        onSuccess: be,
                        onError: Ce,
                        onFileChange: je,
                        onFileRemove: Pe,
                        showUploadIcon: !0,
                        showTooltip: !1,
                        innerBoxTip: "请上传.doc,.docx,.ppt,.pptx,.pdf文件，大小不得超过50M",
                        style: {
                            width: "360px"
                        }
                    }, null, 512) ]), e(a).showNewResourceId || e(a).resourceId ? (d(), 
                    m("div", de, [ pe, r("div", me, [ i(Ze, {
                        modelValue: e(a).isDownload,
                        "onUpdate:modelValue": s[12] || (s[12] = u => e(a).isDownload = u)
                    }, {
                        default: n(() => [ i(xe, {
                            value: 1,
                            size: "large"
                        }, {
                            default: n(() => [ c("是") ]),
                            _: 1
                        }), i(xe, {
                            value: 0,
                            size: "large"
                        }, {
                            default: n(() => [ c("否") ]),
                            _: 1
                        }) ]),
                        _: 1
                    }, 8, [ "modelValue" ]) ]) ])) : N("", !0) ]),
                    _: 1
                }, 8, [ "model", "rules" ]), ce ]), r("div", he, [ i(h, {
                    onClick: Ae
                }, {
                    default: n(() => [ c("取消") ]),
                    _: 1
                }), i(h, {
                    type: "primary",
                    onClick: He,
                    disabled: e(x)
                }, {
                    default: n(() => [ c("保存") ]),
                    _: 1
                }, 8, [ "disabled" ]) ]) ])), i(Be, {
                    ref_key: "ResourcePreviewRef",
                    ref: ve
                }, null, 512) ], 2);
            };
        }
    }, [ [ "__scopeId", "data-v-0da7dc4a" ] ]);
});

export {
    Na as __tla,
    Re as default
};